{"version":3,"sources":["node_modules/browser-pack/_prelude.js","lib/actions.js","lib/dom.js","lib/movie.js","lib/scenario.js","lib/utils.js","lib/vendor/tween.js","lib/widgets/prompt.js","lib/widgets/tooltip.js"],"names":[],"mappings":"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","file":"movie.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","import {extend, makePos, getCursor} from './utils';\n\nvar actions = {\n\t/**\n\t * Type-in passed text into current editor char-by-char\n\t * @param {Object} options Current options\n\t * @param {CodeMirror} editor Editor instance where action should be \n\t * performed\n\t * @param {Function} next Function to call when action performance\n\t * is completed\n\t * @param {Function} timer Function that creates timer for delayed \n\t * execution. This timer will automatically delay execution when\n\t * scenario is paused and revert when played again \n\t */\n\ttype: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\ttext: '',  // text to type\n\t\t\tdelay: 60, // delay between character typing\n\t\t\tpos: null  // initial position where to start typing\n\t\t}, wrap('text', options));\n\t\t\n\t\tif (!options.text) {\n\t\t\tthrow new Error('No text provided for \"type\" action');\n\t\t}\n\t\t\n\t\tif (options.pos !== null) {\n\t\t\teditor.setCursor(makePos(options.pos, editor));\n\t\t}\n\t\t\n\t\tvar chars = options.text.split('');\n\t\t\n\t\ttimer(function perform() {\n\t\t\tvar ch = chars.shift();\n\t\t\teditor.replaceSelection(ch, 'end');\n\t\t\tif (chars.length) {\n\t\t\t\ttimer(perform, options.delay);\n\t\t\t} else {\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.delay);\n\t},\n\t\n\t/**\n\t * Wait for a specified timeout\n\t * @param options\n\t * @param editor\n\t * @param next\n\t * @param timer\n\t */\n\twait: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\ttimeout: 100\n\t\t}, wrap('timeout', options));\n\t\t\n\t\ttimer(next, parseInt(options.timeout, 10));\n\t},\n\t\n\t/**\n\t * Move caret to a specified position\n\t */\n\tmoveTo: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tdelay: 80,\n\t\t\timmediate: false // TODO: remove, use delay: 0 instead\n\t\t}, wrap('pos', options));\n\t\t\n\t\tif (typeof options.pos === 'undefined') {\n\t\t\tthrow new Error('No position specified for \"moveTo\" action');\n\t\t}\n\t\t\n\t\tvar curPos = getCursor(editor);\n\t\t// reset selection, if exists\n\t\teditor.setSelection(curPos, curPos);\n\t\tvar targetPos = makePos(options.pos, editor);\n\t\t\n\t\tif (options.immediate || !options.delay) {\n\t\t\teditor.setCursor(targetPos);\n\t\t\tnext();\n\t\t}\n\n\t\tvar deltaLine = targetPos.line - curPos.line;\n\t\tvar deltaChar = targetPos.ch - curPos.ch;\n\t\tvar steps = Math.max(deltaChar, deltaLine);\n\t\t// var stepLine = deltaLine / steps;\n\t\t// var stepChar = deltaChar / steps;\n\t\tvar stepLine = deltaLine < 0 ? -1 : 1;\n\t\tvar stepChar = deltaChar < 0 ? -1 : 1;\n\n\t\ttimer(function perform() {\n\t\t\tcurPos = getCursor(editor);\n\t\t\tif (steps > 0 && !(curPos.line == targetPos.line && curPos.ch == targetPos.ch)) {\n\n\t\t\t\tif (curPos.line != targetPos.line) {\n\t\t\t\t\tcurPos.line += stepLine;\n\t\t\t\t}\n\n\t\t\t\tif (curPos.ch != targetPos.ch) {\n\t\t\t\t\tcurPos.ch += stepChar;\n\t\t\t\t}\n\n\t\t\t\teditor.setCursor(curPos);\n\t\t\t\tsteps--;\n\t\t\t\ttimer(perform, options.delay);\n\t\t\t} else {\n\t\t\t\teditor.setCursor(targetPos);\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.delay);\n\t},\n\n\t/**\n\t * Similar to \"moveTo\" function but with immediate cursor position update\n\t */\n\tjumpTo: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tafterDelay: 200\n\t\t}, wrap('pos', options));\n\n\t\tif (typeof options.pos === 'undefined') {\n\t\t\tthrow new Error('No position specified for \"jumpTo\" action');\n\t\t}\n\t\t\n\t\teditor.setCursor(makePos(options.pos, editor));\n\t\ttimer(next, options.afterDelay);\n\t},\n\t\n\t/**\n\t * Executes predefined CodeMirror command\n\t * @param {Object} options\n\t * @param {CodeMirror} editor\n\t * @param {Function} next\n\t * @param {Function} timer\n\t */\n\trun: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tbeforeDelay: 500,\n\t\t\ttimes: 1\n\t\t}, wrap('command', options));\n\t\t\n\t\tvar times = options.times;\n\t\ttimer(function perform() {\n\t\t\tif (typeof options.command === 'function') {\n\t\t\t\toptions.command(editor, options);\n\t\t\t} else {\n\t\t\t\teditor.execCommand(options.command);\t\n\t\t\t}\n\t\t\t\n\t\t\tif (--times > 0) {\n\t\t\t\ttimer(perform, options.beforeDelay);\n\t\t\t} else {\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.beforeDelay);\n\t},\n\t\n\t/**\n\t * Creates selection for specified position\n\t * @param {Object} options\n\t * @param {CodeMirror} editor\n\t * @param {Function} next\n\t * @param {Function} timer\n\t */\n\tselect: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tfrom: 'caret'\n\t\t}, wrap('to', options));\n\t\t\n\t\tvar from = makePos(options.from, editor);\n\t\tvar to = makePos(options.to, editor);\n\t\teditor.setSelection(from, to);\n\t\tnext();\n\t}\n};\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}\n\nexport default actions;","import {toArray} from './utils';\n\nvar w3cCSS = document.defaultView && document.defaultView.getComputedStyle;\n\nexport function viewportRect() {\n\tvar body = document.body;\n\tvar docElem = document.documentElement;\n\tvar clientTop = docElem.clientTop  || body.clientTop  || 0;\n\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\tvar scrollTop  = window.pageYOffset || docElem.scrollTop  || body.scrollTop;\n\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\n\treturn {\n\t\ttop: scrollTop  - clientTop,\n\t\tleft: scrollLeft - clientLeft,\n\t\twidth: body.clientWidth || docElem.clientWidth,\n\t\theight: body.clientHeight || docElem.clientHeight\n\t};\n}\n\n/**\n * Removes element from parent\n * @param {Element} elem\n * @returns {Element}\n */\nexport function remove(elem) {\n\tar(elem).forEach(el => el.parentNode && el.parentNode.removeChild(el));\n\treturn elem;\n}\n\n/**\n * Renders string into DOM element\n * @param {String} str\n * @returns {Element}\n */\nexport function toDOM(str) {\n\tvar div = document.createElement('div');\n\tdiv.innerHTML = str;\n\treturn div.firstChild;\n}\n\n/**\n * Sets or retrieves CSS property value\n * @param {Element} elem\n * @param {String} prop\n * @param {String} val\n */\nexport function css(elem, prop, val) {\n\tif (typeof prop === 'string' && val == null) {\n\t\treturn getCSS(elem, prop);\n\t}\n\t\n\tif (typeof prop === 'string') {\n\t\tvar obj = {};\n\t\tobj[prop] = val;\n\t\tprop = obj;\n\t}\n\t\n\tsetCSS(elem, prop);\n}\n\nfunction ar(obj) {\n\tif (obj.length === +obj.length) {\n\t\treturn toArray(obj);\n\t}\n\t\n\treturn Array.isArray(obj) ? obj : [obj];\n}\n\nfunction toCamelCase(name) {\n\treturn name.replace(/\\-(\\w)/g, function(str, p1) {\n\t\treturn p1.toUpperCase();\n\t});\n}\n\n/**\n * Returns CSS property value of given element.\n * @author jQuery Team\n * @param {Element} elem\n * @param {String} name CSS property value\n */\nfunction getCSS(elem, name) {\n\tvar rnumpx = /^-?\\d+(?:px)?$/i,\n\t\trnum = /^-?\\d(?:\\.\\d+)?/,\n\t\trsuf = /\\d$/;\n\t\n\tvar nameCamel = toCamelCase(name);\n\t// If the property exists in style[], then it's been set\n\t// recently (and is current)\n\tif (elem.style[nameCamel]) {\n\t\treturn elem.style[nameCamel];\n\t} \n\t\t\n\tif (w3cCSS) {\n\t\tvar cs = window.getComputedStyle(elem, '');\n\t\treturn cs.getPropertyValue(name);\n\t}\n\t\n\tif (elem.currentStyle) {\n\t\tvar ret = elem.currentStyle[name] || elem.currentStyle[nameCamel];\n\t\tvar style = elem.style || elem;\n\t\t\n\t\t// From the awesome hack by Dean Edwards\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n\t\t\n\t\t// If we're not dealing with a regular pixel number\n\t\t// but a number that has a weird ending, we need to convert it to pixels\n\t\tif (!rnumpx.test(ret) && rnum.test(ret)) {\n\t\t\t// Remember the original values\n\t\t\tvar left = style.left, rsLeft = elem.runtimeStyle.left;\n\t\t\t\n\t\t\t// Put in the new values to get a computed value out\n\t\t\telem.runtimeStyle.left = elem.currentStyle.left;\n\t\t\tvar suffix = rsuf.test(ret) ? 'em' : '';\n\t\t\tstyle.left = nameCamel === 'fontSize' ? '1em' : (ret + suffix || 0);\n\t\t\tret = style.pixelLeft + 'px';\n\t\t\t\n\t\t\t// Revert the changed values\n\t\t\tstyle.left = left;\n\t\t\telem.runtimeStyle.left = rsLeft;\n\t\t}\n\t\t\n\t\treturn ret;\n\t}\n}\n\n/**\n * Sets CSS properties to given element\n * @param {Element} elem\n * @param {Object} params CSS properties to set\n */\nfunction setCSS(elem, params) {\n\tif (!elem) {\n\t\treturn;\n\t}\n\n\tvar numProps = {'line-height': 1, 'z-index': 1, opacity: 1};\n\tvar props = Object.keys(params).map(k => {\n\t\tvar v = params[k];\n\t\tvar name = k.replace(/([A-Z])/g, '-$1').toLowerCase();\n\t\treturn name + ':' + ((typeof v === 'number' && !(name in numProps)) ? v + 'px' : v);\n\t});\n\n\telem.style.cssText += ';' + props.join(';');\n}","/**\n * A high-level library interface for creating scenarios over textarea\n * element. The <code>CodeMirror.movie</code> takes reference to textarea\n * element (or its ID) and parses its content for initial content value,\n * scenario.\n */\nimport {parseJSON, extend, toArray} from './utils';\nimport Scenario from './scenario';\n\nvar ios = /AppleWebKit/.test(navigator.userAgent) && /Mobile\\/\\w+/.test(navigator.userAgent);\nvar mac = ios || /Mac/.test(navigator.platform);\n\nvar macCharMap = {\n\t'ctrl': '⌃',\n\t'control': '⌃',\n\t'cmd': '⌘',\n\t'shift': '⇧',\n\t'alt': '⌥',\n\t'enter': '⏎',\n\t'tab': '⇥',\n\t'left': '←',\n\t'right': '→',\n\t'up': '↑',\n\t'down': '↓'\n};\n\t\nvar pcCharMap = {\n\t'cmd': 'Ctrl',\n\t'control': 'Ctrl',\n\t'ctrl': 'Ctrl',\n\t'alt': 'Alt',\n\t'shift': 'Shift',\n\t'left': '←',\n\t'right': '→',\n\t'up': '↑',\n\t'down': '↓'\n};\n\nexport var defaultOptions = {\n\t/**\n\t * Automatically parse movie definition from textarea content. Setting\n\t * this property to <code>false</code> assumes that user wants to\n\t * explicitly provide movie data: initial value, scenario etc.\n\t */\n\tparse: true,\n\t\n\t/**\n\t * String or regexp used to separate sections of movie definition, e.g.\n\t * default value, scenario and editor options\n\t */\n\tsectionSeparator: '@@@',\n\t\n\t/** Regular expression to extract outline from scenario line */\n\toutlineSeparator: /\\s+:::\\s+(.+)$/,\n\t\n\t/** Automatically prettify keyboard shortcuts in outline */\n\tprettifyKeys: true,\n\t\n\t/** Strip parentheses from prettyfied keyboard shortcut definition */\n\tstripParentheses: false\n};\n\n/**\n * High-level function to create movie instance on textarea.\n * @param {CodeMirror}\n * @param {Element} target Reference to textarea, either <code>Element</code>\n * or string ID. It can also accept existing CodeMirror object.\n * @param {Object} movieOptions Movie options. See <code>defaultOptions</code>\n * for value reference\n * @param {Object} editorOptions Additional options passed to CodeMirror\n * editor initializer.\n */\nexport default function movie(CodeMirrorEditor, target, movieOptions={}, editorOptions={}) {\n\tsetupCodeMirror(CodeMirrorEditor);\n\n\tif (typeof target === 'string') {\n\t\ttarget = document.getElementById(target);\n\t}\n\n\tvar targetIsTextarea = target.nodeName && target.nodeName.toLowerCase() === 'textarea'\n\t\n\tmovieOptions = extend({}, defaultOptions, movieOptions);\n\teditorOptions = extend({\n\t\ttheme: 'espresso',\n\t\tmode : 'text/html',\n\t\tindentWithTabs: true,\n\t\ttabSize: 4,\n\t\tlineNumbers : true,\n\t\tpreventCursorMovement: true\n\t}, editorOptions);\n\t\n\tvar initialValue = editorOptions.value || (targetIsTextarea ? target.value : target.getValue()) || '';\n\n\tif (movieOptions.parse) {\n\t\textend(movieOptions, parseMovieDefinition(initialValue, movieOptions));\n\t\tinitialValue = movieOptions.value;\n\t\tif (movieOptions.editorOptions) {\n\t\t\textend(editorOptions, movieOptions.editorOptions);\n\t\t}\n\n\t\tif (targetIsTextarea) {\n\t\t\t// read CM options from given textarea\n\t\t\tvar cmAttr = /^data\\-cm\\-(.+)$/i;\n\t\t\ttoArray(target.attributes).forEach(function(attr) {\n\t\t\t\tvar m = attr.name.match(cmAttr);\n\t\t\t\tif (m) {\n\t\t\t\t\teditorOptions[m[1]] = attr.value;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\t// normalize line endings\n\tinitialValue = initialValue.replace(/\\r?\\n/g, '\\n');\n\n\t// locate initial caret position from | symbol\n\tvar initialPos = initialValue.indexOf('|');\n\n\tif (targetIsTextarea) {\n\t\ttarget.value = editorOptions.value = initialValue = initialValue.replace(/\\|/g, '');\n\t}\n\n\t// create editor instance if needed\n\tvar editor = targetIsTextarea ? CodeMirrorEditor.fromTextArea(target, editorOptions) : target;\n\n\tif (!targetIsTextarea) {\n\t\teditor.setValue(initialValue.replace(/\\|/g, ''))\n\t}\n\n\tif (initialPos !== -1) {\n\t\teditor.setCursor(editor.posFromIndex(initialPos));\n\t}\n\n\t// save initial data so we can revert to it later\n\teditor.__initial = {\n\t\tcontent: initialValue,\n\t\tpos: editor.getCursor(true)\n\t};\n\t\n\tvar wrapper = editor.getWrapperElement();\n\t\n\t// adjust height, if required\n\tif (editorOptions.height) {\n\t\twrapper.style.height = editorOptions.height + 'px';\n\t}\n\t\n\twrapper.className += ' CodeMirror-movie';\n\t\n\tvar sc = new Scenario(movieOptions.scenario, editor);\n\treturn sc;\n};\n\n/**\n * Prettyfies key bindings references in given string: formats it according\n * to current user’s platform. The key binding should be defined inside \n * parentheses, e.g. <code>(ctrl-alt-up)</code>\n * @param {String} str\n * @param {Object} options Transform options\n * @returns {String}\n */\nfunction prettifyKeyBindings(str, options) {\n\toptions = options || {};\n\tvar reKey = /ctrl|alt|shift|cmd/i;\n\tvar map = mac ? macCharMap : pcCharMap;\n\treturn str.replace(/\\((.+?)\\)/g, function(m, kb) {\n\t\tif (reKey.test(kb)) {\n\t\t\tvar parts = kb.toLowerCase()\n\t\t\t\t.split(/[\\-\\+]/)\n\t\t\t\t.map(key => map[key.toLowerCase()] || key.toUpperCase());\n\t\t\t\n\t\t\tm = parts.join(mac ? '' : '+');\n\t\t\tif (!options.stripParentheses) {\n\t\t\t\tm = '(' + m + ')';\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn m;\n\t});\n}\n\nfunction readLines(text) {\n\t// IE fails to split string by regexp, \n\t// need to normalize newlines first\n\tvar nl = '\\n';\n\tvar lines = (text || '')\n\t\t.replace(/\\r\\n/g, nl)\n\t\t.replace(/\\n\\r/g, nl)\n\t\t.replace(/\\r/g, nl)\n\t\t.split(nl);\n\n\treturn lines.filter(Boolean);\n}\n\nfunction unescape(text) {\n\tvar replacements = {\n\t\t'&lt;':  '<',\n\t\t'&gt;':  '>',\n\t\t'&amp;': '&'\n\t};\n\n\treturn text.replace(/&(lt|gt|amp);/g, function(str, p1) {\n\t\treturn replacements[str] || str;\n\t});\n}\n\n/**\n * Extracts initial content and scenario from given string\n * @param {String} text\n * @param {Object} options\n */\nfunction parseMovieDefinition(text, options={}) {\n\toptions = extend({}, defaultOptions, options || {});\n\tvar parts = text.split(options.sectionSeparator);\n\n\t// parse scenario\n\tvar reDef = /^(\\w+)\\s*:\\s*(.+)$/;\n\tvar scenario = [];\n\tvar editorOptions = {};\n\n\tvar skipComment = line => line.charAt(0) !== '#';\n\n\t// read movie definition\n\treadLines(parts[1]).filter(skipComment).forEach(function(line) {\n\t\t// do we have outline definition here?\n\t\tline = line.replace(options.outlineSeparator, '');\n\n\t\tvar sd = line.match(reDef);\n\t\tif (!sd) {\n\t\t\treturn scenario.push(line.trim());\n\t\t}\n\t\t\t\n\n\t\tif (sd[2].charAt(0) === '{') {\n\t\t\tvar obj = {};\n\t\t\tobj[sd[1]] = parseJSON(unescape(sd[2]));\n\t\t\treturn scenario.push(obj);\n\t\t}\n\n\t\tscenario.push(sd[1] + ':' + unescape(sd[2]));\n\t});\n\n\t// read editor options\n\tif (parts[2]) {\n\t\treadLines(parts[2]).filter(skipComment).forEach(function(line) {\n\t\t\tvar sd = line.match(reDef);\n\t\t\tif (sd) {\n\t\t\t\teditorOptions[sd[1]] = sd[2];\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tvalue: unescape(parts[0].trim()),\n\t\tscenario: scenario,\n\t\teditorOptions: editorOptions\n\t};\n}\n\nfunction setupCodeMirror(CodeMirrorEditor) {\n\tif ('preventCursorMovement' in CodeMirrorEditor.defaults) {\n\t\treturn;\n\t}\n\n\tCodeMirrorEditor.defineOption('preventCursorMovement', false, cm => {\n\t\tvar handler = (cm, event) => cm.getOption('readOnly') && event.preventDefault();\n\t\tcm.on('keydown', handler);\n\t\tcm.on('mousedown', handler);\n\t});\n}\n","import commonActions from './actions';\nimport {actions as prompt} from './widgets/prompt';\nimport {actions as tooltip} from './widgets/tooltip';\nimport {extend} from './utils';\n\nvar actionsDefinition = extend({}, commonActions, prompt, tooltip);\n\nvar STATE_IDLE  = 'idle';\nvar STATE_PLAY  = 'play';\nvar STATE_PAUSE = 'pause';\n\n// Regular expression used to split event strings\nvar eventSplitter = /\\s+/;\n\nexport var defaultOptions = {\n\tbeforeDelay: 1000,\n\tafterDelay: 1000\n};\n\n/**\n * @param {Object} actions Actions scenario\n * @param {Object} data Initial content (<code>String</code>) or editor\n * instance (<code>CodeMirror</code>)\n */\nexport default class Scenario {\n\tconstructor(actions, data) {\n\t\tthis._actions = actions;\n\t\tthis._editor = null;\n\t\tthis._state = STATE_IDLE;\n\t\tthis._timerQueue = [];\n\t\t\n\t\tif (data && 'getValue' in data) {\n\t\t\tthis._editor = data;\n\t\t}\n\t\t\n\t\tvar ed = this._editor;\n\t\tif (ed && !ed.__initial) {\n\t\t\ted.__initial = {\n\t\t\t\tcontent: ed.getValue(),\n\t\t\t\tpos: ed.getCursor(true)\n\t\t\t};\n\t\t}\n\t}\n\n\t_setup(editor) {\n\t\tif (!editor && this._editor) {\n\t\t\teditor = this._editor;\n\t\t}\n\t\t\n\t\teditor.execCommand('revert');\n\t\treturn editor;\n\t}\n\t\n\t/**\n\t * Play current scenario\n\t * @param {CodeMirror} editor Editor instance where on which scenario \n\t * should be played\n\t * @memberOf Scenario\n\t */\n\tplay(editor) {\n\t\tif (this._state === STATE_PLAY) {\n\t\t\t// already playing\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this._state === STATE_PAUSE) {\n\t\t\t// revert from paused state\n\t\t\teditor = editor || this._editor;\n\t\t\teditor.focus();\n\t\t\tvar timerObj = null;\n\t\t\twhile (timerObj = this._timerQueue.shift()) {\n\t\t\t\trequestTimer(timerObj.fn, timerObj.delay);\n\t\t\t}\n\t\t\t\n\t\t\tthis._state = STATE_PLAY;\n\t\t\tthis.trigger('resume');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis._editor = editor = this._setup(editor);\n\t\teditor.focus();\n\t\t\n\t\tvar timer = this.requestTimer.bind(this);\n\n\t\tvar gotoAction = actionIx => {\n\t\t\tif (actionIx >= this._actions.length) {\n\t\t\t\treturn timer(() => {\n\t\t\t\t\tthis.stop();\n\t\t\t\t}, defaultOptions.afterDelay);\n\t\t\t}\n\n\t\t\tthis.trigger('action', actionIx);\n\n\t\t\tvar action = parseActionCall(this._actions[actionIx]);\n\n\t\t\tlet prev = null\n\t\t\tfor (let i = actionIx - 1; i >= 0; i--) {\n\t\t\t\tconst oneAction = parseActionCall(this._actions[i])\n\t\t\t\tif (oneAction.name === 'tooltip' || oneAction.name === 'showTooltip') {\n\t\t\t\t\tprev = () => gotoAction(actionIx - 1)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet next = null\n\t\t\tfor (let i = actionIx + 1; i < this._actions.length; i++) {\n\t\t\t\tconst oneAction = parseActionCall(this._actions[i])\n\t\t\t\tif (oneAction.name === 'tooltip' || oneAction.name === 'showTooltip') {\n\t\t\t\t\tnext = () => gotoAction(actionIx + 1)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (action.name in actionsDefinition) {\n\t\t\t\tactionsDefinition[action.name]({\n\t\t\t\t\toptions: action.options,\n\t\t\t\t\teditor,\n\t\t\t\t\tnext,\n\t\t\t\t\tstop: () => this.stop(),\n\t\t\t\t\tprev,\n\t\t\t\t\ttimer\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthrow new Error('No such action: ' + action.name);\n\t\t\t}\n\t\t};\n\n\t\tthis._state = STATE_PLAY;\n\t\tthis._editor.setOption('readOnly', true);\n\t\tthis.trigger('play');\n\t\ttimer(() => gotoAction(0), defaultOptions.beforeDelay);\n\t}\n\t\n\t/**\n\t * Pause current scenario playback. It can be restored with \n\t * <code>play()</code> method call \n\t */\n\tpause() {\n\t\tthis._state = STATE_PAUSE;\n\t\tthis.trigger('pause');\n\t}\n\t\n\t/**\n\t * Stops playback of current scenario\n\t */\n\tstop() {\n\t\tif (this._state !== STATE_IDLE) {\n\t\t\tthis._state = STATE_IDLE;\n\t\t\tthis._timerQueue.length = 0;\n\t\t\tthis._editor.setOption('readOnly', false);\n\t\t\tthis.trigger('stop');\n\t\t}\n\t}\n\t\n\t/**\n\t * Returns current playback state\n\t * @return {String}\n\t */\n\tget state() {\n\t\treturn this._state;\n\t}\n\t\n\t/**\n\t * Toggle playback of movie scenario\n\t */\n\ttoggle() {\n\t\tif (this._state === STATE_PLAY) {\n\t\t\tthis.pause();\n\t\t} else {\n\t\t\tthis.play();\n\t\t}\n\t}\n\t\n\trequestTimer(fn, delay) {\n\t\tif (this._state !== STATE_PLAY) {\n\t\t\t// save function call into a queue till next 'play()' call\n\t\t\tthis._timerQueue.push({\n\t\t\t\tfn: fn,\n\t\t\t\tdelay: delay\n\t\t\t});\n\t\t} else {\n\t\t\treturn requestTimer(fn, delay);\n\t\t}\n\t}\n\t\n\t// borrowed from Backbone\n\t/**\n\t * Bind one or more space separated events, `events`, to a `callback`\n\t * function. Passing `\"all\"` will bind the callback to all events fired.\n\t * @param {String} events\n\t * @param {Function} callback\n\t * @param {Object} context\n\t * @memberOf eventDispatcher\n\t */\n\ton(events, callback, context) {\n\t\tvar calls, event, node, tail, list;\n\t\tif (!callback) {\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tevents = events.split(eventSplitter);\n\t\tcalls = this._callbacks || (this._callbacks = {});\n\n\t\t// Create an immutable callback list, allowing traversal during\n\t\t// modification.  The tail is an empty object that will always be used\n\t\t// as the next node.\n\t\twhile (event = events.shift()) {\n\t\t\tlist = calls[event];\n\t\t\tnode = list ? list.tail : {};\n\t\t\tnode.next = tail = {};\n\t\t\tnode.context = context;\n\t\t\tnode.callback = callback;\n\t\t\tcalls[event] = {\n\t\t\t\ttail : tail,\n\t\t\t\tnext : list ? list.next : node\n\t\t\t};\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Remove one or many callbacks. If `context` is null, removes all\n\t * callbacks with that function. If `callback` is null, removes all\n\t * callbacks for the event. If `events` is null, removes all bound\n\t * callbacks for all events.\n\t * @param {String} events\n\t * @param {Function} callback\n\t * @param {Object} context\n\t */\n\toff(events, callback, context) {\n\t\tvar event, calls, node, tail, cb, ctx;\n\n\t\t// No events, or removing *all* events.\n\t\tif (!(calls = this._callbacks)) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (!(events || callback || context)) {\n\t\t\tdelete this._callbacks;\n\t\t\treturn this;\n\t\t}\n\n\t\t// Loop through the listed events and contexts, splicing them out of the\n\t\t// linked list of callbacks if appropriate.\n\t\tevents = events ? events.split(eventSplitter) : Object.keys(calls);\n\t\twhile (event = events.shift()) {\n\t\t\tnode = calls[event];\n\t\t\tdelete calls[event];\n\t\t\tif (!node || !(callback || context)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\t// Create a new list, omitting the indicated callbacks.\n\t\t\ttail = node.tail;\n\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\tcb = node.callback;\n\t\t\t\tctx = node.context;\n\t\t\t\tif ((callback && cb !== callback) || (context && ctx !== context)) {\n\t\t\t\t\tthis.on(event, cb, ctx);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Trigger one or many events, firing all bound callbacks. Callbacks are\n\t * passed the same arguments as `trigger` is, apart from the event name\n\t * (unless you're listening on `\"all\"`, which will cause your callback\n\t * to receive the true name of the event as the first argument).\n\t * @param {String} events\n\t */\n\ttrigger(events, ...rest) {\n\t\tvar event, node, calls, tail, args, all;\n\t\tif (!(calls = this._callbacks)) {\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tall = calls.all;\n\t\tevents = events.split(eventSplitter);\n\n\t\t// For each event, walk through the linked list of callbacks twice,\n\t\t// first to trigger the event, then to trigger any `\"all\"` callbacks.\n\t\twhile (event = events.shift()) {\n\t\t\tif (node = calls[event]) {\n\t\t\t\ttail = node.tail;\n\t\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\t\tnode.callback.apply(node.context || this, rest);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (node = all) {\n\t\t\t\ttail = node.tail;\n\t\t\t\targs = [ event ].concat(rest);\n\t\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\t\tnode.callback.apply(node.context || this, args);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n};\n\n/**\n * Parses action call from string\n * @param {String} data\n * @returns {Object}\n */\nfunction parseActionCall(data) {\n\tif (typeof data === 'string') {\n\t\tvar parts = data.split(':');\n\t\treturn {\n\t\t\tname: parts.shift(),\n\t\t\toptions: parts.join(':')\n\t\t};\n\t} else {\n\t\tvar name = Object.keys(data)[0];\n\t\treturn {\n\t\t\tname: name,\n\t\t\toptions: data[name]\n\t\t};\n\t}\n}\n\nfunction requestTimer(fn, delay) {\n\tif (!delay) {\n\t\tfn();\n\t} else {\n\t\treturn setTimeout(fn, delay);\n\t}\n}","var propCache = {};\n\n// detect CSS 3D Transforms for smoother animations \nexport var has3d = (function() {\n\tvar el = document.createElement('div');\n\tvar cssTransform = prefixed('transform');\n\tif (cssTransform) {\n\t\tel.style[cssTransform] = 'translateZ(0)';\n\t\treturn (/translatez/i).test(el.style[cssTransform]); \n\t}\n\t\n\treturn false;\n})();\n\nexport function extend(obj, ...args) {\n\targs.forEach(a => {\n\t\tif (typeof a === 'object') {\n\t\t\tObject.keys(a).forEach(key => obj[key] = a[key]);\n\t\t}\n\t});\n\treturn obj;\n}\n\nexport function toArray(obj, ix=0) {\n\treturn Array.prototype.slice.call(obj, ix);\n}\n\n/**\n * Returns prefixed (if required) CSS property name\n * @param  {String} prop\n * @return {String}\n */\nexport function prefixed(prop) {\n\tif (prop in propCache) {\n\t\treturn propCache[prop];\n\t}\n\n\tvar el = document.createElement('div');\n\tvar style = el.style;\n\n\tvar prefixes = ['o', 'ms', 'moz', 'webkit'];\n\tvar props = [prop];\n\tvar capitalize = function(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.substr(1);\n\t};\n\n\tprop = prop.replace(/\\-([a-z])/g, function(str, ch) {\n\t\treturn ch.toUpperCase();\n\t});\n\n\tvar capProp = capitalize(prop);\n\tprefixes.forEach(function(prefix) {\n\t\tprops.push(prefix + capProp, capitalize(prefix) + capProp);\n\t});\n\n\tfor (var i = 0, il = props.length; i < il; i++) {\n\t\tif (props[i] in style) {\n\t\t\treturn propCache[prop] = props[i];\n\t\t}\n\t}\n\n\treturn propCache[prop] = null;\n}\n\nexport function posObj(obj) {\n\treturn {\n\t\tline: obj.line,\n\t\tch: obj.ch\n\t};\n}\n\nexport function getCursor(editor, start='from') {\n\treturn posObj(editor.getCursor(start));\n}\n\n/**\n * Helper function that produces <code>{line, ch}</code> object from\n * passed argument\n * @param {Object} pos\n * @param {CodeMirror} editor\n * @returns {Object}\n */\nexport function makePos(pos, editor) {\n\tif (pos === 'caret') {\n\t\treturn getCursor(editor);\n\t}\n\n\tif (typeof pos === 'string') {\n\t\tif (~pos.indexOf(':')) {\n\t\t\tlet parts = pos.split(':');\n\t\t\treturn {\n\t\t\t\tline: +parts[0],\n\t\t\t\tch: +parts[1]\n\t\t\t};\n\t\t}\n\t\t\n\t\tpos = +pos;\n\t}\n\t\n\tif (typeof pos === 'number') {\n\t\treturn posObj(editor.posFromIndex(pos));\n\t}\n\t\n\treturn posObj(pos);\n}\n\nexport function template(tmpl, data) {\n\tvar fn = data => tmpl.replace(/<%([-=])?\\s*([\\w\\-]+)\\s*%>/g, (str, op, key) => data[key.trim()]);\n\treturn data ? fn(data) : fn;\n}\n\nexport function find(arr, iter) {\n\tvar found;\n\tarr.some((item, i, arr) => {\n\t\tif (iter(item, i, arr)) {\n\t\t\treturn found = item;\n\t\t}\n\t});\n\treturn found;\n}\n\n/**\n * Relaxed JSON parser.\n * @param {String} text\n * @returns {Object} \n */\nexport function parseJSON(text) {\n\ttry {\n\t\treturn (new Function('return ' + text))();\n\t} catch(e) {\n\t\treturn {};\n\t}\n}","var global = window;\nvar time = Date.now \n\t? function() {return Date.now();}\n\t: function() {return +new Date;};\n\nvar indexOf = 'indexOf' in Array.prototype\n\t? function(array, value) {return array.indexOf(value);}\n\t: function(array, value) {\n\t\tfor (var i = 0, il = array.length; i < il; i++) {\n\t\t\tif (array[i] === value) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n\nfunction extend(obj) {\n\tfor (var i = 1, il = arguments.length, source; i < il; i++) {\n\t\tsource = arguments[i];\n\t\tif (source) {\n\t\t\tfor (var prop in source) {\n\t\t\t\tobj[prop] = source[prop];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn obj;\n}\n\n/**\n * requestAnimationFrame polyfill by Erik Möller\n * fixes from Paul Irish and Tino Zijdel\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n */\n(function() {\n\tvar lastTime = 0;\n\tvar vendors = [ 'ms', 'moz', 'webkit', 'o' ];\n\tfor (var x = 0; x < vendors.length && !global.requestAnimationFrame; ++x) {\n\t\tglobal.requestAnimationFrame = global[vendors[x] + 'RequestAnimationFrame'];\n\t\tglobal.cancelAnimationFrame = global[vendors[x] + 'CancelAnimationFrame']\n\t\t\t\t|| global[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n\t\n\tif (!global.requestAnimationFrame)\n\t\tglobal.requestAnimationFrame = function(callback, element) {\n\t\t\tvar currTime = time();\n\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\tvar id = global.setTimeout(function() {\n\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t}, timeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\n\tif (!global.cancelAnimationFrame)\n\t\tglobal.cancelAnimationFrame = function(id) {\n\t\t\tclearTimeout(id);\n\t\t};\n}());\n\n\nvar dummyFn = function() {};\nvar anims = [];\nvar idCounter = 0;\n\nvar defaults = {\n\tduration: 500, // ms\n\tdelay: 0,\n\teasing: 'linear',\n\tstart: dummyFn,\n\tstep: dummyFn,\n\tcomplete: dummyFn,\n\tautostart: true,\n\treverse: false\n};\n\nexport var easings = {\n\tlinear: function(t, b, c, d) {\n\t\treturn c * t / d + b;\n\t},\n\tinQuad: function(t, b, c, d) {\n\t\treturn c*(t/=d)*t + b;\n\t},\n\toutQuad: function(t, b, c, d) {\n\t\treturn -c *(t/=d)*(t-2) + b;\n\t},\n\tinOutQuad: function(t, b, c, d) {\n\t\tif((t/=d/2) < 1) return c/2*t*t + b;\n\t\treturn -c/2 *((--t)*(t-2) - 1) + b;\n\t},\n\tinCubic: function(t, b, c, d) {\n\t\treturn c*(t/=d)*t*t + b;\n\t},\n\toutCubic: function(t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t + 1) + b;\n\t},\n\tinOutCubic: function(t, b, c, d) {\n\t\tif((t/=d/2) < 1) return c/2*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t + 2) + b;\n\t},\n\tinExpo: function(t, b, c, d) {\n\t\treturn(t==0) ? b : c * Math.pow(2, 10 *(t/d - 1)) + b - c * 0.001;\n\t},\n\toutExpo: function(t, b, c, d) {\n\t\treturn(t==d) ? b+c : c * 1.001 *(-Math.pow(2, -10 * t/d) + 1) + b;\n\t},\n\tinOutExpo: function(t, b, c, d) {\n\t\tif(t==0) return b;\n\t\tif(t==d) return b+c;\n\t\tif((t/=d/2) < 1) return c/2 * Math.pow(2, 10 *(t - 1)) + b - c * 0.0005;\n\t\treturn c/2 * 1.0005 *(-Math.pow(2, -10 * --t) + 2) + b;\n\t},\n\tinElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\treturn -(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n\t},\n\toutElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\treturn(a*Math.pow(2,-10*t) * Math.sin((t*d-s)*(2*Math.PI)/p ) + c + b);\n\t},\n\tinOutElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b; \n\t\tif((t/=d/2)==2) return b+c;\n\t\tif(!p) p=d*(.3*1.5);\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; }       else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\tif(t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n\t\treturn a*Math.pow(2,-10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n\t},\n\tinBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\treturn c*(t/=d)*t*((s+1)*t - s) + b;\n\t},\n\toutBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\treturn c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n\t},\n\tinOutBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\tif((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n\t\treturn c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n\t},\n\tinBounce: function(t, b, c, d) {\n\t\treturn c - this.outBounce(t, d-t, 0, c, d) + b;\n\t},\n\toutBounce: function(t, b, c, d) {\n\t\tif((t/=d) <(1/2.75)) {\n\t\t\treturn c*(7.5625*t*t) + b;\n\t\t} else if(t <(2/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n\t\t} else if(t <(2.5/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n\t\t} else {\n\t\t\treturn c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n\t\t}\n\t},\n\tinOutBounce: function(t, b, c, d) {\n\t\tif(t < d/2) return this.inBounce(t*2, 0, c, d) * .5 + b;\n\t\treturn this.outBounce(t*2-d, 0, c, d) * .5 + c*.5 + b;\n\t},\n\toutHard: function(t, b, c, d) {\n\t\tvar ts = (t/=d)*t;\n\t\tvar tc = ts*t;\n\t\treturn b + c*(1.75*tc*ts + -7.4475*ts*ts + 12.995*tc + -11.595*ts + 5.2975*t);\n\t}\n};\n\nfunction mainLoop() {\n\tif (!anims.length) {\n\t\t// no animations left, stop polling\n\t\treturn;\n\t}\n\t\n\tvar now = time();\n\tvar filtered = [], tween, opt;\n\n\t// do not use Array.filter() of _.filter() function\n\t// since tween’s callbacks can add new animations\n\t// in runtime. In this case, filter function will loose\n\t// newly created animation\n\tfor (var i = 0; i < anims.length; i++) {\n\t\ttween = anims[i];\n\n\t\tif (!tween.animating) {\n\t\t\tcontinue;\n\t\t}\n\n\t\topt = tween.options;\n\n\t\tif (tween.startTime > now) {\n\t\t\tfiltered.push(tween);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (tween.infinite) {\n\t\t\t// opt.step.call(tween, 0);\n\t\t\topt.step(0, tween);\n\t\t\tfiltered.push(tween);\n\t\t} else if (tween.pos === 1 || tween.endTime <= now) {\n\t\t\ttween.pos = 1;\n\t\t\t// opt.step.call(tween, opt.reverse ? 0 : 1);\n\t\t\topt.step(opt.reverse ? 0 : 1, tween);\n\t\t\ttween.stop();\n\t\t} else {\n\t\t\ttween.pos = opt.easing(now - tween.startTime, 0, 1, opt.duration);\n\t\t\t// opt.step.call(tween, opt.reverse ? 1 - tween.pos : tween.pos);\n\t\t\topt.step(opt.reverse ? 1 - tween.pos : tween.pos, tween);\n\t\t\tfiltered.push(tween);\n\t\t}\t\t\t\n\t}\n\n\tanims = filtered;\n\n\tif (anims.length) {\n\t\trequestAnimationFrame(mainLoop);\n\t}\n}\n\nfunction addToQueue(tween) {\n\tif (indexOf(anims, tween) == -1) {\n\t\tanims.push(tween);\n\t\tif (anims.length == 1) {\n\t\t\tmainLoop();\n\t\t}\n\t}\n}\n\nexport class Tween {\n\tconstructor(options) {\n\t\tthis.options = extend({}, defaults, options);\n\t\n\t\tvar e = this.options.easing;\n\t\tif (typeof e == 'string') {\n\t\t\tif (!easings[e])\n\t\t\t\tthrow 'Unknown \"' + e + '\" easing function';\n\t\t\tthis.options.easing = easings[e];\n\t\t}\n\t\t\n\t\tif (typeof this.options.easing != 'function')\n\t\t\tthrow 'Easing should be a function';\n\n\t\tthis._id = 'tw' + (idCounter++);\n\t\t\n\t\tif (this.options.autostart) {\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\t/**\n\t * Start animation from the beginning\n\t */\n\tstart() {\n\t\tif (!this.animating) {\n\t\t\tthis.pos = 0;\n\t\t\tthis.startTime = time() + (this.options.delay || 0);\n\t\t\tthis.infinite = this.options.duration === 'infinite';\n\t\t\tthis.endTime = this.infinite ? 0 : this.startTime + this.options.duration;\n\t\t\tthis.animating = true;\n\t\t\tthis.options.start(this);\n\t\t\taddToQueue(this);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Stop animation\n\t */\n\tstop() {\n\t\tif (this.animating) {\n\t\t\tthis.animating = false;\n\t\t\tif (this.options.complete) {\n\t\t\t\tthis.options.complete(this);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\ttoggle() {\n\t\tif (this.animating) {\n\t\t\tthis.stop();\n\t\t} else {\n\t\t\tthis.start();\n\t\t}\n\t}\n}\n\nexport default function tween(options) {\n\treturn new Tween(options);\n}\n\n/**\n * Get or set default value\n * @param  {String} name\n * @param  {Object} value\n * @return {Object}\n */\nexport function defaults(name, value) {\n\tif (typeof value != 'undefined') {\n\t\tdefaults[name] = value;\n\t}\n\n\treturn defaults[name];\n}\n\n/**\n * Returns all active animation objects.\n * For debugging mostly\n * @return {Array}\n */\nexport function _all() {\n\treturn anims;\n}\n\nexport function stop() {\n\tfor (var i = 0; i < anims.length; i++) {\n\t\tanims[i].stop();\n\t}\n\n\tanims.length = 0;\n};","/**\n * Shows fake prompt dialog with interactive value typing\n */\nimport tween from '../vendor/tween';\nimport {extend, template, has3d, prefixed} from '../utils';\nimport * as dom from '../dom';\n\nvar dialogInstance = null;\nvar bgInstance = null;\nvar lastTween = null;\n\nexport var actions = {\n\tprompt({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\ttitle: 'Enter something',\n\t\t\tdelay: 80,        // delay between character typing\n\t\t\ttypeDelay: 1000,  // time to wait before typing text\n\t\t\thideDelay: 2000   // time to wait before hiding prompt dialog\n\t\t}, wrap('text', options));\n\t\t\n\t\tshow(options.title, editor.getWrapperElement(), function(dialog) {\n\t\t\ttimer(function() {\n\t\t\t\ttypeText(dialog.querySelector('.CodeMirror-prompt__input'), options, timer, function() {\n\t\t\t\t\ttimer(function() {\n\t\t\t\t\t\thide(next);\n\t\t\t\t\t}, options.hideDelay);\n\t\t\t\t});\n\t\t\t}, options.typeDelay);\n\t\t});\n\t}\n};\n\nexport function show(text, target, callback) {\n\thide();\n\tdialogInstance = dom.toDOM(`<div class=\"CodeMirror-prompt\">\n\t\t<div class=\"CodeMirror-prompt__title\">${text}</div>\n\t\t<input type=\"text\" name=\"prompt\" class=\"CodeMirror-prompt__input\" readonly=\"readonly\" />\n\t\t</div>`);\n\tbgInstance = dom.toDOM('<div class=\"CodeMirror-prompt__shade\"></div>');\n\t\n\ttarget.appendChild(dialogInstance);\n\ttarget.appendChild(bgInstance);\n\t\n\tanimateShow(dialogInstance, bgInstance, {complete: callback});\n}\n\nexport function hide(callback) {\n\tif (dialogInstance) {\n\t\tif (lastTween) {\n\t\t\tlastTween.stop();\n\t\t\tlastTween = null;\n\t\t}\n\t\tanimateHide(dialogInstance, bgInstance, {complete: callback});\n\t\tdialogInstance = bgInstance = null;\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @param {Element} dialog\n * @param {Element} bg\n * @param {Object} options \n */\nfunction animateShow(dialog, bg, options={}) {\n\tvar cssTransform = prefixed('transform');\n\tvar dialogStyle = dialog.style;\n\tvar bgStyle = bg.style;\n\tvar height = dialog.offsetHeight;\n\tvar tmpl = template(has3d ? 'translate3d(0, <%= pos %>, 0)' : 'translate(0, <%= pos %>)');\n\n\tbgStyle.opacity = 0;\n\ttween({\n\t\tduration: 200,\n\t\tstep(pos) {\n\t\t\tbgStyle.opacity = pos;\n\t\t}\n\t});\n\t\n\tdialogStyle[cssTransform] = tmpl({pos: -height});\n\t\n\treturn lastTween = tween({\n\t\tduration: 400,\n\t\teasing: 'outCubic',\n\t\tstep(pos) {\n\t\t\tdialogStyle[cssTransform] = tmpl({pos: (-height * (1 - pos)) + 'px'});\n\t\t},\n\t\tcomplete: function() {\n\t\t\tlastTween = null;\n\t\t\toptions.complete && options.complete(dialog, bg);\n\t\t}\n\t});\n}\n\n/**\n * @param {Element} dialog\n * @param {Element} bg\n * @param {Object} options\n */\nfunction animateHide(dialog, bg, options) {\n\tvar dialogStyle = dialog.style;\n\tvar bgStyle = bg.style;\n\tvar height = dialog.offsetHeight;\n\tvar cssTransform = prefixed('transform');\n\tvar tmpl = template(has3d ? 'translate3d(0, <%= pos %>, 0)' : 'translate(0, <%= pos %>)');\n\n\treturn tween({\n\t\tduration: 200,\n\t\tstep(pos) {\n\t\t\tdialogStyle[cssTransform] = tmpl({pos: (-height * pos) + 'px'});\n\t\t\tbgStyle.opacity = 1 - pos;\n\t\t},\n\t\tcomplete() {\n\t\t\tdom.remove([dialog, bg]);\n\t\t\toptions.complete && options.complete(dialog, bg);\n\t\t}\n\t});\n}\n\nfunction typeText(target, options, timer, next) {\n\tvar chars = options.text.split('');\n\ttimer(function perform() {\n\t\ttarget.value += chars.shift();\n\t\tif (chars.length) {\n\t\t\ttimer(perform, options.delay);\n\t\t} else {\n\t\t\tnext();\n\t\t}\n\t}, options.delay);\n}\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}","/**\n * Extension that allows authors to display context tooltips bound to specific\n * positions\n */\nimport tween from '../vendor/tween';\nimport {extend, prefixed, makePos, has3d} from '../utils';\nimport * as dom from '../dom';\n\nvar instance = null;\nvar lastTween = null;\n\nexport var alignDefaults = {\n\t/** CSS selector for getting popup tail */\n\ttailClass: 'CodeMirror-tooltip__tail',\n\t\n\t/** Class name for switching tail/popup position relative to target point */\n\tbelowClass: 'CodeMirror-tooltip_below',\n\t\n\t/** Min distance between popup and viewport */\n\tpopupMargin: 5,\n\t\n\t/** Min distance between popup left/right edge and its tail */\n\ttailMargin: 11\n};\n\nexport var actions = {\n\t/**\n\t * Shows tooltip with given text, wait for `options.wait`\n\t * milliseconds then hides tooltip\n\t */\n\ttooltip({options, editor, prev, next, stop, timer}) {\n\t\toptions = extend({\n\t\t\twait: 4000,   // time to wait before hiding tooltip\n\t\t\tpos: 'caret'  // position where tooltip should point to\n\t\t}, wrap('text', options));\n\t\t\n\t\tvar pos = resolvePosition(options.pos, editor);\n\t\tshow({text: options.text, prev, next}, pos, function() {\n\t\t\t// timer(function() {\n\t\t\t// \thide(() => timer(next));\n\t\t\t// }, options.wait);\n\n\t\t\tif (prev) {\n\t\t\t\tinstance.querySelector('.CodeMirror-tooltip__prev').addEventListener('click', () => {\n\t\t\t\t\thide(prev)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (next) {\n\t\t\t\tinstance.querySelector('.CodeMirror-tooltip__next').addEventListener('click', () => {\n\t\t\t\t\thide(next)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tinstance.querySelector('.CodeMirror-tooltip__finish').addEventListener('click', () => {\n\t\t\t\t\thide(stop)\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Shows tooltip with specified text. This tooltip should be explicitly \n\t * hidden with `hideTooltip` action\n\t */\n\tshowTooltip({options, editor, prev, next, timer}) {\n\t\toptions = extend({\n\t\t\tpos: 'caret'  // position where tooltip should point to\n\t\t}, wrap('text', options));\n\t\t\n\t\tshow({text: options.text, prev, next}, resolvePosition(options.pos, editor));\n\t\tnext();\n\t},\n\n\t/**\n\t * Hides tooltip, previously shown by 'showTooltip' action\n\t */\n\thideTooltip({options, editor, next, timer}) {\n\t\thide(next);\n\t}\n};\n\nexport function show({text, prev, next}, pos, callback) {\n\thide();\n\t\n\tlet html = `<div class=\"CodeMirror-tooltip\">\n\t\t<div class=\"CodeMirror-tooltip__content\">${text}</div>\n\t\t<div class=\"CodeMirror-tooltip__tail\"></div>`\n\t\n\tif (prev) {\n\t\thtml += '<button class=\"CodeMirror-tooltip__prev\">backward</button>'\n\t}\n\n\tif (next) {\n\t\thtml += '<button class=\"CodeMirror-tooltip__next\">forward</button>'\n\t} else {\n\t\thtml += '<button class=\"CodeMirror-tooltip__finish\">finish</button>'\n\t}\n\n\thtml += '</div>'\n\n\tinstance = dom.toDOM(html)\n\n\tdom.css(instance, prefixed('transform'), 'scale(0)');\n\tdocument.body.appendChild(instance);\n\n\talignPopupWithTail(instance, {position: pos});\n\tanimateShow(instance, {complete: callback});\n}\n\nexport function hide(callback) {\n\tif (instance) {\n\t\tif (lastTween) {\n\t\t\tlastTween.stop();\n\t\t\tlastTween = null;\n\t\t}\n\t\tanimateHide(instance, {complete: callback});\n\t\tinstance = null;\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * Helper function that finds optimal position of tooltip popup on page\n * and aligns popup tail with this position\n * @param {Element} popup\n * @param {Object} options\n */\nfunction alignPopupWithTail(popup, options={}) {\n\toptions = extend({}, alignDefaults, options);\n\t\n\tdom.css(popup, {\n\t\tleft: 0,\n\t\ttop: 0\n\t});\n\t\n\tvar tail = popup.querySelector('.' + options.tailClass);\n\t\n\tvar resultX = 0, resultY = 0;\n\tvar pos = options.position;\n\tvar vp = dom.viewportRect();\n\t\n\tvar width = popup.offsetWidth;\n\tvar height = popup.offsetHeight;\n\t\n\tvar isTop;\n\t\t\n\t// calculate horizontal position\n\tresultX = Math.min(vp.width - width - options.popupMargin, Math.max(options.popupMargin, pos.x - vp.left - width / 2));\n\t\n\t// calculate vertical position\n\tif (height + tail.offsetHeight + options.popupMargin + vp.top < pos.y) {\n\t\t// place above target position\n\t\tresultY = Math.max(0, pos.y - height - tail.offsetHeight);\n\t\tisTop = true;\n\t} else {\n\t\t// place below target position \n\t\tresultY = pos.y + tail.offsetHeight;\n\t\tisTop = false;\n\t}\n\t\n\t// calculate tail position\n\tvar tailMinLeft = options.tailMargin;\n\tvar tailMaxLeft = width - options.tailMargin;\n\ttail.style.left = Math.min(tailMaxLeft, Math.max(tailMinLeft, pos.x - resultX - vp.left)) + 'px';\n\t\n\tdom.css(popup, {\n\t\tleft: resultX,\n\t\ttop: resultY\n\t});\n\t\n\tpopup.classList.toggle(options.belowClass, !isTop);\n}\n\n/**\n * @param {jQuery} elem\n * @param {Object} options \n */\nfunction animateShow(elem, options={}) {\n\toptions = extend({}, alignDefaults, options);\n\tvar cssOrigin = prefixed('transform-origin');\n\tvar cssTransform = prefixed('transform');\n\tvar style = elem.style;\n\n\tvar tail = elem.querySelector('.' + options.tailClass);\n\tvar xOrigin = dom.css(tail, 'left');\n\tvar yOrigin = tail.offsetTop;\n\tif (elem.classList.contains(options.belowClass)) {\n\t\tyOrigin -= tail.offsetHeight;\n\t}\n\t\n\tyOrigin += 'px';\n\n\tstyle[cssOrigin] = xOrigin + ' ' + yOrigin;\n\tvar prefix = has3d ? 'translateZ(0) ' : '';\n\t\n\treturn lastTween = tween({\n\t\tduration: 800,\n\t\teasing: 'outElastic',\n\t\tstep(pos) {\n\t\t\tstyle[cssTransform] = prefix + 'scale(' + pos + ')';\n\t\t},\n\t\tcomplete() {\n\t\t\tstyle[cssTransform] = 'none';\n\t\t\tlastTween = null;\n\t\t\toptions.complete && options.complete(elem);\n\t\t}\n\t});\n}\n\n/**\n * @param {jQuery} elem\n * @param {Object} options\n */\nfunction animateHide(elem, options) {\n\tvar style = elem.style;\n\n\treturn tween({\n\t\tduration: 200,\n\t\teasing: 'linear',\n\t\tstep: function(pos) {\n\t\t\tstyle.opacity = (1 - pos);\n\t\t},\n\t\tcomplete: function() {\n\t\t\tdom.remove(elem);\n\t\t\toptions.complete && options.complete(elem);\n\t\t}\n\t});\n}\n\n/**\n * Resolves position where tooltip should point to\n * @param {Object} pos\n * @param {CodeMirror} editor\n * @returns {Object} Object with <code>x</code> and <code>y</code> \n * properties\n */\nfunction resolvePosition(pos, editor) {\n\tif (pos === 'caret') {\n\t\t// get absolute position of current caret position\n\t\treturn sanitizeCaretPos(editor.cursorCoords(true));\n\t}\n\n\tif (typeof pos === 'object') {\n\t\tif ('x' in pos && 'y' in pos) {\n\t\t\t// passed absolute coordinates\n\t\t\treturn pos;\n\t\t}\n\n\t\tif ('left' in pos && 'top' in pos) {\n\t\t\t// passed absolute coordinates\n\t\t\treturn sanitizeCaretPos(pos);\n\t\t}\n\t}\n\t\n\tpos = makePos(pos, editor);\n\treturn sanitizeCaretPos(editor.charCoords(pos));\n}\n\nfunction sanitizeCaretPos(pos) {\n\tif ('left' in pos) {\n\t\tpos.x = pos.left;\n\t}\n\n\tif ('top' in pos) {\n\t\tpos.y = pos.top;\n\t}\n\n\treturn pos;\n}\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvYWN0aW9ucy5qcyIsImxpYi9kb20uanMiLCJsaWIvbW92aWUuanMiLCJsaWIvc2NlbmFyaW8uanMiLCJsaWIvdXRpbHMuanMiLCJsaWIvdmVuZG9yL3R3ZWVuLmpzIiwibGliL3dpZGdldHMvcHJvbXB0LmpzIiwibGliL3dpZGdldHMvdG9vbHRpcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0FDQUE7Ozs7QUFFQSxJQUFJLFVBQVU7QUFDYjs7Ozs7Ozs7Ozs7QUFXQSxPQUFNLG9CQUF5QztBQUFBLE1BQS9CLE9BQStCLFFBQS9CLE9BQStCO0FBQUEsTUFBdEIsTUFBc0IsUUFBdEIsTUFBc0I7QUFBQSxNQUFkLElBQWMsUUFBZCxJQUFjO0FBQUEsTUFBUixLQUFRLFFBQVIsS0FBUTs7QUFDOUMsWUFBVSxtQkFBTztBQUNoQixTQUFNLEVBRFUsRUFDTDtBQUNYLFVBQU8sRUFGUyxFQUVMO0FBQ1gsUUFBSyxJQUhXLENBR0w7QUFISyxHQUFQLEVBSVAsS0FBSyxNQUFMLEVBQWEsT0FBYixDQUpPLENBQVY7O0FBTUEsTUFBSSxDQUFDLFFBQVEsSUFBYixFQUFtQjtBQUNsQixTQUFNLElBQUksS0FBSixDQUFVLG9DQUFWLENBQU47QUFDQTs7QUFFRCxNQUFJLFFBQVEsR0FBUixLQUFnQixJQUFwQixFQUEwQjtBQUN6QixVQUFPLFNBQVAsQ0FBaUIsb0JBQVEsUUFBUSxHQUFoQixFQUFxQixNQUFyQixDQUFqQjtBQUNBOztBQUVELE1BQUksUUFBUSxRQUFRLElBQVIsQ0FBYSxLQUFiLENBQW1CLEVBQW5CLENBQVo7O0FBRUEsUUFBTSxTQUFTLE9BQVQsR0FBbUI7QUFDeEIsT0FBSSxLQUFLLE1BQU0sS0FBTixFQUFUO0FBQ0EsVUFBTyxnQkFBUCxDQUF3QixFQUF4QixFQUE0QixLQUE1QjtBQUNBLE9BQUksTUFBTSxNQUFWLEVBQWtCO0FBQ2pCLFVBQU0s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Q0E7QUFUVyxFQUFOLENBQVA7QUFXQTs7QUFFRDs7Ozs7OztBQU9BLFNBQVMsZUFBVCxDQUF5QixHQUF6QixFQUE4QixNQUE5QixFQUFzQztBQUNyQyxLQUFJLFFBQVEsT0FBWixFQUFxQjtBQUNwQjtBQUNBLFNBQU8saUJBQWlCLE9BQU8sWUFBUCxDQUFvQixJQUFwQixDQUFqQixDQUFQO0FBQ0E7O0FBRUQsS0FBSSxRQUFPLEdBQVAseUNBQU8sR0FBUCxPQUFlLFFBQW5CLEVBQTZCO0FBQzVCLE1BQUksT0FBTyxHQUFQLElBQWMsT0FBTyxHQUF6QixFQUE4QjtBQUM3QjtBQUNBLFVBQU8sR0FBUDtBQUNBOztBQUVELE1BQUksVUFBVSxHQUFWLElBQWlCLFNBQVMsR0FBOUIsRUFBbUM7QUFDbEM7QUFDQSxVQUFPLGlCQUFpQixHQUFqQixDQUFQO0FBQ0E7QUFDRDs7QUFFRCxPQUFNLG9CQUFRLEdBQVIsRUFBYSxNQUFiLENBQU47QUFDQSxRQUFPLGlCQUFpQixPQUFPLFVBQVAsQ0FBa0IsR0FBbEIsQ0FBakIsQ0FBUDtBQUNBOztBQUVELFNBQVMsZ0JBQVQsQ0FBMEIsR0FBMUIsRUFBK0I7QUFDOUIsS0FBSSxVQUFVLEdBQWQsRUFBbUI7QUFDbEIsTUFBSSxDQUFKLEdBQVEsSUFBSSxJQUFaO0FBQ0E7O0FBRUQsS0FBSSxTQUFTLEdBQWIsRUFBa0I7QUFDakIsTUFBSSxDQUFKLEdBQVEsSUFBSSxHQUFaO0FBQ0E7O0FBRUQsUUFBTyxHQUFQO0FBQ0E7O0FBRUQsU0FBUyxJQUFULENBQWMsR0FBZCxFQUFtQixLQUFuQixFQUEwQjtBQUN6QixRQUFPLFFBQU8sS0FBUCx5Q0FBTyxLQUFQLE9BQWlCLFFBQWpCLEdBQTRCLEtBQTVCLHVCQUFzQyxHQUF0QyxFQUE0QyxLQUE1QyxDQUFQO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfXJldHVybiBlfSkoKSIsImltcG9ydCB7ZXh0ZW5kLCBtYWtlUG9zLCBnZXRDdXJzb3J9IGZyb20gJy4vdXRpbHMnO1xuXG52YXIgYWN0aW9ucyA9IHtcblx0LyoqXG5cdCAqIFR5cGUtaW4gcGFzc2VkIHRleHQgaW50byBjdXJyZW50IGVkaXRvciBjaGFyLWJ5LWNoYXJcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ3VycmVudCBvcHRpb25zXG5cdCAqIEBwYXJhbSB7Q29kZU1pcnJvcn0gZWRpdG9yIEVkaXRvciBpbnN0YW5jZSB3aGVyZSBhY3Rpb24gc2hvdWxkIGJlIFxuXHQgKiBwZXJmb3JtZWRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dCBGdW5jdGlvbiB0byBjYWxsIHdoZW4gYWN0aW9uIHBlcmZvcm1hbmNlXG5cdCAqIGlzIGNvbXBsZXRlZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lciBGdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGltZXIgZm9yIGRlbGF5ZWQgXG5cdCAqIGV4ZWN1dGlvbi4gVGhpcyB0aW1lciB3aWxsIGF1dG9tYXRpY2FsbHkgZGVsYXkgZXhlY3V0aW9uIHdoZW5cblx0ICogc2NlbmFyaW8gaXMgcGF1c2VkIGFuZCByZXZlcnQgd2hlbiBwbGF5ZWQgYWdhaW4gXG5cdCAqL1xuXHR0eXBlOiBmdW5jdGlvbih7b3B0aW9ucywgZWRpdG9yLCBuZXh0LCB0aW1lcn0pIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdHRleHQ6ICcnLCAgLy8gdGV4dCB0byB0eXBlXG5cdFx0XHRkZWxheTogNjAsIC8vIGRlbGF5IGJldHdlZW4gY2hhcmFjdGVyIHR5cGluZ1xuXHRcdFx0cG9zOiBudWxsICAvLyBpbml0aWFsIHBvc2l0aW9uIHdoZXJlIHRvIHN0YXJ0IHR5cGluZ1xuXHRcdH0sIHdyYXAoJ3RleHQnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0aWYgKCFvcHRpb25zLnRleHQpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignTm8gdGV4dCBwcm92aWRlZCBmb3IgXCJ0eXBlXCIgYWN0aW9uJyk7XG5cdFx0fVxuXHRcdFxuXHRcdGlmIChvcHRpb25zLnBvcyAhPT0gbnVsbCkge1xuXHRcdFx0ZWRpdG9yLnNldEN1cnNvcihtYWtlUG9zKG9wdGlvbnMucG9zLCBlZGl0b3IpKTtcblx0XHR9XG5cdFx0XG5cdFx0dmFyIGNoYXJzID0gb3B0aW9ucy50ZXh0LnNwbGl0KCcnKTtcblx0XHRcblx0XHR0aW1lcihmdW5jdGlvbiBwZXJmb3JtKCkge1xuXHRcdFx0dmFyIGNoID0gY2hhcnMuc2hpZnQoKTtcblx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGNoLCAnZW5kJyk7XG5cdFx0XHRpZiAoY2hhcnMubGVuZ3RoKSB7XG5cdFx0XHRcdHRpbWVyKHBlcmZvcm0sIG9wdGlvbnMuZGVsYXkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmV4dCgpO1xuXHRcdFx0fVxuXHRcdH0sIG9wdGlvbnMuZGVsYXkpO1xuXHR9LFxuXHRcblx0LyoqXG5cdCAqIFdhaXQgZm9yIGEgc3BlY2lmaWVkIHRpbWVvdXRcblx0ICogQHBhcmFtIG9wdGlvbnNcblx0ICogQHBhcmFtIGVkaXRvclxuXHQgKiBAcGFyYW0gbmV4dFxuXHQgKiBAcGFyYW0gdGltZXJcblx0ICovXG5cdHdhaXQ6IGZ1bmN0aW9uKHtvcHRpb25zLCBlZGl0b3IsIG5leHQsIHRpbWVyfSkge1xuXHRcdG9wdGlvbnMgPSBleHRlbmQoe1xuXHRcdFx0dGltZW91dDogMTAwXG5cdFx0fSwgd3JhcCgndGltZW91dCcsIG9wdGlvbnMpKTtcblx0XHRcblx0XHR0aW1lcihuZXh0LCBwYXJzZUludChvcHRpb25zLnRpbWVvdXQsIDEwKSk7XG5cdH0sXG5cdFxuXHQvKipcblx0ICogTW92ZSBjYXJldCB0byBhIHNwZWNpZmllZCBwb3NpdGlvblxuXHQgKi9cblx0bW92ZVRvOiBmdW5jdGlvbih7b3B0aW9ucywgZWRpdG9yLCBuZXh0LCB0aW1lcn0pIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdGRlbGF5OiA4MCxcblx0XHRcdGltbWVkaWF0ZTogZmFsc2UgLy8gVE9ETzogcmVtb3ZlLCB1c2UgZGVsYXk6IDAgaW5zdGVhZFxuXHRcdH0sIHdyYXAoJ3BvcycsIG9wdGlvbnMpKTtcblx0XHRcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMucG9zID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdObyBwb3NpdGlvbiBzcGVjaWZpZWQgZm9yIFwibW92ZVRvXCIgYWN0aW9uJyk7XG5cdFx0fVxuXHRcdFxuXHRcdHZhciBjdXJQb3MgPSBnZXRDdXJzb3IoZWRpdG9yKTtcblx0XHQvLyByZXNldCBzZWxlY3Rpb24sIGlmIGV4aXN0c1xuXHRcdGVkaXRvci5zZXRTZWxlY3Rpb24oY3VyUG9zLCBjdXJQb3MpO1xuXHRcdHZhciB0YXJnZXRQb3MgPSBtYWtlUG9zKG9wdGlvbnMucG9zLCBlZGl0b3IpO1xuXHRcdFxuXHRcdGlmIChvcHRpb25zLmltbWVkaWF0ZSB8fCAhb3B0aW9ucy5kZWxheSkge1xuXHRcdFx0ZWRpdG9yLnNldEN1cnNvcih0YXJnZXRQb3MpO1xuXHRcdFx0bmV4dCgpO1xuXHRcdH1cblxuXHRcdHZhciBkZWx0YUxpbmUgPSB0YXJnZXRQb3MubGluZSAtIGN1clBvcy5saW5lO1xuXHRcdHZhciBkZWx0YUNoYXIgPSB0YXJnZXRQb3MuY2ggLSBjdXJQb3MuY2g7XG5cdFx0dmFyIHN0ZXBzID0gTWF0aC5tYXgoZGVsdGFDaGFyLCBkZWx0YUxpbmUpO1xuXHRcdC8vIHZhciBzdGVwTGluZSA9IGRlbHRhTGluZSAvIHN0ZXBzO1xuXHRcdC8vIHZhciBzdGVwQ2hhciA9IGRlbHRhQ2hhciAvIHN0ZXBzO1xuXHRcdHZhciBzdGVwTGluZSA9IGRlbHRhTGluZSA8IDAgPyAtMSA6IDE7XG5cdFx0dmFyIHN0ZXBDaGFyID0gZGVsdGFDaGFyIDwgMCA/IC0xIDogMTtcblxuXHRcdHRpbWVyKGZ1bmN0aW9uIHBlcmZvcm0oKSB7XG5cdFx0XHRjdXJQb3MgPSBnZXRDdXJzb3IoZWRpdG9yKTtcblx0XHRcdGlmIChzdGVwcyA+IDAgJiYgIShjdXJQb3MubGluZSA9PSB0YXJnZXRQb3MubGluZSAmJiBjdXJQb3MuY2ggPT0gdGFyZ2V0UG9zLmNoKSkge1xuXG5cdFx0XHRcdGlmIChjdXJQb3MubGluZSAhPSB0YXJnZXRQb3MubGluZSkge1xuXHRcdFx0XHRcdGN1clBvcy5saW5lICs9IHN0ZXBMaW5lO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGN1clBvcy5jaCAhPSB0YXJnZXRQb3MuY2gpIHtcblx0XHRcdFx0XHRjdXJQb3MuY2ggKz0gc3RlcENoYXI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGN1clBvcyk7XG5cdFx0XHRcdHN0ZXBzLS07XG5cdFx0XHRcdHRpbWVyKHBlcmZvcm0sIG9wdGlvbnMuZGVsYXkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih0YXJnZXRQb3MpO1xuXHRcdFx0XHRuZXh0KCk7XG5cdFx0XHR9XG5cdFx0fSwgb3B0aW9ucy5kZWxheSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFNpbWlsYXIgdG8gXCJtb3ZlVG9cIiBmdW5jdGlvbiBidXQgd2l0aCBpbW1lZGlhdGUgY3Vyc29yIHBvc2l0aW9uIHVwZGF0ZVxuXHQgKi9cblx0anVtcFRvOiBmdW5jdGlvbih7b3B0aW9ucywgZWRpdG9yLCBuZXh0LCB0aW1lcn0pIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdGFmdGVyRGVsYXk6IDIwMFxuXHRcdH0sIHdyYXAoJ3BvcycsIG9wdGlvbnMpKTtcblxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5wb3MgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIHBvc2l0aW9uIHNwZWNpZmllZCBmb3IgXCJqdW1wVG9cIiBhY3Rpb24nKTtcblx0XHR9XG5cdFx0XG5cdFx0ZWRpdG9yLnNldEN1cnNvcihtYWtlUG9zKG9wdGlvbnMucG9zLCBlZGl0b3IpKTtcblx0XHR0aW1lcihuZXh0LCBvcHRpb25zLmFmdGVyRGVsYXkpO1xuXHR9LFxuXHRcblx0LyoqXG5cdCAqIEV4ZWN1dGVzIHByZWRlZmluZWQgQ29kZU1pcnJvciBjb21tYW5kXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7Q29kZU1pcnJvcn0gZWRpdG9yXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZXJcblx0ICovXG5cdHJ1bjogZnVuY3Rpb24oe29wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXJ9KSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHRiZWZvcmVEZWxheTogNTAwLFxuXHRcdFx0dGltZXM6IDFcblx0XHR9LCB3cmFwKCdjb21tYW5kJywgb3B0aW9ucykpO1xuXHRcdFxuXHRcdHZhciB0aW1lcyA9IG9wdGlvbnMudGltZXM7XG5cdFx0dGltZXIoZnVuY3Rpb24gcGVyZm9ybSgpIHtcblx0XHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5jb21tYW5kID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdG9wdGlvbnMuY29tbWFuZChlZGl0b3IsIG9wdGlvbnMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWRpdG9yLmV4ZWNDb21tYW5kKG9wdGlvbnMuY29tbWFuZCk7XHRcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKC0tdGltZXMgPiAwKSB7XG5cdFx0XHRcdHRpbWVyKHBlcmZvcm0sIG9wdGlvbnMuYmVmb3JlRGVsYXkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmV4dCgpO1xuXHRcdFx0fVxuXHRcdH0sIG9wdGlvbnMuYmVmb3JlRGVsYXkpO1xuXHR9LFxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgc2VsZWN0aW9uIGZvciBzcGVjaWZpZWQgcG9zaXRpb25cblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtDb2RlTWlycm9yfSBlZGl0b3Jcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lclxuXHQgKi9cblx0c2VsZWN0OiBmdW5jdGlvbih7b3B0aW9ucywgZWRpdG9yLCBuZXh0LCB0aW1lcn0pIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdGZyb206ICdjYXJldCdcblx0XHR9LCB3cmFwKCd0bycsIG9wdGlvbnMpKTtcblx0XHRcblx0XHR2YXIgZnJvbSA9IG1ha2VQb3Mob3B0aW9ucy5mcm9tLCBlZGl0b3IpO1xuXHRcdHZhciB0byA9IG1ha2VQb3Mob3B0aW9ucy50bywgZWRpdG9yKTtcblx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGZyb20sIHRvKTtcblx0XHRuZXh0KCk7XG5cdH1cbn07XG5cbmZ1bmN0aW9uIHdyYXAoa2V5LCB2YWx1ZSkge1xuXHRyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyA/IHZhbHVlIDoge1trZXldOiB2YWx1ZX07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFjdGlvbnM7IiwiaW1wb3J0IHt0b0FycmF5fSBmcm9tICcuL3V0aWxzJztcblxudmFyIHczY0NTUyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3ICYmIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGU7XG5cbmV4cG9ydCBmdW5jdGlvbiB2aWV3cG9ydFJlY3QoKSB7XG5cdHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcblx0dmFyIGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdHZhciBjbGllbnRUb3AgPSBkb2NFbGVtLmNsaWVudFRvcCAgfHwgYm9keS5jbGllbnRUb3AgIHx8IDA7XG5cdHZhciBjbGllbnRMZWZ0ID0gZG9jRWxlbS5jbGllbnRMZWZ0IHx8IGJvZHkuY2xpZW50TGVmdCB8fCAwO1xuXHR2YXIgc2Nyb2xsVG9wICA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbFRvcCAgfHwgYm9keS5zY3JvbGxUb3A7XG5cdHZhciBzY3JvbGxMZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsTGVmdCB8fCBib2R5LnNjcm9sbExlZnQ7XG5cdFxuXHRyZXR1cm4ge1xuXHRcdHRvcDogc2Nyb2xsVG9wICAtIGNsaWVudFRvcCxcblx0XHRsZWZ0OiBzY3JvbGxMZWZ0IC0gY2xpZW50TGVmdCxcblx0XHR3aWR0aDogYm9keS5jbGllbnRXaWR0aCB8fCBkb2NFbGVtLmNsaWVudFdpZHRoLFxuXHRcdGhlaWdodDogYm9keS5jbGllbnRIZWlnaHQgfHwgZG9jRWxlbS5jbGllbnRIZWlnaHRcblx0fTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGVsZW1lbnQgZnJvbSBwYXJlbnRcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbVxuICogQHJldHVybnMge0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUoZWxlbSkge1xuXHRhcihlbGVtKS5mb3JFYWNoKGVsID0+IGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCkpO1xuXHRyZXR1cm4gZWxlbTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIHN0cmluZyBpbnRvIERPTSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJucyB7RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRE9NKHN0cikge1xuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdGRpdi5pbm5lckhUTUwgPSBzdHI7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZDtcbn1cblxuLyoqXG4gKiBTZXRzIG9yIHJldHJpZXZlcyBDU1MgcHJvcGVydHkgdmFsdWVcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbVxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzcyhlbGVtLCBwcm9wLCB2YWwpIHtcblx0aWYgKHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJyAmJiB2YWwgPT0gbnVsbCkge1xuXHRcdHJldHVybiBnZXRDU1MoZWxlbSwgcHJvcCk7XG5cdH1cblx0XG5cdGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycpIHtcblx0XHR2YXIgb2JqID0ge307XG5cdFx0b2JqW3Byb3BdID0gdmFsO1xuXHRcdHByb3AgPSBvYmo7XG5cdH1cblx0XG5cdHNldENTUyhlbGVtLCBwcm9wKTtcbn1cblxuZnVuY3Rpb24gYXIob2JqKSB7XG5cdGlmIChvYmoubGVuZ3RoID09PSArb2JqLmxlbmd0aCkge1xuXHRcdHJldHVybiB0b0FycmF5KG9iaik7XG5cdH1cblx0XG5cdHJldHVybiBBcnJheS5pc0FycmF5KG9iaikgPyBvYmogOiBbb2JqXTtcbn1cblxuZnVuY3Rpb24gdG9DYW1lbENhc2UobmFtZSkge1xuXHRyZXR1cm4gbmFtZS5yZXBsYWNlKC9cXC0oXFx3KS9nLCBmdW5jdGlvbihzdHIsIHAxKSB7XG5cdFx0cmV0dXJuIHAxLnRvVXBwZXJDYXNlKCk7XG5cdH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgQ1NTIHByb3BlcnR5IHZhbHVlIG9mIGdpdmVuIGVsZW1lbnQuXG4gKiBAYXV0aG9yIGpRdWVyeSBUZWFtXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1cbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIENTUyBwcm9wZXJ0eSB2YWx1ZVxuICovXG5mdW5jdGlvbiBnZXRDU1MoZWxlbSwgbmFtZSkge1xuXHR2YXIgcm51bXB4ID0gL14tP1xcZCsoPzpweCk/JC9pLFxuXHRcdHJudW0gPSAvXi0/XFxkKD86XFwuXFxkKyk/Lyxcblx0XHRyc3VmID0gL1xcZCQvO1xuXHRcblx0dmFyIG5hbWVDYW1lbCA9IHRvQ2FtZWxDYXNlKG5hbWUpO1xuXHQvLyBJZiB0aGUgcHJvcGVydHkgZXhpc3RzIGluIHN0eWxlW10sIHRoZW4gaXQncyBiZWVuIHNldFxuXHQvLyByZWNlbnRseSAoYW5kIGlzIGN1cnJlbnQpXG5cdGlmIChlbGVtLnN0eWxlW25hbWVDYW1lbF0pIHtcblx0XHRyZXR1cm4gZWxlbS5zdHlsZVtuYW1lQ2FtZWxdO1xuXHR9IFxuXHRcdFxuXHRpZiAodzNjQ1NTKSB7XG5cdFx0dmFyIGNzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSwgJycpO1xuXHRcdHJldHVybiBjcy5nZXRQcm9wZXJ0eVZhbHVlKG5hbWUpO1xuXHR9XG5cdFxuXHRpZiAoZWxlbS5jdXJyZW50U3R5bGUpIHtcblx0XHR2YXIgcmV0ID0gZWxlbS5jdXJyZW50U3R5bGVbbmFtZV0gfHwgZWxlbS5jdXJyZW50U3R5bGVbbmFtZUNhbWVsXTtcblx0XHR2YXIgc3R5bGUgPSBlbGVtLnN0eWxlIHx8IGVsZW07XG5cdFx0XG5cdFx0Ly8gRnJvbSB0aGUgYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkc1xuXHRcdC8vIGh0dHA6Ly9lcmlrLmVhZS5uZXQvYXJjaGl2ZXMvMjAwNy8wNy8yNy8xOC41NC4xNS8jY29tbWVudC0xMDIyOTFcblx0XHRcblx0XHQvLyBJZiB3ZSdyZSBub3QgZGVhbGluZyB3aXRoIGEgcmVndWxhciBwaXhlbCBudW1iZXJcblx0XHQvLyBidXQgYSBudW1iZXIgdGhhdCBoYXMgYSB3ZWlyZCBlbmRpbmcsIHdlIG5lZWQgdG8gY29udmVydCBpdCB0byBwaXhlbHNcblx0XHRpZiAoIXJudW1weC50ZXN0KHJldCkgJiYgcm51bS50ZXN0KHJldCkpIHtcblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcblx0XHRcdHZhciBsZWZ0ID0gc3R5bGUubGVmdCwgcnNMZWZ0ID0gZWxlbS5ydW50aW1lU3R5bGUubGVmdDtcblx0XHRcdFxuXHRcdFx0Ly8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dFxuXHRcdFx0ZWxlbS5ydW50aW1lU3R5bGUubGVmdCA9IGVsZW0uY3VycmVudFN0eWxlLmxlZnQ7XG5cdFx0XHR2YXIgc3VmZml4ID0gcnN1Zi50ZXN0KHJldCkgPyAnZW0nIDogJyc7XG5cdFx0XHRzdHlsZS5sZWZ0ID0gbmFtZUNhbWVsID09PSAnZm9udFNpemUnID8gJzFlbScgOiAocmV0ICsgc3VmZml4IHx8IDApO1xuXHRcdFx0cmV0ID0gc3R5bGUucGl4ZWxMZWZ0ICsgJ3B4Jztcblx0XHRcdFxuXHRcdFx0Ly8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXHRcdFx0c3R5bGUubGVmdCA9IGxlZnQ7XG5cdFx0XHRlbGVtLnJ1bnRpbWVTdHlsZS5sZWZ0ID0gcnNMZWZ0O1xuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gcmV0O1xuXHR9XG59XG5cbi8qKlxuICogU2V0cyBDU1MgcHJvcGVydGllcyB0byBnaXZlbiBlbGVtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgQ1NTIHByb3BlcnRpZXMgdG8gc2V0XG4gKi9cbmZ1bmN0aW9uIHNldENTUyhlbGVtLCBwYXJhbXMpIHtcblx0aWYgKCFlbGVtKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0dmFyIG51bVByb3BzID0geydsaW5lLWhlaWdodCc6IDEsICd6LWluZGV4JzogMSwgb3BhY2l0eTogMX07XG5cdHZhciBwcm9wcyA9IE9iamVjdC5rZXlzKHBhcmFtcykubWFwKGsgPT4ge1xuXHRcdHZhciB2ID0gcGFyYW1zW2tdO1xuXHRcdHZhciBuYW1lID0gay5yZXBsYWNlKC8oW0EtWl0pL2csICctJDEnKS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiBuYW1lICsgJzonICsgKCh0eXBlb2YgdiA9PT0gJ251bWJlcicgJiYgIShuYW1lIGluIG51bVByb3BzKSkgPyB2ICsgJ3B4JyA6IHYpO1xuXHR9KTtcblxuXHRlbGVtLnN0eWxlLmNzc1RleHQgKz0gJzsnICsgcHJvcHMuam9pbignOycpO1xufSIsIi8qKlxuICogQSBoaWdoLWxldmVsIGxpYnJhcnkgaW50ZXJmYWNlIGZvciBjcmVhdGluZyBzY2VuYXJpb3Mgb3ZlciB0ZXh0YXJlYVxuICogZWxlbWVudC4gVGhlIDxjb2RlPkNvZGVNaXJyb3IubW92aWU8L2NvZGU+IHRha2VzIHJlZmVyZW5jZSB0byB0ZXh0YXJlYVxuICogZWxlbWVudCAob3IgaXRzIElEKSBhbmQgcGFyc2VzIGl0cyBjb250ZW50IGZvciBpbml0aWFsIGNvbnRlbnQgdmFsdWUsXG4gKiBzY2VuYXJpby5cbiAqL1xuaW1wb3J0IHtwYXJzZUpTT04sIGV4dGVuZCwgdG9BcnJheX0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgU2NlbmFyaW8gZnJvbSAnLi9zY2VuYXJpbyc7XG5cbnZhciBpb3MgPSAvQXBwbGVXZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgL01vYmlsZVxcL1xcdysvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG52YXIgbWFjID0gaW9zIHx8IC9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtcblxudmFyIG1hY0NoYXJNYXAgPSB7XG5cdCdjdHJsJzogJ+KMgycsXG5cdCdjb250cm9sJzogJ+KMgycsXG5cdCdjbWQnOiAn4oyYJyxcblx0J3NoaWZ0JzogJ+KHpycsXG5cdCdhbHQnOiAn4oylJyxcblx0J2VudGVyJzogJ+KPjicsXG5cdCd0YWInOiAn4oelJyxcblx0J2xlZnQnOiAn4oaQJyxcblx0J3JpZ2h0JzogJ+KGkicsXG5cdCd1cCc6ICfihpEnLFxuXHQnZG93bic6ICfihpMnXG59O1xuXHRcbnZhciBwY0NoYXJNYXAgPSB7XG5cdCdjbWQnOiAnQ3RybCcsXG5cdCdjb250cm9sJzogJ0N0cmwnLFxuXHQnY3RybCc6ICdDdHJsJyxcblx0J2FsdCc6ICdBbHQnLFxuXHQnc2hpZnQnOiAnU2hpZnQnLFxuXHQnbGVmdCc6ICfihpAnLFxuXHQncmlnaHQnOiAn4oaSJyxcblx0J3VwJzogJ+KGkScsXG5cdCdkb3duJzogJ+KGkydcbn07XG5cbmV4cG9ydCB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG5cdC8qKlxuXHQgKiBBdXRvbWF0aWNhbGx5IHBhcnNlIG1vdmllIGRlZmluaXRpb24gZnJvbSB0ZXh0YXJlYSBjb250ZW50LiBTZXR0aW5nXG5cdCAqIHRoaXMgcHJvcGVydHkgdG8gPGNvZGU+ZmFsc2U8L2NvZGU+IGFzc3VtZXMgdGhhdCB1c2VyIHdhbnRzIHRvXG5cdCAqIGV4cGxpY2l0bHkgcHJvdmlkZSBtb3ZpZSBkYXRhOiBpbml0aWFsIHZhbHVlLCBzY2VuYXJpbyBldGMuXG5cdCAqL1xuXHRwYXJzZTogdHJ1ZSxcblx0XG5cdC8qKlxuXHQgKiBTdHJpbmcgb3IgcmVnZXhwIHVzZWQgdG8gc2VwYXJhdGUgc2VjdGlvbnMgb2YgbW92aWUgZGVmaW5pdGlvbiwgZS5nLlxuXHQgKiBkZWZhdWx0IHZhbHVlLCBzY2VuYXJpbyBhbmQgZWRpdG9yIG9wdGlvbnNcblx0ICovXG5cdHNlY3Rpb25TZXBhcmF0b3I6ICdAQEAnLFxuXHRcblx0LyoqIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBleHRyYWN0IG91dGxpbmUgZnJvbSBzY2VuYXJpbyBsaW5lICovXG5cdG91dGxpbmVTZXBhcmF0b3I6IC9cXHMrOjo6XFxzKyguKykkLyxcblx0XG5cdC8qKiBBdXRvbWF0aWNhbGx5IHByZXR0aWZ5IGtleWJvYXJkIHNob3J0Y3V0cyBpbiBvdXRsaW5lICovXG5cdHByZXR0aWZ5S2V5czogdHJ1ZSxcblx0XG5cdC8qKiBTdHJpcCBwYXJlbnRoZXNlcyBmcm9tIHByZXR0eWZpZWQga2V5Ym9hcmQgc2hvcnRjdXQgZGVmaW5pdGlvbiAqL1xuXHRzdHJpcFBhcmVudGhlc2VzOiBmYWxzZVxufTtcblxuLyoqXG4gKiBIaWdoLWxldmVsIGZ1bmN0aW9uIHRvIGNyZWF0ZSBtb3ZpZSBpbnN0YW5jZSBvbiB0ZXh0YXJlYS5cbiAqIEBwYXJhbSB7Q29kZU1pcnJvcn1cbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IFJlZmVyZW5jZSB0byB0ZXh0YXJlYSwgZWl0aGVyIDxjb2RlPkVsZW1lbnQ8L2NvZGU+XG4gKiBvciBzdHJpbmcgSUQuIEl0IGNhbiBhbHNvIGFjY2VwdCBleGlzdGluZyBDb2RlTWlycm9yIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBtb3ZpZU9wdGlvbnMgTW92aWUgb3B0aW9ucy4gU2VlIDxjb2RlPmRlZmF1bHRPcHRpb25zPC9jb2RlPlxuICogZm9yIHZhbHVlIHJlZmVyZW5jZVxuICogQHBhcmFtIHtPYmplY3R9IGVkaXRvck9wdGlvbnMgQWRkaXRpb25hbCBvcHRpb25zIHBhc3NlZCB0byBDb2RlTWlycm9yXG4gKiBlZGl0b3IgaW5pdGlhbGl6ZXIuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vdmllKENvZGVNaXJyb3JFZGl0b3IsIHRhcmdldCwgbW92aWVPcHRpb25zPXt9LCBlZGl0b3JPcHRpb25zPXt9KSB7XG5cdHNldHVwQ29kZU1pcnJvcihDb2RlTWlycm9yRWRpdG9yKTtcblxuXHRpZiAodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycpIHtcblx0XHR0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpO1xuXHR9XG5cblx0dmFyIHRhcmdldElzVGV4dGFyZWEgPSB0YXJnZXQubm9kZU5hbWUgJiYgdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0YXJlYSdcblx0XG5cdG1vdmllT3B0aW9ucyA9IGV4dGVuZCh7fSwgZGVmYXVsdE9wdGlvbnMsIG1vdmllT3B0aW9ucyk7XG5cdGVkaXRvck9wdGlvbnMgPSBleHRlbmQoe1xuXHRcdHRoZW1lOiAnZXNwcmVzc28nLFxuXHRcdG1vZGUgOiAndGV4dC9odG1sJyxcblx0XHRpbmRlbnRXaXRoVGFiczogdHJ1ZSxcblx0XHR0YWJTaXplOiA0LFxuXHRcdGxpbmVOdW1iZXJzIDogdHJ1ZSxcblx0XHRwcmV2ZW50Q3Vyc29yTW92ZW1lbnQ6IHRydWVcblx0fSwgZWRpdG9yT3B0aW9ucyk7XG5cdFxuXHR2YXIgaW5pdGlhbFZhbHVlID0gZWRpdG9yT3B0aW9ucy52YWx1ZSB8fCAodGFyZ2V0SXNUZXh0YXJlYSA/IHRhcmdldC52YWx1ZSA6IHRhcmdldC5nZXRWYWx1ZSgpKSB8fCAnJztcblxuXHRpZiAobW92aWVPcHRpb25zLnBhcnNlKSB7XG5cdFx0ZXh0ZW5kKG1vdmllT3B0aW9ucywgcGFyc2VNb3ZpZURlZmluaXRpb24oaW5pdGlhbFZhbHVlLCBtb3ZpZU9wdGlvbnMpKTtcblx0XHRpbml0aWFsVmFsdWUgPSBtb3ZpZU9wdGlvbnMudmFsdWU7XG5cdFx0aWYgKG1vdmllT3B0aW9ucy5lZGl0b3JPcHRpb25zKSB7XG5cdFx0XHRleHRlbmQoZWRpdG9yT3B0aW9ucywgbW92aWVPcHRpb25zLmVkaXRvck9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGlmICh0YXJnZXRJc1RleHRhcmVhKSB7XG5cdFx0XHQvLyByZWFkIENNIG9wdGlvbnMgZnJvbSBnaXZlbiB0ZXh0YXJlYVxuXHRcdFx0dmFyIGNtQXR0ciA9IC9eZGF0YVxcLWNtXFwtKC4rKSQvaTtcblx0XHRcdHRvQXJyYXkodGFyZ2V0LmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24oYXR0cikge1xuXHRcdFx0XHR2YXIgbSA9IGF0dHIubmFtZS5tYXRjaChjbUF0dHIpO1xuXHRcdFx0XHRpZiAobSkge1xuXHRcdFx0XHRcdGVkaXRvck9wdGlvbnNbbVsxXV0gPSBhdHRyLnZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIG5vcm1hbGl6ZSBsaW5lIGVuZGluZ3Ncblx0aW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlLnJlcGxhY2UoL1xccj9cXG4vZywgJ1xcbicpO1xuXG5cdC8vIGxvY2F0ZSBpbml0aWFsIGNhcmV0IHBvc2l0aW9uIGZyb20gfCBzeW1ib2xcblx0dmFyIGluaXRpYWxQb3MgPSBpbml0aWFsVmFsdWUuaW5kZXhPZignfCcpO1xuXG5cdGlmICh0YXJnZXRJc1RleHRhcmVhKSB7XG5cdFx0dGFyZ2V0LnZhbHVlID0gZWRpdG9yT3B0aW9ucy52YWx1ZSA9IGluaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZS5yZXBsYWNlKC9cXHwvZywgJycpO1xuXHR9XG5cblx0Ly8gY3JlYXRlIGVkaXRvciBpbnN0YW5jZSBpZiBuZWVkZWRcblx0dmFyIGVkaXRvciA9IHRhcmdldElzVGV4dGFyZWEgPyBDb2RlTWlycm9yRWRpdG9yLmZyb21UZXh0QXJlYSh0YXJnZXQsIGVkaXRvck9wdGlvbnMpIDogdGFyZ2V0O1xuXG5cdGlmICghdGFyZ2V0SXNUZXh0YXJlYSkge1xuXHRcdGVkaXRvci5zZXRWYWx1ZShpbml0aWFsVmFsdWUucmVwbGFjZSgvXFx8L2csICcnKSlcblx0fVxuXG5cdGlmIChpbml0aWFsUG9zICE9PSAtMSkge1xuXHRcdGVkaXRvci5zZXRDdXJzb3IoZWRpdG9yLnBvc0Zyb21JbmRleChpbml0aWFsUG9zKSk7XG5cdH1cblxuXHQvLyBzYXZlIGluaXRpYWwgZGF0YSBzbyB3ZSBjYW4gcmV2ZXJ0IHRvIGl0IGxhdGVyXG5cdGVkaXRvci5fX2luaXRpYWwgPSB7XG5cdFx0Y29udGVudDogaW5pdGlhbFZhbHVlLFxuXHRcdHBvczogZWRpdG9yLmdldEN1cnNvcih0cnVlKVxuXHR9O1xuXHRcblx0dmFyIHdyYXBwZXIgPSBlZGl0b3IuZ2V0V3JhcHBlckVsZW1lbnQoKTtcblx0XG5cdC8vIGFkanVzdCBoZWlnaHQsIGlmIHJlcXVpcmVkXG5cdGlmIChlZGl0b3JPcHRpb25zLmhlaWdodCkge1xuXHRcdHdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gZWRpdG9yT3B0aW9ucy5oZWlnaHQgKyAncHgnO1xuXHR9XG5cdFxuXHR3cmFwcGVyLmNsYXNzTmFtZSArPSAnIENvZGVNaXJyb3ItbW92aWUnO1xuXHRcblx0dmFyIHNjID0gbmV3IFNjZW5hcmlvKG1vdmllT3B0aW9ucy5zY2VuYXJpbywgZWRpdG9yKTtcblx0cmV0dXJuIHNjO1xufTtcblxuLyoqXG4gKiBQcmV0dHlmaWVzIGtleSBiaW5kaW5ncyByZWZlcmVuY2VzIGluIGdpdmVuIHN0cmluZzogZm9ybWF0cyBpdCBhY2NvcmRpbmdcbiAqIHRvIGN1cnJlbnQgdXNlcuKAmXMgcGxhdGZvcm0uIFRoZSBrZXkgYmluZGluZyBzaG91bGQgYmUgZGVmaW5lZCBpbnNpZGUgXG4gKiBwYXJlbnRoZXNlcywgZS5nLiA8Y29kZT4oY3RybC1hbHQtdXApPC9jb2RlPlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVHJhbnNmb3JtIG9wdGlvbnNcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHByZXR0aWZ5S2V5QmluZGluZ3Moc3RyLCBvcHRpb25zKSB7XG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHR2YXIgcmVLZXkgPSAvY3RybHxhbHR8c2hpZnR8Y21kL2k7XG5cdHZhciBtYXAgPSBtYWMgPyBtYWNDaGFyTWFwIDogcGNDaGFyTWFwO1xuXHRyZXR1cm4gc3RyLnJlcGxhY2UoL1xcKCguKz8pXFwpL2csIGZ1bmN0aW9uKG0sIGtiKSB7XG5cdFx0aWYgKHJlS2V5LnRlc3Qoa2IpKSB7XG5cdFx0XHR2YXIgcGFydHMgPSBrYi50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdC5zcGxpdCgvW1xcLVxcK10vKVxuXHRcdFx0XHQubWFwKGtleSA9PiBtYXBba2V5LnRvTG93ZXJDYXNlKCldIHx8IGtleS50b1VwcGVyQ2FzZSgpKTtcblx0XHRcdFxuXHRcdFx0bSA9IHBhcnRzLmpvaW4obWFjID8gJycgOiAnKycpO1xuXHRcdFx0aWYgKCFvcHRpb25zLnN0cmlwUGFyZW50aGVzZXMpIHtcblx0XHRcdFx0bSA9ICcoJyArIG0gKyAnKSc7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiBtO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gcmVhZExpbmVzKHRleHQpIHtcblx0Ly8gSUUgZmFpbHMgdG8gc3BsaXQgc3RyaW5nIGJ5IHJlZ2V4cCwgXG5cdC8vIG5lZWQgdG8gbm9ybWFsaXplIG5ld2xpbmVzIGZpcnN0XG5cdHZhciBubCA9ICdcXG4nO1xuXHR2YXIgbGluZXMgPSAodGV4dCB8fCAnJylcblx0XHQucmVwbGFjZSgvXFxyXFxuL2csIG5sKVxuXHRcdC5yZXBsYWNlKC9cXG5cXHIvZywgbmwpXG5cdFx0LnJlcGxhY2UoL1xcci9nLCBubClcblx0XHQuc3BsaXQobmwpO1xuXG5cdHJldHVybiBsaW5lcy5maWx0ZXIoQm9vbGVhbik7XG59XG5cbmZ1bmN0aW9uIHVuZXNjYXBlKHRleHQpIHtcblx0dmFyIHJlcGxhY2VtZW50cyA9IHtcblx0XHQnJmx0Oyc6ICAnPCcsXG5cdFx0JyZndDsnOiAgJz4nLFxuXHRcdCcmYW1wOyc6ICcmJ1xuXHR9O1xuXG5cdHJldHVybiB0ZXh0LnJlcGxhY2UoLyYobHR8Z3R8YW1wKTsvZywgZnVuY3Rpb24oc3RyLCBwMSkge1xuXHRcdHJldHVybiByZXBsYWNlbWVudHNbc3RyXSB8fCBzdHI7XG5cdH0pO1xufVxuXG4vKipcbiAqIEV4dHJhY3RzIGluaXRpYWwgY29udGVudCBhbmQgc2NlbmFyaW8gZnJvbSBnaXZlbiBzdHJpbmdcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBwYXJzZU1vdmllRGVmaW5pdGlvbih0ZXh0LCBvcHRpb25zPXt9KSB7XG5cdG9wdGlvbnMgPSBleHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zIHx8IHt9KTtcblx0dmFyIHBhcnRzID0gdGV4dC5zcGxpdChvcHRpb25zLnNlY3Rpb25TZXBhcmF0b3IpO1xuXG5cdC8vIHBhcnNlIHNjZW5hcmlvXG5cdHZhciByZURlZiA9IC9eKFxcdyspXFxzKjpcXHMqKC4rKSQvO1xuXHR2YXIgc2NlbmFyaW8gPSBbXTtcblx0dmFyIGVkaXRvck9wdGlvbnMgPSB7fTtcblxuXHR2YXIgc2tpcENvbW1lbnQgPSBsaW5lID0+IGxpbmUuY2hhckF0KDApICE9PSAnIyc7XG5cblx0Ly8gcmVhZCBtb3ZpZSBkZWZpbml0aW9uXG5cdHJlYWRMaW5lcyhwYXJ0c1sxXSkuZmlsdGVyKHNraXBDb21tZW50KS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcblx0XHQvLyBkbyB3ZSBoYXZlIG91dGxpbmUgZGVmaW5pdGlvbiBoZXJlP1xuXHRcdGxpbmUgPSBsaW5lLnJlcGxhY2Uob3B0aW9ucy5vdXRsaW5lU2VwYXJhdG9yLCAnJyk7XG5cblx0XHR2YXIgc2QgPSBsaW5lLm1hdGNoKHJlRGVmKTtcblx0XHRpZiAoIXNkKSB7XG5cdFx0XHRyZXR1cm4gc2NlbmFyaW8ucHVzaChsaW5lLnRyaW0oKSk7XG5cdFx0fVxuXHRcdFx0XG5cblx0XHRpZiAoc2RbMl0uY2hhckF0KDApID09PSAneycpIHtcblx0XHRcdHZhciBvYmogPSB7fTtcblx0XHRcdG9ialtzZFsxXV0gPSBwYXJzZUpTT04odW5lc2NhcGUoc2RbMl0pKTtcblx0XHRcdHJldHVybiBzY2VuYXJpby5wdXNoKG9iaik7XG5cdFx0fVxuXG5cdFx0c2NlbmFyaW8ucHVzaChzZFsxXSArICc6JyArIHVuZXNjYXBlKHNkWzJdKSk7XG5cdH0pO1xuXG5cdC8vIHJlYWQgZWRpdG9yIG9wdGlvbnNcblx0aWYgKHBhcnRzWzJdKSB7XG5cdFx0cmVhZExpbmVzKHBhcnRzWzJdKS5maWx0ZXIoc2tpcENvbW1lbnQpLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuXHRcdFx0dmFyIHNkID0gbGluZS5tYXRjaChyZURlZik7XG5cdFx0XHRpZiAoc2QpIHtcblx0XHRcdFx0ZWRpdG9yT3B0aW9uc1tzZFsxXV0gPSBzZFsyXTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dmFsdWU6IHVuZXNjYXBlKHBhcnRzWzBdLnRyaW0oKSksXG5cdFx0c2NlbmFyaW86IHNjZW5hcmlvLFxuXHRcdGVkaXRvck9wdGlvbnM6IGVkaXRvck9wdGlvbnNcblx0fTtcbn1cblxuZnVuY3Rpb24gc2V0dXBDb2RlTWlycm9yKENvZGVNaXJyb3JFZGl0b3IpIHtcblx0aWYgKCdwcmV2ZW50Q3Vyc29yTW92ZW1lbnQnIGluIENvZGVNaXJyb3JFZGl0b3IuZGVmYXVsdHMpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRDb2RlTWlycm9yRWRpdG9yLmRlZmluZU9wdGlvbigncHJldmVudEN1cnNvck1vdmVtZW50JywgZmFsc2UsIGNtID0+IHtcblx0XHR2YXIgaGFuZGxlciA9IChjbSwgZXZlbnQpID0+IGNtLmdldE9wdGlvbigncmVhZE9ubHknKSAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGNtLm9uKCdrZXlkb3duJywgaGFuZGxlcik7XG5cdFx0Y20ub24oJ21vdXNlZG93bicsIGhhbmRsZXIpO1xuXHR9KTtcbn1cbiIsImltcG9ydCBjb21tb25BY3Rpb25zIGZyb20gJy4vYWN0aW9ucyc7XG5pbXBvcnQge2FjdGlvbnMgYXMgcHJvbXB0fSBmcm9tICcuL3dpZGdldHMvcHJvbXB0JztcbmltcG9ydCB7YWN0aW9ucyBhcyB0b29sdGlwfSBmcm9tICcuL3dpZGdldHMvdG9vbHRpcCc7XG5pbXBvcnQge2V4dGVuZH0gZnJvbSAnLi91dGlscyc7XG5cbnZhciBhY3Rpb25zRGVmaW5pdGlvbiA9IGV4dGVuZCh7fSwgY29tbW9uQWN0aW9ucywgcHJvbXB0LCB0b29sdGlwKTtcblxudmFyIFNUQVRFX0lETEUgID0gJ2lkbGUnO1xudmFyIFNUQVRFX1BMQVkgID0gJ3BsYXknO1xudmFyIFNUQVRFX1BBVVNFID0gJ3BhdXNlJztcblxuLy8gUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gc3BsaXQgZXZlbnQgc3RyaW5nc1xudmFyIGV2ZW50U3BsaXR0ZXIgPSAvXFxzKy87XG5cbmV4cG9ydCB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG5cdGJlZm9yZURlbGF5OiAxMDAwLFxuXHRhZnRlckRlbGF5OiAxMDAwXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb25zIEFjdGlvbnMgc2NlbmFyaW9cbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIEluaXRpYWwgY29udGVudCAoPGNvZGU+U3RyaW5nPC9jb2RlPikgb3IgZWRpdG9yXG4gKiBpbnN0YW5jZSAoPGNvZGU+Q29kZU1pcnJvcjwvY29kZT4pXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5hcmlvIHtcblx0Y29uc3RydWN0b3IoYWN0aW9ucywgZGF0YSkge1xuXHRcdHRoaXMuX2FjdGlvbnMgPSBhY3Rpb25zO1xuXHRcdHRoaXMuX2VkaXRvciA9IG51bGw7XG5cdFx0dGhpcy5fc3RhdGUgPSBTVEFURV9JRExFO1xuXHRcdHRoaXMuX3RpbWVyUXVldWUgPSBbXTtcblx0XHRcblx0XHRpZiAoZGF0YSAmJiAnZ2V0VmFsdWUnIGluIGRhdGEpIHtcblx0XHRcdHRoaXMuX2VkaXRvciA9IGRhdGE7XG5cdFx0fVxuXHRcdFxuXHRcdHZhciBlZCA9IHRoaXMuX2VkaXRvcjtcblx0XHRpZiAoZWQgJiYgIWVkLl9faW5pdGlhbCkge1xuXHRcdFx0ZWQuX19pbml0aWFsID0ge1xuXHRcdFx0XHRjb250ZW50OiBlZC5nZXRWYWx1ZSgpLFxuXHRcdFx0XHRwb3M6IGVkLmdldEN1cnNvcih0cnVlKVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRfc2V0dXAoZWRpdG9yKSB7XG5cdFx0aWYgKCFlZGl0b3IgJiYgdGhpcy5fZWRpdG9yKSB7XG5cdFx0XHRlZGl0b3IgPSB0aGlzLl9lZGl0b3I7XG5cdFx0fVxuXHRcdFxuXHRcdGVkaXRvci5leGVjQ29tbWFuZCgncmV2ZXJ0Jyk7XG5cdFx0cmV0dXJuIGVkaXRvcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBsYXkgY3VycmVudCBzY2VuYXJpb1xuXHQgKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvciBFZGl0b3IgaW5zdGFuY2Ugd2hlcmUgb24gd2hpY2ggc2NlbmFyaW8gXG5cdCAqIHNob3VsZCBiZSBwbGF5ZWRcblx0ICogQG1lbWJlck9mIFNjZW5hcmlvXG5cdCAqL1xuXHRwbGF5KGVkaXRvcikge1xuXHRcdGlmICh0aGlzLl9zdGF0ZSA9PT0gU1RBVEVfUExBWSkge1xuXHRcdFx0Ly8gYWxyZWFkeSBwbGF5aW5nXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGlmICh0aGlzLl9zdGF0ZSA9PT0gU1RBVEVfUEFVU0UpIHtcblx0XHRcdC8vIHJldmVydCBmcm9tIHBhdXNlZCBzdGF0ZVxuXHRcdFx0ZWRpdG9yID0gZWRpdG9yIHx8IHRoaXMuX2VkaXRvcjtcblx0XHRcdGVkaXRvci5mb2N1cygpO1xuXHRcdFx0dmFyIHRpbWVyT2JqID0gbnVsbDtcblx0XHRcdHdoaWxlICh0aW1lck9iaiA9IHRoaXMuX3RpbWVyUXVldWUuc2hpZnQoKSkge1xuXHRcdFx0XHRyZXF1ZXN0VGltZXIodGltZXJPYmouZm4sIHRpbWVyT2JqLmRlbGF5KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dGhpcy5fc3RhdGUgPSBTVEFURV9QTEFZO1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdyZXN1bWUnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5fZWRpdG9yID0gZWRpdG9yID0gdGhpcy5fc2V0dXAoZWRpdG9yKTtcblx0XHRlZGl0b3IuZm9jdXMoKTtcblx0XHRcblx0XHR2YXIgdGltZXIgPSB0aGlzLnJlcXVlc3RUaW1lci5iaW5kKHRoaXMpO1xuXG5cdFx0dmFyIGdvdG9BY3Rpb24gPSBhY3Rpb25JeCA9PiB7XG5cdFx0XHRpZiAoYWN0aW9uSXggPj0gdGhpcy5fYWN0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuIHRpbWVyKCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnN0b3AoKTtcblx0XHRcdFx0fSwgZGVmYXVsdE9wdGlvbnMuYWZ0ZXJEZWxheSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMudHJpZ2dlcignYWN0aW9uJywgYWN0aW9uSXgpO1xuXG5cdFx0XHR2YXIgYWN0aW9uID0gcGFyc2VBY3Rpb25DYWxsKHRoaXMuX2FjdGlvbnNbYWN0aW9uSXhdKTtcblxuXHRcdFx0bGV0IHByZXYgPSBudWxsXG5cdFx0XHRmb3IgKGxldCBpID0gYWN0aW9uSXggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRjb25zdCBvbmVBY3Rpb24gPSBwYXJzZUFjdGlvbkNhbGwodGhpcy5fYWN0aW9uc1tpXSlcblx0XHRcdFx0aWYgKG9uZUFjdGlvbi5uYW1lID09PSAndG9vbHRpcCcgfHwgb25lQWN0aW9uLm5hbWUgPT09ICdzaG93VG9vbHRpcCcpIHtcblx0XHRcdFx0XHRwcmV2ID0gKCkgPT4gZ290b0FjdGlvbihhY3Rpb25JeCAtIDEpXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRsZXQgbmV4dCA9IG51bGxcblx0XHRcdGZvciAobGV0IGkgPSBhY3Rpb25JeCArIDE7IGkgPCB0aGlzLl9hY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGNvbnN0IG9uZUFjdGlvbiA9IHBhcnNlQWN0aW9uQ2FsbCh0aGlzLl9hY3Rpb25zW2ldKVxuXHRcdFx0XHRpZiAob25lQWN0aW9uLm5hbWUgPT09ICd0b29sdGlwJyB8fCBvbmVBY3Rpb24ubmFtZSA9PT0gJ3Nob3dUb29sdGlwJykge1xuXHRcdFx0XHRcdG5leHQgPSAoKSA9PiBnb3RvQWN0aW9uKGFjdGlvbkl4ICsgMSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYWN0aW9uLm5hbWUgaW4gYWN0aW9uc0RlZmluaXRpb24pIHtcblx0XHRcdFx0YWN0aW9uc0RlZmluaXRpb25bYWN0aW9uLm5hbWVdKHtcblx0XHRcdFx0XHRvcHRpb25zOiBhY3Rpb24ub3B0aW9ucyxcblx0XHRcdFx0XHRlZGl0b3IsXG5cdFx0XHRcdFx0bmV4dCxcblx0XHRcdFx0XHRzdG9wOiAoKSA9PiB0aGlzLnN0b3AoKSxcblx0XHRcdFx0XHRwcmV2LFxuXHRcdFx0XHRcdHRpbWVyXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdObyBzdWNoIGFjdGlvbjogJyArIGFjdGlvbi5uYW1lKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0dGhpcy5fc3RhdGUgPSBTVEFURV9QTEFZO1xuXHRcdHRoaXMuX2VkaXRvci5zZXRPcHRpb24oJ3JlYWRPbmx5JywgdHJ1ZSk7XG5cdFx0dGhpcy50cmlnZ2VyKCdwbGF5Jyk7XG5cdFx0dGltZXIoKCkgPT4gZ290b0FjdGlvbigwKSwgZGVmYXVsdE9wdGlvbnMuYmVmb3JlRGVsYXkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGF1c2UgY3VycmVudCBzY2VuYXJpbyBwbGF5YmFjay4gSXQgY2FuIGJlIHJlc3RvcmVkIHdpdGggXG5cdCAqIDxjb2RlPnBsYXkoKTwvY29kZT4gbWV0aG9kIGNhbGwgXG5cdCAqL1xuXHRwYXVzZSgpIHtcblx0XHR0aGlzLl9zdGF0ZSA9IFNUQVRFX1BBVVNFO1xuXHRcdHRoaXMudHJpZ2dlcigncGF1c2UnKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0b3BzIHBsYXliYWNrIG9mIGN1cnJlbnQgc2NlbmFyaW9cblx0ICovXG5cdHN0b3AoKSB7XG5cdFx0aWYgKHRoaXMuX3N0YXRlICE9PSBTVEFURV9JRExFKSB7XG5cdFx0XHR0aGlzLl9zdGF0ZSA9IFNUQVRFX0lETEU7XG5cdFx0XHR0aGlzLl90aW1lclF1ZXVlLmxlbmd0aCA9IDA7XG5cdFx0XHR0aGlzLl9lZGl0b3Iuc2V0T3B0aW9uKCdyZWFkT25seScsIGZhbHNlKTtcblx0XHRcdHRoaXMudHJpZ2dlcignc3RvcCcpO1xuXHRcdH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgY3VycmVudCBwbGF5YmFjayBzdGF0ZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRnZXQgc3RhdGUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX3N0YXRlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVG9nZ2xlIHBsYXliYWNrIG9mIG1vdmllIHNjZW5hcmlvXG5cdCAqL1xuXHR0b2dnbGUoKSB7XG5cdFx0aWYgKHRoaXMuX3N0YXRlID09PSBTVEFURV9QTEFZKSB7XG5cdFx0XHR0aGlzLnBhdXNlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucGxheSgpO1xuXHRcdH1cblx0fVxuXHRcblx0cmVxdWVzdFRpbWVyKGZuLCBkZWxheSkge1xuXHRcdGlmICh0aGlzLl9zdGF0ZSAhPT0gU1RBVEVfUExBWSkge1xuXHRcdFx0Ly8gc2F2ZSBmdW5jdGlvbiBjYWxsIGludG8gYSBxdWV1ZSB0aWxsIG5leHQgJ3BsYXkoKScgY2FsbFxuXHRcdFx0dGhpcy5fdGltZXJRdWV1ZS5wdXNoKHtcblx0XHRcdFx0Zm46IGZuLFxuXHRcdFx0XHRkZWxheTogZGVsYXlcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gcmVxdWVzdFRpbWVyKGZuLCBkZWxheSk7XG5cdFx0fVxuXHR9XG5cdFxuXHQvLyBib3Jyb3dlZCBmcm9tIEJhY2tib25lXG5cdC8qKlxuXHQgKiBCaW5kIG9uZSBvciBtb3JlIHNwYWNlIHNlcGFyYXRlZCBldmVudHMsIGBldmVudHNgLCB0byBhIGBjYWxsYmFja2Bcblx0ICogZnVuY3Rpb24uIFBhc3NpbmcgYFwiYWxsXCJgIHdpbGwgYmluZCB0aGUgY2FsbGJhY2sgdG8gYWxsIGV2ZW50cyBmaXJlZC5cblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuXHQgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuXHQgKiBAbWVtYmVyT2YgZXZlbnREaXNwYXRjaGVyXG5cdCAqL1xuXHRvbihldmVudHMsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG5cdFx0dmFyIGNhbGxzLCBldmVudCwgbm9kZSwgdGFpbCwgbGlzdDtcblx0XHRpZiAoIWNhbGxiYWNrKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0XG5cdFx0ZXZlbnRzID0gZXZlbnRzLnNwbGl0KGV2ZW50U3BsaXR0ZXIpO1xuXHRcdGNhbGxzID0gdGhpcy5fY2FsbGJhY2tzIHx8ICh0aGlzLl9jYWxsYmFja3MgPSB7fSk7XG5cblx0XHQvLyBDcmVhdGUgYW4gaW1tdXRhYmxlIGNhbGxiYWNrIGxpc3QsIGFsbG93aW5nIHRyYXZlcnNhbCBkdXJpbmdcblx0XHQvLyBtb2RpZmljYXRpb24uICBUaGUgdGFpbCBpcyBhbiBlbXB0eSBvYmplY3QgdGhhdCB3aWxsIGFsd2F5cyBiZSB1c2VkXG5cdFx0Ly8gYXMgdGhlIG5leHQgbm9kZS5cblx0XHR3aGlsZSAoZXZlbnQgPSBldmVudHMuc2hpZnQoKSkge1xuXHRcdFx0bGlzdCA9IGNhbGxzW2V2ZW50XTtcblx0XHRcdG5vZGUgPSBsaXN0ID8gbGlzdC50YWlsIDoge307XG5cdFx0XHRub2RlLm5leHQgPSB0YWlsID0ge307XG5cdFx0XHRub2RlLmNvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0bm9kZS5jYWxsYmFjayA9IGNhbGxiYWNrO1xuXHRcdFx0Y2FsbHNbZXZlbnRdID0ge1xuXHRcdFx0XHR0YWlsIDogdGFpbCxcblx0XHRcdFx0bmV4dCA6IGxpc3QgPyBsaXN0Lm5leHQgOiBub2RlXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSBvbmUgb3IgbWFueSBjYWxsYmFja3MuIElmIGBjb250ZXh0YCBpcyBudWxsLCByZW1vdmVzIGFsbFxuXHQgKiBjYWxsYmFja3Mgd2l0aCB0aGF0IGZ1bmN0aW9uLiBJZiBgY2FsbGJhY2tgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG5cdCAqIGNhbGxiYWNrcyBmb3IgdGhlIGV2ZW50LiBJZiBgZXZlbnRzYCBpcyBudWxsLCByZW1vdmVzIGFsbCBib3VuZFxuXHQgKiBjYWxsYmFja3MgZm9yIGFsbCBldmVudHMuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcblx0ICovXG5cdG9mZihldmVudHMsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG5cdFx0dmFyIGV2ZW50LCBjYWxscywgbm9kZSwgdGFpbCwgY2IsIGN0eDtcblxuXHRcdC8vIE5vIGV2ZW50cywgb3IgcmVtb3ZpbmcgKmFsbCogZXZlbnRzLlxuXHRcdGlmICghKGNhbGxzID0gdGhpcy5fY2FsbGJhY2tzKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHRpZiAoIShldmVudHMgfHwgY2FsbGJhY2sgfHwgY29udGV4dCkpIHtcblx0XHRcdGRlbGV0ZSB0aGlzLl9jYWxsYmFja3M7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHQvLyBMb29wIHRocm91Z2ggdGhlIGxpc3RlZCBldmVudHMgYW5kIGNvbnRleHRzLCBzcGxpY2luZyB0aGVtIG91dCBvZiB0aGVcblx0XHQvLyBsaW5rZWQgbGlzdCBvZiBjYWxsYmFja3MgaWYgYXBwcm9wcmlhdGUuXG5cdFx0ZXZlbnRzID0gZXZlbnRzID8gZXZlbnRzLnNwbGl0KGV2ZW50U3BsaXR0ZXIpIDogT2JqZWN0LmtleXMoY2FsbHMpO1xuXHRcdHdoaWxlIChldmVudCA9IGV2ZW50cy5zaGlmdCgpKSB7XG5cdFx0XHRub2RlID0gY2FsbHNbZXZlbnRdO1xuXHRcdFx0ZGVsZXRlIGNhbGxzW2V2ZW50XTtcblx0XHRcdGlmICghbm9kZSB8fCAhKGNhbGxiYWNrIHx8IGNvbnRleHQpKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgbGlzdCwgb21pdHRpbmcgdGhlIGluZGljYXRlZCBjYWxsYmFja3MuXG5cdFx0XHR0YWlsID0gbm9kZS50YWlsO1xuXHRcdFx0d2hpbGUgKChub2RlID0gbm9kZS5uZXh0KSAhPT0gdGFpbCkge1xuXHRcdFx0XHRjYiA9IG5vZGUuY2FsbGJhY2s7XG5cdFx0XHRcdGN0eCA9IG5vZGUuY29udGV4dDtcblx0XHRcdFx0aWYgKChjYWxsYmFjayAmJiBjYiAhPT0gY2FsbGJhY2spIHx8IChjb250ZXh0ICYmIGN0eCAhPT0gY29udGV4dCkpIHtcblx0XHRcdFx0XHR0aGlzLm9uKGV2ZW50LCBjYiwgY3R4KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHJpZ2dlciBvbmUgb3IgbWFueSBldmVudHMsIGZpcmluZyBhbGwgYm91bmQgY2FsbGJhY2tzLiBDYWxsYmFja3MgYXJlXG5cdCAqIHBhc3NlZCB0aGUgc2FtZSBhcmd1bWVudHMgYXMgYHRyaWdnZXJgIGlzLCBhcGFydCBmcm9tIHRoZSBldmVudCBuYW1lXG5cdCAqICh1bmxlc3MgeW91J3JlIGxpc3RlbmluZyBvbiBgXCJhbGxcImAsIHdoaWNoIHdpbGwgY2F1c2UgeW91ciBjYWxsYmFja1xuXHQgKiB0byByZWNlaXZlIHRoZSB0cnVlIG5hbWUgb2YgdGhlIGV2ZW50IGFzIHRoZSBmaXJzdCBhcmd1bWVudCkuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcblx0ICovXG5cdHRyaWdnZXIoZXZlbnRzLCAuLi5yZXN0KSB7XG5cdFx0dmFyIGV2ZW50LCBub2RlLCBjYWxscywgdGFpbCwgYXJncywgYWxsO1xuXHRcdGlmICghKGNhbGxzID0gdGhpcy5fY2FsbGJhY2tzKSkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdFxuXHRcdGFsbCA9IGNhbGxzLmFsbDtcblx0XHRldmVudHMgPSBldmVudHMuc3BsaXQoZXZlbnRTcGxpdHRlcik7XG5cblx0XHQvLyBGb3IgZWFjaCBldmVudCwgd2FsayB0aHJvdWdoIHRoZSBsaW5rZWQgbGlzdCBvZiBjYWxsYmFja3MgdHdpY2UsXG5cdFx0Ly8gZmlyc3QgdG8gdHJpZ2dlciB0aGUgZXZlbnQsIHRoZW4gdG8gdHJpZ2dlciBhbnkgYFwiYWxsXCJgIGNhbGxiYWNrcy5cblx0XHR3aGlsZSAoZXZlbnQgPSBldmVudHMuc2hpZnQoKSkge1xuXHRcdFx0aWYgKG5vZGUgPSBjYWxsc1tldmVudF0pIHtcblx0XHRcdFx0dGFpbCA9IG5vZGUudGFpbDtcblx0XHRcdFx0d2hpbGUgKChub2RlID0gbm9kZS5uZXh0KSAhPT0gdGFpbCkge1xuXHRcdFx0XHRcdG5vZGUuY2FsbGJhY2suYXBwbHkobm9kZS5jb250ZXh0IHx8IHRoaXMsIHJlc3QpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAobm9kZSA9IGFsbCkge1xuXHRcdFx0XHR0YWlsID0gbm9kZS50YWlsO1xuXHRcdFx0XHRhcmdzID0gWyBldmVudCBdLmNvbmNhdChyZXN0KTtcblx0XHRcdFx0d2hpbGUgKChub2RlID0gbm9kZS5uZXh0KSAhPT0gdGFpbCkge1xuXHRcdFx0XHRcdG5vZGUuY2FsbGJhY2suYXBwbHkobm9kZS5jb250ZXh0IHx8IHRoaXMsIGFyZ3MpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cbi8qKlxuICogUGFyc2VzIGFjdGlvbiBjYWxsIGZyb20gc3RyaW5nXG4gKiBAcGFyYW0ge1N0cmluZ30gZGF0YVxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gcGFyc2VBY3Rpb25DYWxsKGRhdGEpIHtcblx0aWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuXHRcdHZhciBwYXJ0cyA9IGRhdGEuc3BsaXQoJzonKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bmFtZTogcGFydHMuc2hpZnQoKSxcblx0XHRcdG9wdGlvbnM6IHBhcnRzLmpvaW4oJzonKVxuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0dmFyIG5hbWUgPSBPYmplY3Qua2V5cyhkYXRhKVswXTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bmFtZTogbmFtZSxcblx0XHRcdG9wdGlvbnM6IGRhdGFbbmFtZV1cblx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlcXVlc3RUaW1lcihmbiwgZGVsYXkpIHtcblx0aWYgKCFkZWxheSkge1xuXHRcdGZuKCk7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHNldFRpbWVvdXQoZm4sIGRlbGF5KTtcblx0fVxufSIsInZhciBwcm9wQ2FjaGUgPSB7fTtcblxuLy8gZGV0ZWN0IENTUyAzRCBUcmFuc2Zvcm1zIGZvciBzbW9vdGhlciBhbmltYXRpb25zIFxuZXhwb3J0IHZhciBoYXMzZCA9IChmdW5jdGlvbigpIHtcblx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdHZhciBjc3NUcmFuc2Zvcm0gPSBwcmVmaXhlZCgndHJhbnNmb3JtJyk7XG5cdGlmIChjc3NUcmFuc2Zvcm0pIHtcblx0XHRlbC5zdHlsZVtjc3NUcmFuc2Zvcm1dID0gJ3RyYW5zbGF0ZVooMCknO1xuXHRcdHJldHVybiAoL3RyYW5zbGF0ZXovaSkudGVzdChlbC5zdHlsZVtjc3NUcmFuc2Zvcm1dKTsgXG5cdH1cblx0XG5cdHJldHVybiBmYWxzZTtcbn0pKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQob2JqLCAuLi5hcmdzKSB7XG5cdGFyZ3MuZm9yRWFjaChhID0+IHtcblx0XHRpZiAodHlwZW9mIGEgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGtleSA9PiBvYmpba2V5XSA9IGFba2V5XSk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG9iajtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkob2JqLCBpeD0wKSB7XG5cdHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmosIGl4KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHByZWZpeGVkIChpZiByZXF1aXJlZCkgQ1NTIHByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSAge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJlZml4ZWQocHJvcCkge1xuXHRpZiAocHJvcCBpbiBwcm9wQ2FjaGUpIHtcblx0XHRyZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuXHR9XG5cblx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdHZhciBzdHlsZSA9IGVsLnN0eWxlO1xuXG5cdHZhciBwcmVmaXhlcyA9IFsnbycsICdtcycsICdtb3onLCAnd2Via2l0J107XG5cdHZhciBwcm9wcyA9IFtwcm9wXTtcblx0dmFyIGNhcGl0YWxpemUgPSBmdW5jdGlvbihzdHIpIHtcblx0XHRyZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cigxKTtcblx0fTtcblxuXHRwcm9wID0gcHJvcC5yZXBsYWNlKC9cXC0oW2Etel0pL2csIGZ1bmN0aW9uKHN0ciwgY2gpIHtcblx0XHRyZXR1cm4gY2gudG9VcHBlckNhc2UoKTtcblx0fSk7XG5cblx0dmFyIGNhcFByb3AgPSBjYXBpdGFsaXplKHByb3ApO1xuXHRwcmVmaXhlcy5mb3JFYWNoKGZ1bmN0aW9uKHByZWZpeCkge1xuXHRcdHByb3BzLnB1c2gocHJlZml4ICsgY2FwUHJvcCwgY2FwaXRhbGl6ZShwcmVmaXgpICsgY2FwUHJvcCk7XG5cdH0pO1xuXG5cdGZvciAodmFyIGkgPSAwLCBpbCA9IHByb3BzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHtcblx0XHRpZiAocHJvcHNbaV0gaW4gc3R5bGUpIHtcblx0XHRcdHJldHVybiBwcm9wQ2FjaGVbcHJvcF0gPSBwcm9wc1tpXTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcHJvcENhY2hlW3Byb3BdID0gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvc09iaihvYmopIHtcblx0cmV0dXJuIHtcblx0XHRsaW5lOiBvYmoubGluZSxcblx0XHRjaDogb2JqLmNoXG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJzb3IoZWRpdG9yLCBzdGFydD0nZnJvbScpIHtcblx0cmV0dXJuIHBvc09iaihlZGl0b3IuZ2V0Q3Vyc29yKHN0YXJ0KSk7XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgcHJvZHVjZXMgPGNvZGU+e2xpbmUsIGNofTwvY29kZT4gb2JqZWN0IGZyb21cbiAqIHBhc3NlZCBhcmd1bWVudFxuICogQHBhcmFtIHtPYmplY3R9IHBvc1xuICogQHBhcmFtIHtDb2RlTWlycm9yfSBlZGl0b3JcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUG9zKHBvcywgZWRpdG9yKSB7XG5cdGlmIChwb3MgPT09ICdjYXJldCcpIHtcblx0XHRyZXR1cm4gZ2V0Q3Vyc29yKGVkaXRvcik7XG5cdH1cblxuXHRpZiAodHlwZW9mIHBvcyA9PT0gJ3N0cmluZycpIHtcblx0XHRpZiAofnBvcy5pbmRleE9mKCc6JykpIHtcblx0XHRcdGxldCBwYXJ0cyA9IHBvcy5zcGxpdCgnOicpO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0bGluZTogK3BhcnRzWzBdLFxuXHRcdFx0XHRjaDogK3BhcnRzWzFdXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRcblx0XHRwb3MgPSArcG9zO1xuXHR9XG5cdFxuXHRpZiAodHlwZW9mIHBvcyA9PT0gJ251bWJlcicpIHtcblx0XHRyZXR1cm4gcG9zT2JqKGVkaXRvci5wb3NGcm9tSW5kZXgocG9zKSk7XG5cdH1cblx0XG5cdHJldHVybiBwb3NPYmoocG9zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlKHRtcGwsIGRhdGEpIHtcblx0dmFyIGZuID0gZGF0YSA9PiB0bXBsLnJlcGxhY2UoLzwlKFstPV0pP1xccyooW1xcd1xcLV0rKVxccyolPi9nLCAoc3RyLCBvcCwga2V5KSA9PiBkYXRhW2tleS50cmltKCldKTtcblx0cmV0dXJuIGRhdGEgPyBmbihkYXRhKSA6IGZuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZChhcnIsIGl0ZXIpIHtcblx0dmFyIGZvdW5kO1xuXHRhcnIuc29tZSgoaXRlbSwgaSwgYXJyKSA9PiB7XG5cdFx0aWYgKGl0ZXIoaXRlbSwgaSwgYXJyKSkge1xuXHRcdFx0cmV0dXJuIGZvdW5kID0gaXRlbTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gZm91bmQ7XG59XG5cbi8qKlxuICogUmVsYXhlZCBKU09OIHBhcnNlci5cbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSlNPTih0ZXh0KSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIChuZXcgRnVuY3Rpb24oJ3JldHVybiAnICsgdGV4dCkpKCk7XG5cdH0gY2F0Y2goZSkge1xuXHRcdHJldHVybiB7fTtcblx0fVxufSIsInZhciBnbG9iYWwgPSB3aW5kb3c7XG52YXIgdGltZSA9IERhdGUubm93IFxuXHQ/IGZ1bmN0aW9uKCkge3JldHVybiBEYXRlLm5vdygpO31cblx0OiBmdW5jdGlvbigpIHtyZXR1cm4gK25ldyBEYXRlO307XG5cbnZhciBpbmRleE9mID0gJ2luZGV4T2YnIGluIEFycmF5LnByb3RvdHlwZVxuXHQ/IGZ1bmN0aW9uKGFycmF5LCB2YWx1ZSkge3JldHVybiBhcnJheS5pbmRleE9mKHZhbHVlKTt9XG5cdDogZnVuY3Rpb24oYXJyYXksIHZhbHVlKSB7XG5cdFx0Zm9yICh2YXIgaSA9IDAsIGlsID0gYXJyYXkubGVuZ3RoOyBpIDwgaWw7IGkrKykge1xuXHRcdFx0aWYgKGFycmF5W2ldID09PSB2YWx1ZSkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gLTE7XG5cdH07XG5cbmZ1bmN0aW9uIGV4dGVuZChvYmopIHtcblx0Zm9yICh2YXIgaSA9IDEsIGlsID0gYXJndW1lbnRzLmxlbmd0aCwgc291cmNlOyBpIDwgaWw7IGkrKykge1xuXHRcdHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblx0XHRpZiAoc291cmNlKSB7XG5cdFx0XHRmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuXHRcdFx0XHRvYmpbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgcG9seWZpbGwgYnkgRXJpayBNw7ZsbGVyXG4gKiBmaXhlcyBmcm9tIFBhdWwgSXJpc2ggYW5kIFRpbm8gWmlqZGVsXG4gKiBodHRwOi8vcGF1bGlyaXNoLmNvbS8yMDExL3JlcXVlc3RhbmltYXRpb25mcmFtZS1mb3Itc21hcnQtYW5pbWF0aW5nL1xuICogaHR0cDovL215Lm9wZXJhLmNvbS9lbW9sbGVyL2Jsb2cvMjAxMS8xMi8yMC9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWVyLWFuaW1hdGluZ1xuICovXG4oZnVuY3Rpb24oKSB7XG5cdHZhciBsYXN0VGltZSA9IDA7XG5cdHZhciB2ZW5kb3JzID0gWyAnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJyBdO1xuXHRmb3IgKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICFnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHtcblx0XHRnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZ2xvYmFsW3ZlbmRvcnNbeF0gKyAnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG5cdFx0Z2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZ2xvYmFsW3ZlbmRvcnNbeF0gKyAnQ2FuY2VsQW5pbWF0aW9uRnJhbWUnXVxuXHRcdFx0XHR8fCBnbG9iYWxbdmVuZG9yc1t4XSArICdDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcblx0fVxuXHRcblx0aWYgKCFnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxuXHRcdGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaywgZWxlbWVudCkge1xuXHRcdFx0dmFyIGN1cnJUaW1lID0gdGltZSgpO1xuXHRcdFx0dmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XG5cdFx0XHR2YXIgaWQgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTtcblx0XHRcdH0sIHRpbWVUb0NhbGwpO1xuXHRcdFx0bGFzdFRpbWUgPSBjdXJyVGltZSArIHRpbWVUb0NhbGw7XG5cdFx0XHRyZXR1cm4gaWQ7XG5cdFx0fTtcblxuXHRpZiAoIWdsb2JhbC5jYW5jZWxBbmltYXRpb25GcmFtZSlcblx0XHRnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZCkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KGlkKTtcblx0XHR9O1xufSgpKTtcblxuXG52YXIgZHVtbXlGbiA9IGZ1bmN0aW9uKCkge307XG52YXIgYW5pbXMgPSBbXTtcbnZhciBpZENvdW50ZXIgPSAwO1xuXG52YXIgZGVmYXVsdHMgPSB7XG5cdGR1cmF0aW9uOiA1MDAsIC8vIG1zXG5cdGRlbGF5OiAwLFxuXHRlYXNpbmc6ICdsaW5lYXInLFxuXHRzdGFydDogZHVtbXlGbixcblx0c3RlcDogZHVtbXlGbixcblx0Y29tcGxldGU6IGR1bW15Rm4sXG5cdGF1dG9zdGFydDogdHJ1ZSxcblx0cmV2ZXJzZTogZmFsc2Vcbn07XG5cbmV4cG9ydCB2YXIgZWFzaW5ncyA9IHtcblx0bGluZWFyOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMgKiB0IC8gZCArIGI7XG5cdH0sXG5cdGluUXVhZDogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHJldHVybiBjKih0Lz1kKSp0ICsgYjtcblx0fSxcblx0b3V0UXVhZDogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHJldHVybiAtYyAqKHQvPWQpKih0LTIpICsgYjtcblx0fSxcblx0aW5PdXRRdWFkOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0aWYoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCArIGI7XG5cdFx0cmV0dXJuIC1jLzIgKigoLS10KSoodC0yKSAtIDEpICsgYjtcblx0fSxcblx0aW5DdWJpYzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHJldHVybiBjKih0Lz1kKSp0KnQgKyBiO1xuXHR9LFxuXHRvdXRDdWJpYzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHJldHVybiBjKigodD10L2QtMSkqdCp0ICsgMSkgKyBiO1xuXHR9LFxuXHRpbk91dEN1YmljOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0aWYoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCp0ICsgYjtcblx0XHRyZXR1cm4gYy8yKigodC09MikqdCp0ICsgMikgKyBiO1xuXHR9LFxuXHRpbkV4cG86IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4odD09MCkgPyBiIDogYyAqIE1hdGgucG93KDIsIDEwICoodC9kIC0gMSkpICsgYiAtIGMgKiAwLjAwMTtcblx0fSxcblx0b3V0RXhwbzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHJldHVybih0PT1kKSA/IGIrYyA6IGMgKiAxLjAwMSAqKC1NYXRoLnBvdygyLCAtMTAgKiB0L2QpICsgMSkgKyBiO1xuXHR9LFxuXHRpbk91dEV4cG86IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRpZih0PT0wKSByZXR1cm4gYjtcblx0XHRpZih0PT1kKSByZXR1cm4gYitjO1xuXHRcdGlmKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIGMvMiAqIE1hdGgucG93KDIsIDEwICoodCAtIDEpKSArIGIgLSBjICogMC4wMDA1O1xuXHRcdHJldHVybiBjLzIgKiAxLjAwMDUgKigtTWF0aC5wb3coMiwgLTEwICogLS10KSArIDIpICsgYjtcblx0fSxcblx0aW5FbGFzdGljOiBmdW5jdGlvbih0LCBiLCBjLCBkLCBhLCBwKSB7XG5cdFx0dmFyIHM7XG5cdFx0aWYodD09MCkgcmV0dXJuIGI7ICBpZigodC89ZCk9PTEpIHJldHVybiBiK2M7ICBpZighcCkgcD1kKi4zO1xuXHRcdGlmKCFhIHx8IGEgPCBNYXRoLmFicyhjKSkgeyBhPWM7IHM9cC80OyB9IGVsc2UgcyA9IHAvKDIqTWF0aC5QSSkgKiBNYXRoLmFzaW4oYy9hKTtcblx0XHRyZXR1cm4gLShhKk1hdGgucG93KDIsMTAqKHQtPTEpKSAqIE1hdGguc2luKCh0KmQtcykqKDIqTWF0aC5QSSkvcCApKSArIGI7XG5cdH0sXG5cdG91dEVsYXN0aWM6IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIGEsIHApIHtcblx0XHR2YXIgcztcblx0XHRpZih0PT0wKSByZXR1cm4gYjsgIGlmKCh0Lz1kKT09MSkgcmV0dXJuIGIrYzsgIGlmKCFwKSBwPWQqLjM7XG5cdFx0aWYoIWEgfHwgYSA8IE1hdGguYWJzKGMpKSB7IGE9Yzsgcz1wLzQ7IH0gZWxzZSBzID0gcC8oMipNYXRoLlBJKSAqIE1hdGguYXNpbihjL2EpO1xuXHRcdHJldHVybihhKk1hdGgucG93KDIsLTEwKnQpICogTWF0aC5zaW4oKHQqZC1zKSooMipNYXRoLlBJKS9wICkgKyBjICsgYik7XG5cdH0sXG5cdGluT3V0RWxhc3RpYzogZnVuY3Rpb24odCwgYiwgYywgZCwgYSwgcCkge1xuXHRcdHZhciBzO1xuXHRcdGlmKHQ9PTApIHJldHVybiBiOyBcblx0XHRpZigodC89ZC8yKT09MikgcmV0dXJuIGIrYztcblx0XHRpZighcCkgcD1kKiguMyoxLjUpO1xuXHRcdGlmKCFhIHx8IGEgPCBNYXRoLmFicyhjKSkgeyBhPWM7IHM9cC80OyB9ICAgICAgIGVsc2UgcyA9IHAvKDIqTWF0aC5QSSkgKiBNYXRoLmFzaW4oYy9hKTtcblx0XHRpZih0IDwgMSkgcmV0dXJuIC0uNSooYSpNYXRoLnBvdygyLDEwKih0LT0xKSkgKiBNYXRoLnNpbigodCpkLXMpKigyKk1hdGguUEkpL3AgKSkgKyBiO1xuXHRcdHJldHVybiBhKk1hdGgucG93KDIsLTEwKih0LT0xKSkgKiBNYXRoLnNpbigodCpkLXMpKigyKk1hdGguUEkpL3AgKSouNSArIGMgKyBiO1xuXHR9LFxuXHRpbkJhY2s6IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIHMpIHtcblx0XHRpZihzID09IHVuZGVmaW5lZCkgcyA9IDEuNzAxNTg7XG5cdFx0cmV0dXJuIGMqKHQvPWQpKnQqKChzKzEpKnQgLSBzKSArIGI7XG5cdH0sXG5cdG91dEJhY2s6IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIHMpIHtcblx0XHRpZihzID09IHVuZGVmaW5lZCkgcyA9IDEuNzAxNTg7XG5cdFx0cmV0dXJuIGMqKCh0PXQvZC0xKSp0KigocysxKSp0ICsgcykgKyAxKSArIGI7XG5cdH0sXG5cdGluT3V0QmFjazogZnVuY3Rpb24odCwgYiwgYywgZCwgcykge1xuXHRcdGlmKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcblx0XHRpZigodC89ZC8yKSA8IDEpIHJldHVybiBjLzIqKHQqdCooKChzKj0oMS41MjUpKSsxKSp0IC0gcykpICsgYjtcblx0XHRyZXR1cm4gYy8yKigodC09MikqdCooKChzKj0oMS41MjUpKSsxKSp0ICsgcykgKyAyKSArIGI7XG5cdH0sXG5cdGluQm91bmNlOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMgLSB0aGlzLm91dEJvdW5jZSh0LCBkLXQsIDAsIGMsIGQpICsgYjtcblx0fSxcblx0b3V0Qm91bmNlOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0aWYoKHQvPWQpIDwoMS8yLjc1KSkge1xuXHRcdFx0cmV0dXJuIGMqKDcuNTYyNSp0KnQpICsgYjtcblx0XHR9IGVsc2UgaWYodCA8KDIvMi43NSkpIHtcblx0XHRcdHJldHVybiBjKig3LjU2MjUqKHQtPSgxLjUvMi43NSkpKnQgKyAuNzUpICsgYjtcblx0XHR9IGVsc2UgaWYodCA8KDIuNS8yLjc1KSkge1xuXHRcdFx0cmV0dXJuIGMqKDcuNTYyNSoodC09KDIuMjUvMi43NSkpKnQgKyAuOTM3NSkgKyBiO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gYyooNy41NjI1Kih0LT0oMi42MjUvMi43NSkpKnQgKyAuOTg0Mzc1KSArIGI7XG5cdFx0fVxuXHR9LFxuXHRpbk91dEJvdW5jZTogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdGlmKHQgPCBkLzIpIHJldHVybiB0aGlzLmluQm91bmNlKHQqMiwgMCwgYywgZCkgKiAuNSArIGI7XG5cdFx0cmV0dXJuIHRoaXMub3V0Qm91bmNlKHQqMi1kLCAwLCBjLCBkKSAqIC41ICsgYyouNSArIGI7XG5cdH0sXG5cdG91dEhhcmQ6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHR2YXIgdHMgPSAodC89ZCkqdDtcblx0XHR2YXIgdGMgPSB0cyp0O1xuXHRcdHJldHVybiBiICsgYyooMS43NSp0Yyp0cyArIC03LjQ0NzUqdHMqdHMgKyAxMi45OTUqdGMgKyAtMTEuNTk1KnRzICsgNS4yOTc1KnQpO1xuXHR9XG59O1xuXG5mdW5jdGlvbiBtYWluTG9vcCgpIHtcblx0aWYgKCFhbmltcy5sZW5ndGgpIHtcblx0XHQvLyBubyBhbmltYXRpb25zIGxlZnQsIHN0b3AgcG9sbGluZ1xuXHRcdHJldHVybjtcblx0fVxuXHRcblx0dmFyIG5vdyA9IHRpbWUoKTtcblx0dmFyIGZpbHRlcmVkID0gW10sIHR3ZWVuLCBvcHQ7XG5cblx0Ly8gZG8gbm90IHVzZSBBcnJheS5maWx0ZXIoKSBvZiBfLmZpbHRlcigpIGZ1bmN0aW9uXG5cdC8vIHNpbmNlIHR3ZWVu4oCZcyBjYWxsYmFja3MgY2FuIGFkZCBuZXcgYW5pbWF0aW9uc1xuXHQvLyBpbiBydW50aW1lLiBJbiB0aGlzIGNhc2UsIGZpbHRlciBmdW5jdGlvbiB3aWxsIGxvb3NlXG5cdC8vIG5ld2x5IGNyZWF0ZWQgYW5pbWF0aW9uXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbXMubGVuZ3RoOyBpKyspIHtcblx0XHR0d2VlbiA9IGFuaW1zW2ldO1xuXG5cdFx0aWYgKCF0d2Vlbi5hbmltYXRpbmcpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdG9wdCA9IHR3ZWVuLm9wdGlvbnM7XG5cblx0XHRpZiAodHdlZW4uc3RhcnRUaW1lID4gbm93KSB7XG5cdFx0XHRmaWx0ZXJlZC5wdXNoKHR3ZWVuKTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGlmICh0d2Vlbi5pbmZpbml0ZSkge1xuXHRcdFx0Ly8gb3B0LnN0ZXAuY2FsbCh0d2VlbiwgMCk7XG5cdFx0XHRvcHQuc3RlcCgwLCB0d2Vlbik7XG5cdFx0XHRmaWx0ZXJlZC5wdXNoKHR3ZWVuKTtcblx0XHR9IGVsc2UgaWYgKHR3ZWVuLnBvcyA9PT0gMSB8fCB0d2Vlbi5lbmRUaW1lIDw9IG5vdykge1xuXHRcdFx0dHdlZW4ucG9zID0gMTtcblx0XHRcdC8vIG9wdC5zdGVwLmNhbGwodHdlZW4sIG9wdC5yZXZlcnNlID8gMCA6IDEpO1xuXHRcdFx0b3B0LnN0ZXAob3B0LnJldmVyc2UgPyAwIDogMSwgdHdlZW4pO1xuXHRcdFx0dHdlZW4uc3RvcCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0d2Vlbi5wb3MgPSBvcHQuZWFzaW5nKG5vdyAtIHR3ZWVuLnN0YXJ0VGltZSwgMCwgMSwgb3B0LmR1cmF0aW9uKTtcblx0XHRcdC8vIG9wdC5zdGVwLmNhbGwodHdlZW4sIG9wdC5yZXZlcnNlID8gMSAtIHR3ZWVuLnBvcyA6IHR3ZWVuLnBvcyk7XG5cdFx0XHRvcHQuc3RlcChvcHQucmV2ZXJzZSA/IDEgLSB0d2Vlbi5wb3MgOiB0d2Vlbi5wb3MsIHR3ZWVuKTtcblx0XHRcdGZpbHRlcmVkLnB1c2godHdlZW4pO1xuXHRcdH1cdFx0XHRcblx0fVxuXG5cdGFuaW1zID0gZmlsdGVyZWQ7XG5cblx0aWYgKGFuaW1zLmxlbmd0aCkge1xuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShtYWluTG9vcCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gYWRkVG9RdWV1ZSh0d2Vlbikge1xuXHRpZiAoaW5kZXhPZihhbmltcywgdHdlZW4pID09IC0xKSB7XG5cdFx0YW5pbXMucHVzaCh0d2Vlbik7XG5cdFx0aWYgKGFuaW1zLmxlbmd0aCA9PSAxKSB7XG5cdFx0XHRtYWluTG9vcCgpO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVHdlZW4ge1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0dGhpcy5vcHRpb25zID0gZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cdFxuXHRcdHZhciBlID0gdGhpcy5vcHRpb25zLmVhc2luZztcblx0XHRpZiAodHlwZW9mIGUgPT0gJ3N0cmluZycpIHtcblx0XHRcdGlmICghZWFzaW5nc1tlXSlcblx0XHRcdFx0dGhyb3cgJ1Vua25vd24gXCInICsgZSArICdcIiBlYXNpbmcgZnVuY3Rpb24nO1xuXHRcdFx0dGhpcy5vcHRpb25zLmVhc2luZyA9IGVhc2luZ3NbZV07XG5cdFx0fVxuXHRcdFxuXHRcdGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmVhc2luZyAhPSAnZnVuY3Rpb24nKVxuXHRcdFx0dGhyb3cgJ0Vhc2luZyBzaG91bGQgYmUgYSBmdW5jdGlvbic7XG5cblx0XHR0aGlzLl9pZCA9ICd0dycgKyAoaWRDb3VudGVyKyspO1xuXHRcdFxuXHRcdGlmICh0aGlzLm9wdGlvbnMuYXV0b3N0YXJ0KSB7XG5cdFx0XHR0aGlzLnN0YXJ0KCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFN0YXJ0IGFuaW1hdGlvbiBmcm9tIHRoZSBiZWdpbm5pbmdcblx0ICovXG5cdHN0YXJ0KCkge1xuXHRcdGlmICghdGhpcy5hbmltYXRpbmcpIHtcblx0XHRcdHRoaXMucG9zID0gMDtcblx0XHRcdHRoaXMuc3RhcnRUaW1lID0gdGltZSgpICsgKHRoaXMub3B0aW9ucy5kZWxheSB8fCAwKTtcblx0XHRcdHRoaXMuaW5maW5pdGUgPSB0aGlzLm9wdGlvbnMuZHVyYXRpb24gPT09ICdpbmZpbml0ZSc7XG5cdFx0XHR0aGlzLmVuZFRpbWUgPSB0aGlzLmluZmluaXRlID8gMCA6IHRoaXMuc3RhcnRUaW1lICsgdGhpcy5vcHRpb25zLmR1cmF0aW9uO1xuXHRcdFx0dGhpcy5hbmltYXRpbmcgPSB0cnVlO1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0YXJ0KHRoaXMpO1xuXHRcdFx0YWRkVG9RdWV1ZSh0aGlzKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBTdG9wIGFuaW1hdGlvblxuXHQgKi9cblx0c3RvcCgpIHtcblx0XHRpZiAodGhpcy5hbmltYXRpbmcpIHtcblx0XHRcdHRoaXMuYW5pbWF0aW5nID0gZmFsc2U7XG5cdFx0XHRpZiAodGhpcy5vcHRpb25zLmNvbXBsZXRlKSB7XG5cdFx0XHRcdHRoaXMub3B0aW9ucy5jb21wbGV0ZSh0aGlzKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHR0b2dnbGUoKSB7XG5cdFx0aWYgKHRoaXMuYW5pbWF0aW5nKSB7XG5cdFx0XHR0aGlzLnN0b3AoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zdGFydCgpO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0d2VlbihvcHRpb25zKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ob3B0aW9ucyk7XG59XG5cbi8qKlxuICogR2V0IG9yIHNldCBkZWZhdWx0IHZhbHVlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWVcbiAqIEBwYXJhbSAge09iamVjdH0gdmFsdWVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG5hbWUsIHZhbHVlKSB7XG5cdGlmICh0eXBlb2YgdmFsdWUgIT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRkZWZhdWx0c1tuYW1lXSA9IHZhbHVlO1xuXHR9XG5cblx0cmV0dXJuIGRlZmF1bHRzW25hbWVdO1xufVxuXG4vKipcbiAqIFJldHVybnMgYWxsIGFjdGl2ZSBhbmltYXRpb24gb2JqZWN0cy5cbiAqIEZvciBkZWJ1Z2dpbmcgbW9zdGx5XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9hbGwoKSB7XG5cdHJldHVybiBhbmltcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3AoKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbXMubGVuZ3RoOyBpKyspIHtcblx0XHRhbmltc1tpXS5zdG9wKCk7XG5cdH1cblxuXHRhbmltcy5sZW5ndGggPSAwO1xufTsiLCIvKipcbiAqIFNob3dzIGZha2UgcHJvbXB0IGRpYWxvZyB3aXRoIGludGVyYWN0aXZlIHZhbHVlIHR5cGluZ1xuICovXG5pbXBvcnQgdHdlZW4gZnJvbSAnLi4vdmVuZG9yL3R3ZWVuJztcbmltcG9ydCB7ZXh0ZW5kLCB0ZW1wbGF0ZSwgaGFzM2QsIHByZWZpeGVkfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgKiBhcyBkb20gZnJvbSAnLi4vZG9tJztcblxudmFyIGRpYWxvZ0luc3RhbmNlID0gbnVsbDtcbnZhciBiZ0luc3RhbmNlID0gbnVsbDtcbnZhciBsYXN0VHdlZW4gPSBudWxsO1xuXG5leHBvcnQgdmFyIGFjdGlvbnMgPSB7XG5cdHByb21wdCh7b3B0aW9ucywgZWRpdG9yLCBuZXh0LCB0aW1lcn0pIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdHRpdGxlOiAnRW50ZXIgc29tZXRoaW5nJyxcblx0XHRcdGRlbGF5OiA4MCwgICAgICAgIC8vIGRlbGF5IGJldHdlZW4gY2hhcmFjdGVyIHR5cGluZ1xuXHRcdFx0dHlwZURlbGF5OiAxMDAwLCAgLy8gdGltZSB0byB3YWl0IGJlZm9yZSB0eXBpbmcgdGV4dFxuXHRcdFx0aGlkZURlbGF5OiAyMDAwICAgLy8gdGltZSB0byB3YWl0IGJlZm9yZSBoaWRpbmcgcHJvbXB0IGRpYWxvZ1xuXHRcdH0sIHdyYXAoJ3RleHQnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0c2hvdyhvcHRpb25zLnRpdGxlLCBlZGl0b3IuZ2V0V3JhcHBlckVsZW1lbnQoKSwgZnVuY3Rpb24oZGlhbG9nKSB7XG5cdFx0XHR0aW1lcihmdW5jdGlvbigpIHtcblx0XHRcdFx0dHlwZVRleHQoZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5Db2RlTWlycm9yLXByb21wdF9faW5wdXQnKSwgb3B0aW9ucywgdGltZXIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHRpbWVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aGlkZShuZXh0KTtcblx0XHRcdFx0XHR9LCBvcHRpb25zLmhpZGVEZWxheSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSwgb3B0aW9ucy50eXBlRGVsYXkpO1xuXHRcdH0pO1xuXHR9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2hvdyh0ZXh0LCB0YXJnZXQsIGNhbGxiYWNrKSB7XG5cdGhpZGUoKTtcblx0ZGlhbG9nSW5zdGFuY2UgPSBkb20udG9ET00oYDxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXByb21wdFwiPlxuXHRcdDxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXByb21wdF9fdGl0bGVcIj4ke3RleHR9PC9kaXY+XG5cdFx0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInByb21wdFwiIGNsYXNzPVwiQ29kZU1pcnJvci1wcm9tcHRfX2lucHV0XCIgcmVhZG9ubHk9XCJyZWFkb25seVwiIC8+XG5cdFx0PC9kaXY+YCk7XG5cdGJnSW5zdGFuY2UgPSBkb20udG9ET00oJzxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXByb21wdF9fc2hhZGVcIj48L2Rpdj4nKTtcblx0XG5cdHRhcmdldC5hcHBlbmRDaGlsZChkaWFsb2dJbnN0YW5jZSk7XG5cdHRhcmdldC5hcHBlbmRDaGlsZChiZ0luc3RhbmNlKTtcblx0XG5cdGFuaW1hdGVTaG93KGRpYWxvZ0luc3RhbmNlLCBiZ0luc3RhbmNlLCB7Y29tcGxldGU6IGNhbGxiYWNrfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaWRlKGNhbGxiYWNrKSB7XG5cdGlmIChkaWFsb2dJbnN0YW5jZSkge1xuXHRcdGlmIChsYXN0VHdlZW4pIHtcblx0XHRcdGxhc3RUd2Vlbi5zdG9wKCk7XG5cdFx0XHRsYXN0VHdlZW4gPSBudWxsO1xuXHRcdH1cblx0XHRhbmltYXRlSGlkZShkaWFsb2dJbnN0YW5jZSwgYmdJbnN0YW5jZSwge2NvbXBsZXRlOiBjYWxsYmFja30pO1xuXHRcdGRpYWxvZ0luc3RhbmNlID0gYmdJbnN0YW5jZSA9IG51bGw7XG5cdH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcblx0XHRjYWxsYmFjaygpO1xuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBkaWFsb2dcbiAqIEBwYXJhbSB7RWxlbWVudH0gYmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFxuICovXG5mdW5jdGlvbiBhbmltYXRlU2hvdyhkaWFsb2csIGJnLCBvcHRpb25zPXt9KSB7XG5cdHZhciBjc3NUcmFuc2Zvcm0gPSBwcmVmaXhlZCgndHJhbnNmb3JtJyk7XG5cdHZhciBkaWFsb2dTdHlsZSA9IGRpYWxvZy5zdHlsZTtcblx0dmFyIGJnU3R5bGUgPSBiZy5zdHlsZTtcblx0dmFyIGhlaWdodCA9IGRpYWxvZy5vZmZzZXRIZWlnaHQ7XG5cdHZhciB0bXBsID0gdGVtcGxhdGUoaGFzM2QgPyAndHJhbnNsYXRlM2QoMCwgPCU9IHBvcyAlPiwgMCknIDogJ3RyYW5zbGF0ZSgwLCA8JT0gcG9zICU+KScpO1xuXG5cdGJnU3R5bGUub3BhY2l0eSA9IDA7XG5cdHR3ZWVuKHtcblx0XHRkdXJhdGlvbjogMjAwLFxuXHRcdHN0ZXAocG9zKSB7XG5cdFx0XHRiZ1N0eWxlLm9wYWNpdHkgPSBwb3M7XG5cdFx0fVxuXHR9KTtcblx0XG5cdGRpYWxvZ1N0eWxlW2Nzc1RyYW5zZm9ybV0gPSB0bXBsKHtwb3M6IC1oZWlnaHR9KTtcblx0XG5cdHJldHVybiBsYXN0VHdlZW4gPSB0d2Vlbih7XG5cdFx0ZHVyYXRpb246IDQwMCxcblx0XHRlYXNpbmc6ICdvdXRDdWJpYycsXG5cdFx0c3RlcChwb3MpIHtcblx0XHRcdGRpYWxvZ1N0eWxlW2Nzc1RyYW5zZm9ybV0gPSB0bXBsKHtwb3M6ICgtaGVpZ2h0ICogKDEgLSBwb3MpKSArICdweCd9KTtcblx0XHR9LFxuXHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdGxhc3RUd2VlbiA9IG51bGw7XG5cdFx0XHRvcHRpb25zLmNvbXBsZXRlICYmIG9wdGlvbnMuY29tcGxldGUoZGlhbG9nLCBiZyk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGRpYWxvZ1xuICogQHBhcmFtIHtFbGVtZW50fSBiZ1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gYW5pbWF0ZUhpZGUoZGlhbG9nLCBiZywgb3B0aW9ucykge1xuXHR2YXIgZGlhbG9nU3R5bGUgPSBkaWFsb2cuc3R5bGU7XG5cdHZhciBiZ1N0eWxlID0gYmcuc3R5bGU7XG5cdHZhciBoZWlnaHQgPSBkaWFsb2cub2Zmc2V0SGVpZ2h0O1xuXHR2YXIgY3NzVHJhbnNmb3JtID0gcHJlZml4ZWQoJ3RyYW5zZm9ybScpO1xuXHR2YXIgdG1wbCA9IHRlbXBsYXRlKGhhczNkID8gJ3RyYW5zbGF0ZTNkKDAsIDwlPSBwb3MgJT4sIDApJyA6ICd0cmFuc2xhdGUoMCwgPCU9IHBvcyAlPiknKTtcblxuXHRyZXR1cm4gdHdlZW4oe1xuXHRcdGR1cmF0aW9uOiAyMDAsXG5cdFx0c3RlcChwb3MpIHtcblx0XHRcdGRpYWxvZ1N0eWxlW2Nzc1RyYW5zZm9ybV0gPSB0bXBsKHtwb3M6ICgtaGVpZ2h0ICogcG9zKSArICdweCd9KTtcblx0XHRcdGJnU3R5bGUub3BhY2l0eSA9IDEgLSBwb3M7XG5cdFx0fSxcblx0XHRjb21wbGV0ZSgpIHtcblx0XHRcdGRvbS5yZW1vdmUoW2RpYWxvZywgYmddKTtcblx0XHRcdG9wdGlvbnMuY29tcGxldGUgJiYgb3B0aW9ucy5jb21wbGV0ZShkaWFsb2csIGJnKTtcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB0eXBlVGV4dCh0YXJnZXQsIG9wdGlvbnMsIHRpbWVyLCBuZXh0KSB7XG5cdHZhciBjaGFycyA9IG9wdGlvbnMudGV4dC5zcGxpdCgnJyk7XG5cdHRpbWVyKGZ1bmN0aW9uIHBlcmZvcm0oKSB7XG5cdFx0dGFyZ2V0LnZhbHVlICs9IGNoYXJzLnNoaWZ0KCk7XG5cdFx0aWYgKGNoYXJzLmxlbmd0aCkge1xuXHRcdFx0dGltZXIocGVyZm9ybSwgb3B0aW9ucy5kZWxheSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5leHQoKTtcblx0XHR9XG5cdH0sIG9wdGlvbnMuZGVsYXkpO1xufVxuXG5mdW5jdGlvbiB3cmFwKGtleSwgdmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyB2YWx1ZSA6IHtba2V5XTogdmFsdWV9O1xufSIsIi8qKlxuICogRXh0ZW5zaW9uIHRoYXQgYWxsb3dzIGF1dGhvcnMgdG8gZGlzcGxheSBjb250ZXh0IHRvb2x0aXBzIGJvdW5kIHRvIHNwZWNpZmljXG4gKiBwb3NpdGlvbnNcbiAqL1xuaW1wb3J0IHR3ZWVuIGZyb20gJy4uL3ZlbmRvci90d2Vlbic7XG5pbXBvcnQge2V4dGVuZCwgcHJlZml4ZWQsIG1ha2VQb3MsIGhhczNkfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgKiBhcyBkb20gZnJvbSAnLi4vZG9tJztcblxudmFyIGluc3RhbmNlID0gbnVsbDtcbnZhciBsYXN0VHdlZW4gPSBudWxsO1xuXG5leHBvcnQgdmFyIGFsaWduRGVmYXVsdHMgPSB7XG5cdC8qKiBDU1Mgc2VsZWN0b3IgZm9yIGdldHRpbmcgcG9wdXAgdGFpbCAqL1xuXHR0YWlsQ2xhc3M6ICdDb2RlTWlycm9yLXRvb2x0aXBfX3RhaWwnLFxuXHRcblx0LyoqIENsYXNzIG5hbWUgZm9yIHN3aXRjaGluZyB0YWlsL3BvcHVwIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRhcmdldCBwb2ludCAqL1xuXHRiZWxvd0NsYXNzOiAnQ29kZU1pcnJvci10b29sdGlwX2JlbG93Jyxcblx0XG5cdC8qKiBNaW4gZGlzdGFuY2UgYmV0d2VlbiBwb3B1cCBhbmQgdmlld3BvcnQgKi9cblx0cG9wdXBNYXJnaW46IDUsXG5cdFxuXHQvKiogTWluIGRpc3RhbmNlIGJldHdlZW4gcG9wdXAgbGVmdC9yaWdodCBlZGdlIGFuZCBpdHMgdGFpbCAqL1xuXHR0YWlsTWFyZ2luOiAxMVxufTtcblxuZXhwb3J0IHZhciBhY3Rpb25zID0ge1xuXHQvKipcblx0ICogU2hvd3MgdG9vbHRpcCB3aXRoIGdpdmVuIHRleHQsIHdhaXQgZm9yIGBvcHRpb25zLndhaXRgXG5cdCAqIG1pbGxpc2Vjb25kcyB0aGVuIGhpZGVzIHRvb2x0aXBcblx0ICovXG5cdHRvb2x0aXAoe29wdGlvbnMsIGVkaXRvciwgcHJldiwgbmV4dCwgc3RvcCwgdGltZXJ9KSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHR3YWl0OiA0MDAwLCAgIC8vIHRpbWUgdG8gd2FpdCBiZWZvcmUgaGlkaW5nIHRvb2x0aXBcblx0XHRcdHBvczogJ2NhcmV0JyAgLy8gcG9zaXRpb24gd2hlcmUgdG9vbHRpcCBzaG91bGQgcG9pbnQgdG9cblx0XHR9LCB3cmFwKCd0ZXh0Jywgb3B0aW9ucykpO1xuXHRcdFxuXHRcdHZhciBwb3MgPSByZXNvbHZlUG9zaXRpb24ob3B0aW9ucy5wb3MsIGVkaXRvcik7XG5cdFx0c2hvdyh7dGV4dDogb3B0aW9ucy50ZXh0LCBwcmV2LCBuZXh0fSwgcG9zLCBmdW5jdGlvbigpIHtcblx0XHRcdC8vIHRpbWVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gXHRoaWRlKCgpID0+IHRpbWVyKG5leHQpKTtcblx0XHRcdC8vIH0sIG9wdGlvbnMud2FpdCk7XG5cblx0XHRcdGlmIChwcmV2KSB7XG5cdFx0XHRcdGluc3RhbmNlLnF1ZXJ5U2VsZWN0b3IoJy5Db2RlTWlycm9yLXRvb2x0aXBfX3ByZXYnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0XHRoaWRlKHByZXYpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHRcdGlmIChuZXh0KSB7XG5cdFx0XHRcdGluc3RhbmNlLnF1ZXJ5U2VsZWN0b3IoJy5Db2RlTWlycm9yLXRvb2x0aXBfX25leHQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0XHRoaWRlKG5leHQpXG5cdFx0XHRcdH0pXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpbnN0YW5jZS5xdWVyeVNlbGVjdG9yKCcuQ29kZU1pcnJvci10b29sdGlwX19maW5pc2gnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0XHRoaWRlKHN0b3ApXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFNob3dzIHRvb2x0aXAgd2l0aCBzcGVjaWZpZWQgdGV4dC4gVGhpcyB0b29sdGlwIHNob3VsZCBiZSBleHBsaWNpdGx5IFxuXHQgKiBoaWRkZW4gd2l0aCBgaGlkZVRvb2x0aXBgIGFjdGlvblxuXHQgKi9cblx0c2hvd1Rvb2x0aXAoe29wdGlvbnMsIGVkaXRvciwgcHJldiwgbmV4dCwgdGltZXJ9KSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHRwb3M6ICdjYXJldCcgIC8vIHBvc2l0aW9uIHdoZXJlIHRvb2x0aXAgc2hvdWxkIHBvaW50IHRvXG5cdFx0fSwgd3JhcCgndGV4dCcsIG9wdGlvbnMpKTtcblx0XHRcblx0XHRzaG93KHt0ZXh0OiBvcHRpb25zLnRleHQsIHByZXYsIG5leHR9LCByZXNvbHZlUG9zaXRpb24ob3B0aW9ucy5wb3MsIGVkaXRvcikpO1xuXHRcdG5leHQoKTtcblx0fSxcblxuXHQvKipcblx0ICogSGlkZXMgdG9vbHRpcCwgcHJldmlvdXNseSBzaG93biBieSAnc2hvd1Rvb2x0aXAnIGFjdGlvblxuXHQgKi9cblx0aGlkZVRvb2x0aXAoe29wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXJ9KSB7XG5cdFx0aGlkZShuZXh0KTtcblx0fVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3coe3RleHQsIHByZXYsIG5leHR9LCBwb3MsIGNhbGxiYWNrKSB7XG5cdGhpZGUoKTtcblx0XG5cdGxldCBodG1sID0gYDxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXRvb2x0aXBcIj5cblx0XHQ8ZGl2IGNsYXNzPVwiQ29kZU1pcnJvci10b29sdGlwX19jb250ZW50XCI+JHt0ZXh0fTwvZGl2PlxuXHRcdDxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXRvb2x0aXBfX3RhaWxcIj48L2Rpdj5gXG5cdFxuXHRpZiAocHJldikge1xuXHRcdGh0bWwgKz0gJzxidXR0b24gY2xhc3M9XCJDb2RlTWlycm9yLXRvb2x0aXBfX3ByZXZcIj5iYWNrd2FyZDwvYnV0dG9uPidcblx0fVxuXG5cdGlmIChuZXh0KSB7XG5cdFx0aHRtbCArPSAnPGJ1dHRvbiBjbGFzcz1cIkNvZGVNaXJyb3ItdG9vbHRpcF9fbmV4dFwiPmZvcndhcmQ8L2J1dHRvbj4nXG5cdH0gZWxzZSB7XG5cdFx0aHRtbCArPSAnPGJ1dHRvbiBjbGFzcz1cIkNvZGVNaXJyb3ItdG9vbHRpcF9fZmluaXNoXCI+ZmluaXNoPC9idXR0b24+J1xuXHR9XG5cblx0aHRtbCArPSAnPC9kaXY+J1xuXG5cdGluc3RhbmNlID0gZG9tLnRvRE9NKGh0bWwpXG5cblx0ZG9tLmNzcyhpbnN0YW5jZSwgcHJlZml4ZWQoJ3RyYW5zZm9ybScpLCAnc2NhbGUoMCknKTtcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbnN0YW5jZSk7XG5cblx0YWxpZ25Qb3B1cFdpdGhUYWlsKGluc3RhbmNlLCB7cG9zaXRpb246IHBvc30pO1xuXHRhbmltYXRlU2hvdyhpbnN0YW5jZSwge2NvbXBsZXRlOiBjYWxsYmFja30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZShjYWxsYmFjaykge1xuXHRpZiAoaW5zdGFuY2UpIHtcblx0XHRpZiAobGFzdFR3ZWVuKSB7XG5cdFx0XHRsYXN0VHdlZW4uc3RvcCgpO1xuXHRcdFx0bGFzdFR3ZWVuID0gbnVsbDtcblx0XHR9XG5cdFx0YW5pbWF0ZUhpZGUoaW5zdGFuY2UsIHtjb21wbGV0ZTogY2FsbGJhY2t9KTtcblx0XHRpbnN0YW5jZSA9IG51bGw7XG5cdH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcblx0XHRjYWxsYmFjaygpO1xuXHR9XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgZmluZHMgb3B0aW1hbCBwb3NpdGlvbiBvZiB0b29sdGlwIHBvcHVwIG9uIHBhZ2VcbiAqIGFuZCBhbGlnbnMgcG9wdXAgdGFpbCB3aXRoIHRoaXMgcG9zaXRpb25cbiAqIEBwYXJhbSB7RWxlbWVudH0gcG9wdXBcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGFsaWduUG9wdXBXaXRoVGFpbChwb3B1cCwgb3B0aW9ucz17fSkge1xuXHRvcHRpb25zID0gZXh0ZW5kKHt9LCBhbGlnbkRlZmF1bHRzLCBvcHRpb25zKTtcblx0XG5cdGRvbS5jc3MocG9wdXAsIHtcblx0XHRsZWZ0OiAwLFxuXHRcdHRvcDogMFxuXHR9KTtcblx0XG5cdHZhciB0YWlsID0gcG9wdXAucXVlcnlTZWxlY3RvcignLicgKyBvcHRpb25zLnRhaWxDbGFzcyk7XG5cdFxuXHR2YXIgcmVzdWx0WCA9IDAsIHJlc3VsdFkgPSAwO1xuXHR2YXIgcG9zID0gb3B0aW9ucy5wb3NpdGlvbjtcblx0dmFyIHZwID0gZG9tLnZpZXdwb3J0UmVjdCgpO1xuXHRcblx0dmFyIHdpZHRoID0gcG9wdXAub2Zmc2V0V2lkdGg7XG5cdHZhciBoZWlnaHQgPSBwb3B1cC5vZmZzZXRIZWlnaHQ7XG5cdFxuXHR2YXIgaXNUb3A7XG5cdFx0XG5cdC8vIGNhbGN1bGF0ZSBob3Jpem9udGFsIHBvc2l0aW9uXG5cdHJlc3VsdFggPSBNYXRoLm1pbih2cC53aWR0aCAtIHdpZHRoIC0gb3B0aW9ucy5wb3B1cE1hcmdpbiwgTWF0aC5tYXgob3B0aW9ucy5wb3B1cE1hcmdpbiwgcG9zLnggLSB2cC5sZWZ0IC0gd2lkdGggLyAyKSk7XG5cdFxuXHQvLyBjYWxjdWxhdGUgdmVydGljYWwgcG9zaXRpb25cblx0aWYgKGhlaWdodCArIHRhaWwub2Zmc2V0SGVpZ2h0ICsgb3B0aW9ucy5wb3B1cE1hcmdpbiArIHZwLnRvcCA8IHBvcy55KSB7XG5cdFx0Ly8gcGxhY2UgYWJvdmUgdGFyZ2V0IHBvc2l0aW9uXG5cdFx0cmVzdWx0WSA9IE1hdGgubWF4KDAsIHBvcy55IC0gaGVpZ2h0IC0gdGFpbC5vZmZzZXRIZWlnaHQpO1xuXHRcdGlzVG9wID0gdHJ1ZTtcblx0fSBlbHNlIHtcblx0XHQvLyBwbGFjZSBiZWxvdyB0YXJnZXQgcG9zaXRpb24gXG5cdFx0cmVzdWx0WSA9IHBvcy55ICsgdGFpbC5vZmZzZXRIZWlnaHQ7XG5cdFx0aXNUb3AgPSBmYWxzZTtcblx0fVxuXHRcblx0Ly8gY2FsY3VsYXRlIHRhaWwgcG9zaXRpb25cblx0dmFyIHRhaWxNaW5MZWZ0ID0gb3B0aW9ucy50YWlsTWFyZ2luO1xuXHR2YXIgdGFpbE1heExlZnQgPSB3aWR0aCAtIG9wdGlvbnMudGFpbE1hcmdpbjtcblx0dGFpbC5zdHlsZS5sZWZ0ID0gTWF0aC5taW4odGFpbE1heExlZnQsIE1hdGgubWF4KHRhaWxNaW5MZWZ0LCBwb3MueCAtIHJlc3VsdFggLSB2cC5sZWZ0KSkgKyAncHgnO1xuXHRcblx0ZG9tLmNzcyhwb3B1cCwge1xuXHRcdGxlZnQ6IHJlc3VsdFgsXG5cdFx0dG9wOiByZXN1bHRZXG5cdH0pO1xuXHRcblx0cG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShvcHRpb25zLmJlbG93Q2xhc3MsICFpc1RvcCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtqUXVlcnl9IGVsZW1cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFxuICovXG5mdW5jdGlvbiBhbmltYXRlU2hvdyhlbGVtLCBvcHRpb25zPXt9KSB7XG5cdG9wdGlvbnMgPSBleHRlbmQoe30sIGFsaWduRGVmYXVsdHMsIG9wdGlvbnMpO1xuXHR2YXIgY3NzT3JpZ2luID0gcHJlZml4ZWQoJ3RyYW5zZm9ybS1vcmlnaW4nKTtcblx0dmFyIGNzc1RyYW5zZm9ybSA9IHByZWZpeGVkKCd0cmFuc2Zvcm0nKTtcblx0dmFyIHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHR2YXIgdGFpbCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLicgKyBvcHRpb25zLnRhaWxDbGFzcyk7XG5cdHZhciB4T3JpZ2luID0gZG9tLmNzcyh0YWlsLCAnbGVmdCcpO1xuXHR2YXIgeU9yaWdpbiA9IHRhaWwub2Zmc2V0VG9wO1xuXHRpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9ucy5iZWxvd0NsYXNzKSkge1xuXHRcdHlPcmlnaW4gLT0gdGFpbC5vZmZzZXRIZWlnaHQ7XG5cdH1cblx0XG5cdHlPcmlnaW4gKz0gJ3B4JztcblxuXHRzdHlsZVtjc3NPcmlnaW5dID0geE9yaWdpbiArICcgJyArIHlPcmlnaW47XG5cdHZhciBwcmVmaXggPSBoYXMzZCA/ICd0cmFuc2xhdGVaKDApICcgOiAnJztcblx0XG5cdHJldHVybiBsYXN0VHdlZW4gPSB0d2Vlbih7XG5cdFx0ZHVyYXRpb246IDgwMCxcblx0XHRlYXNpbmc6ICdvdXRFbGFzdGljJyxcblx0XHRzdGVwKHBvcykge1xuXHRcdFx0c3R5bGVbY3NzVHJhbnNmb3JtXSA9IHByZWZpeCArICdzY2FsZSgnICsgcG9zICsgJyknO1xuXHRcdH0sXG5cdFx0Y29tcGxldGUoKSB7XG5cdFx0XHRzdHlsZVtjc3NUcmFuc2Zvcm1dID0gJ25vbmUnO1xuXHRcdFx0bGFzdFR3ZWVuID0gbnVsbDtcblx0XHRcdG9wdGlvbnMuY29tcGxldGUgJiYgb3B0aW9ucy5jb21wbGV0ZShlbGVtKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7alF1ZXJ5fSBlbGVtXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBhbmltYXRlSGlkZShlbGVtLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0cmV0dXJuIHR3ZWVuKHtcblx0XHRkdXJhdGlvbjogMjAwLFxuXHRcdGVhc2luZzogJ2xpbmVhcicsXG5cdFx0c3RlcDogZnVuY3Rpb24ocG9zKSB7XG5cdFx0XHRzdHlsZS5vcGFjaXR5ID0gKDEgLSBwb3MpO1xuXHRcdH0sXG5cdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0ZG9tLnJlbW92ZShlbGVtKTtcblx0XHRcdG9wdGlvbnMuY29tcGxldGUgJiYgb3B0aW9ucy5jb21wbGV0ZShlbGVtKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIFJlc29sdmVzIHBvc2l0aW9uIHdoZXJlIHRvb2x0aXAgc2hvdWxkIHBvaW50IHRvXG4gKiBAcGFyYW0ge09iamVjdH0gcG9zXG4gKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvclxuICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IHdpdGggPGNvZGU+eDwvY29kZT4gYW5kIDxjb2RlPnk8L2NvZGU+IFxuICogcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiByZXNvbHZlUG9zaXRpb24ocG9zLCBlZGl0b3IpIHtcblx0aWYgKHBvcyA9PT0gJ2NhcmV0Jykge1xuXHRcdC8vIGdldCBhYnNvbHV0ZSBwb3NpdGlvbiBvZiBjdXJyZW50IGNhcmV0IHBvc2l0aW9uXG5cdFx0cmV0dXJuIHNhbml0aXplQ2FyZXRQb3MoZWRpdG9yLmN1cnNvckNvb3Jkcyh0cnVlKSk7XG5cdH1cblxuXHRpZiAodHlwZW9mIHBvcyA9PT0gJ29iamVjdCcpIHtcblx0XHRpZiAoJ3gnIGluIHBvcyAmJiAneScgaW4gcG9zKSB7XG5cdFx0XHQvLyBwYXNzZWQgYWJzb2x1dGUgY29vcmRpbmF0ZXNcblx0XHRcdHJldHVybiBwb3M7XG5cdFx0fVxuXG5cdFx0aWYgKCdsZWZ0JyBpbiBwb3MgJiYgJ3RvcCcgaW4gcG9zKSB7XG5cdFx0XHQvLyBwYXNzZWQgYWJzb2x1dGUgY29vcmRpbmF0ZXNcblx0XHRcdHJldHVybiBzYW5pdGl6ZUNhcmV0UG9zKHBvcyk7XG5cdFx0fVxuXHR9XG5cdFxuXHRwb3MgPSBtYWtlUG9zKHBvcywgZWRpdG9yKTtcblx0cmV0dXJuIHNhbml0aXplQ2FyZXRQb3MoZWRpdG9yLmNoYXJDb29yZHMocG9zKSk7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplQ2FyZXRQb3MocG9zKSB7XG5cdGlmICgnbGVmdCcgaW4gcG9zKSB7XG5cdFx0cG9zLnggPSBwb3MubGVmdDtcblx0fVxuXG5cdGlmICgndG9wJyBpbiBwb3MpIHtcblx0XHRwb3MueSA9IHBvcy50b3A7XG5cdH1cblxuXHRyZXR1cm4gcG9zO1xufVxuXG5mdW5jdGlvbiB3cmFwKGtleSwgdmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyB2YWx1ZSA6IHtba2V5XTogdmFsdWV9O1xufSJdfQ=="}