{"version":3,"sources":["node_modules/browser-pack/_prelude.js","lib/actions.js","lib/dom.js","lib/movie.js","lib/scenario.js","lib/utils.js","lib/vendor/tween.js","lib/widgets/prompt.js","lib/widgets/tooltip.js"],"names":[],"mappings":"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","file":"movie.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","import {extend, makePos, getCursor} from './utils';\n\nvar actions = {\n\t/**\n\t * Type-in passed text into current editor char-by-char\n\t * @param {Object} options Current options\n\t * @param {CodeMirror} editor Editor instance where action should be \n\t * performed\n\t * @param {Function} next Function to call when action performance\n\t * is completed\n\t * @param {Function} timer Function that creates timer for delayed \n\t * execution. This timer will automatically delay execution when\n\t * scenario is paused and revert when played again \n\t */\n\ttype: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\ttext: '',  // text to type\n\t\t\tdelay: 60, // delay between character typing\n\t\t\tpos: null  // initial position where to start typing\n\t\t}, wrap('text', options));\n\t\t\n\t\tif (!options.text) {\n\t\t\tthrow new Error('No text provided for \"type\" action');\n\t\t}\n\t\t\n\t\tif (options.pos !== null) {\n\t\t\teditor.setCursor(makePos(options.pos, editor));\n\t\t}\n\t\t\n\t\tvar chars = options.text.split('');\n\t\t\n\t\ttimer(function perform() {\n\t\t\tvar ch = chars.shift();\n\t\t\teditor.replaceSelection(ch, 'end');\n\t\t\tif (chars.length) {\n\t\t\t\ttimer(perform, options.delay);\n\t\t\t} else {\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.delay);\n\t},\n\t\n\t/**\n\t * Wait for a specified timeout\n\t * @param options\n\t * @param editor\n\t * @param next\n\t * @param timer\n\t */\n\twait: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\ttimeout: 100\n\t\t}, wrap('timeout', options));\n\t\t\n\t\ttimer(next, parseInt(options.timeout, 10));\n\t},\n\t\n\t/**\n\t * Move caret to a specified position\n\t */\n\tmoveTo: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tdelay: 80,\n\t\t\timmediate: false // TODO: remove, use delay: 0 instead\n\t\t}, wrap('pos', options));\n\t\t\n\t\tif (typeof options.pos === 'undefined') {\n\t\t\tthrow new Error('No position specified for \"moveTo\" action');\n\t\t}\n\t\t\n\t\tvar curPos = getCursor(editor);\n\t\t// reset selection, if exists\n\t\teditor.setSelection(curPos, curPos);\n\t\tvar targetPos = makePos(options.pos, editor);\n\t\t\n\t\tif (options.immediate || !options.delay) {\n\t\t\teditor.setCursor(targetPos);\n\t\t\tnext();\n\t\t}\n\n\t\tvar deltaLine = targetPos.line - curPos.line;\n\t\tvar deltaChar = targetPos.ch - curPos.ch;\n\t\tvar steps = Math.max(deltaChar, deltaLine);\n\t\t// var stepLine = deltaLine / steps;\n\t\t// var stepChar = deltaChar / steps;\n\t\tvar stepLine = deltaLine < 0 ? -1 : 1;\n\t\tvar stepChar = deltaChar < 0 ? -1 : 1;\n\n\t\ttimer(function perform() {\n\t\t\tcurPos = getCursor(editor);\n\t\t\tif (steps > 0 && !(curPos.line == targetPos.line && curPos.ch == targetPos.ch)) {\n\n\t\t\t\tif (curPos.line != targetPos.line) {\n\t\t\t\t\tcurPos.line += stepLine;\n\t\t\t\t}\n\n\t\t\t\tif (curPos.ch != targetPos.ch) {\n\t\t\t\t\tcurPos.ch += stepChar;\n\t\t\t\t}\n\n\t\t\t\teditor.setCursor(curPos);\n\t\t\t\tsteps--;\n\t\t\t\ttimer(perform, options.delay);\n\t\t\t} else {\n\t\t\t\teditor.setCursor(targetPos);\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.delay);\n\t},\n\n\t/**\n\t * Similar to \"moveTo\" function but with immediate cursor position update\n\t */\n\tjumpTo: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tafterDelay: 200\n\t\t}, wrap('pos', options));\n\n\t\tif (typeof options.pos === 'undefined') {\n\t\t\tthrow new Error('No position specified for \"jumpTo\" action');\n\t\t}\n\t\t\n\t\teditor.setCursor(makePos(options.pos, editor));\n\t\ttimer(next, options.afterDelay);\n\t},\n\t\n\t/**\n\t * Executes predefined CodeMirror command\n\t * @param {Object} options\n\t * @param {CodeMirror} editor\n\t * @param {Function} next\n\t * @param {Function} timer\n\t */\n\trun: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tbeforeDelay: 500,\n\t\t\ttimes: 1\n\t\t}, wrap('command', options));\n\t\t\n\t\tvar times = options.times;\n\t\ttimer(function perform() {\n\t\t\tif (typeof options.command === 'function') {\n\t\t\t\toptions.command(editor, options);\n\t\t\t} else {\n\t\t\t\teditor.execCommand(options.command);\t\n\t\t\t}\n\t\t\t\n\t\t\tif (--times > 0) {\n\t\t\t\ttimer(perform, options.beforeDelay);\n\t\t\t} else {\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.beforeDelay);\n\t},\n\t\n\t/**\n\t * Creates selection for specified position\n\t * @param {Object} options\n\t * @param {CodeMirror} editor\n\t * @param {Function} next\n\t * @param {Function} timer\n\t */\n\tselect: function({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tfrom: 'caret'\n\t\t}, wrap('to', options));\n\t\t\n\t\tvar from = makePos(options.from, editor);\n\t\tvar to = makePos(options.to, editor);\n\t\teditor.setSelection(from, to);\n\t\tnext();\n\t}\n};\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}\n\nexport default actions;","import {toArray} from './utils';\n\nvar w3cCSS = document.defaultView && document.defaultView.getComputedStyle;\n\nexport function viewportRect() {\n\tvar body = document.body;\n\tvar docElem = document.documentElement;\n\tvar clientTop = docElem.clientTop  || body.clientTop  || 0;\n\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\tvar scrollTop  = window.pageYOffset || docElem.scrollTop  || body.scrollTop;\n\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\n\treturn {\n\t\ttop: scrollTop  - clientTop,\n\t\tleft: scrollLeft - clientLeft,\n\t\twidth: body.clientWidth || docElem.clientWidth,\n\t\theight: body.clientHeight || docElem.clientHeight\n\t};\n}\n\n/**\n * Removes element from parent\n * @param {Element} elem\n * @returns {Element}\n */\nexport function remove(elem) {\n\tar(elem).forEach(el => el.parentNode && el.parentNode.removeChild(el));\n\treturn elem;\n}\n\n/**\n * Renders string into DOM element\n * @param {String} str\n * @returns {Element}\n */\nexport function toDOM(str) {\n\tvar div = document.createElement('div');\n\tdiv.innerHTML = str;\n\treturn div.firstChild;\n}\n\n/**\n * Sets or retrieves CSS property value\n * @param {Element} elem\n * @param {String} prop\n * @param {String} val\n */\nexport function css(elem, prop, val) {\n\tif (typeof prop === 'string' && val == null) {\n\t\treturn getCSS(elem, prop);\n\t}\n\t\n\tif (typeof prop === 'string') {\n\t\tvar obj = {};\n\t\tobj[prop] = val;\n\t\tprop = obj;\n\t}\n\t\n\tsetCSS(elem, prop);\n}\n\nfunction ar(obj) {\n\tif (obj.length === +obj.length) {\n\t\treturn toArray(obj);\n\t}\n\t\n\treturn Array.isArray(obj) ? obj : [obj];\n}\n\nfunction toCamelCase(name) {\n\treturn name.replace(/\\-(\\w)/g, function(str, p1) {\n\t\treturn p1.toUpperCase();\n\t});\n}\n\n/**\n * Returns CSS property value of given element.\n * @author jQuery Team\n * @param {Element} elem\n * @param {String} name CSS property value\n */\nfunction getCSS(elem, name) {\n\tvar rnumpx = /^-?\\d+(?:px)?$/i,\n\t\trnum = /^-?\\d(?:\\.\\d+)?/,\n\t\trsuf = /\\d$/;\n\t\n\tvar nameCamel = toCamelCase(name);\n\t// If the property exists in style[], then it's been set\n\t// recently (and is current)\n\tif (elem.style[nameCamel]) {\n\t\treturn elem.style[nameCamel];\n\t} \n\t\t\n\tif (w3cCSS) {\n\t\tvar cs = window.getComputedStyle(elem, '');\n\t\treturn cs.getPropertyValue(name);\n\t}\n\t\n\tif (elem.currentStyle) {\n\t\tvar ret = elem.currentStyle[name] || elem.currentStyle[nameCamel];\n\t\tvar style = elem.style || elem;\n\t\t\n\t\t// From the awesome hack by Dean Edwards\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n\t\t\n\t\t// If we're not dealing with a regular pixel number\n\t\t// but a number that has a weird ending, we need to convert it to pixels\n\t\tif (!rnumpx.test(ret) && rnum.test(ret)) {\n\t\t\t// Remember the original values\n\t\t\tvar left = style.left, rsLeft = elem.runtimeStyle.left;\n\t\t\t\n\t\t\t// Put in the new values to get a computed value out\n\t\t\telem.runtimeStyle.left = elem.currentStyle.left;\n\t\t\tvar suffix = rsuf.test(ret) ? 'em' : '';\n\t\t\tstyle.left = nameCamel === 'fontSize' ? '1em' : (ret + suffix || 0);\n\t\t\tret = style.pixelLeft + 'px';\n\t\t\t\n\t\t\t// Revert the changed values\n\t\t\tstyle.left = left;\n\t\t\telem.runtimeStyle.left = rsLeft;\n\t\t}\n\t\t\n\t\treturn ret;\n\t}\n}\n\n/**\n * Sets CSS properties to given element\n * @param {Element} elem\n * @param {Object} params CSS properties to set\n */\nfunction setCSS(elem, params) {\n\tif (!elem) {\n\t\treturn;\n\t}\n\n\tvar numProps = {'line-height': 1, 'z-index': 1, opacity: 1};\n\tvar props = Object.keys(params).map(k => {\n\t\tvar v = params[k];\n\t\tvar name = k.replace(/([A-Z])/g, '-$1').toLowerCase();\n\t\treturn name + ':' + ((typeof v === 'number' && !(name in numProps)) ? v + 'px' : v);\n\t});\n\n\telem.style.cssText += ';' + props.join(';');\n}","/**\n * A high-level library interface for creating scenarios over textarea\n * element. The <code>CodeMirror.movie</code> takes reference to textarea\n * element (or its ID) and parses its content for initial content value,\n * scenario.\n */\nimport {parseJSON, extend, toArray} from './utils';\nimport Scenario from './scenario';\n\nvar ios = /AppleWebKit/.test(navigator.userAgent) && /Mobile\\/\\w+/.test(navigator.userAgent);\nvar mac = ios || /Mac/.test(navigator.platform);\n\nvar macCharMap = {\n\t'ctrl': '⌃',\n\t'control': '⌃',\n\t'cmd': '⌘',\n\t'shift': '⇧',\n\t'alt': '⌥',\n\t'enter': '⏎',\n\t'tab': '⇥',\n\t'left': '←',\n\t'right': '→',\n\t'up': '↑',\n\t'down': '↓'\n};\n\t\nvar pcCharMap = {\n\t'cmd': 'Ctrl',\n\t'control': 'Ctrl',\n\t'ctrl': 'Ctrl',\n\t'alt': 'Alt',\n\t'shift': 'Shift',\n\t'left': '←',\n\t'right': '→',\n\t'up': '↑',\n\t'down': '↓'\n};\n\nexport var defaultOptions = {\n\t/**\n\t * Automatically parse movie definition from textarea content. Setting\n\t * this property to <code>false</code> assumes that user wants to\n\t * explicitly provide movie data: initial value, scenario etc.\n\t */\n\tparse: true,\n\t\n\t/**\n\t * String or regexp used to separate sections of movie definition, e.g.\n\t * default value, scenario and editor options\n\t */\n\tsectionSeparator: '@@@',\n\t\n\t/** Regular expression to extract outline from scenario line */\n\toutlineSeparator: /\\s+:::\\s+(.+)$/,\n\t\n\t/** Automatically prettify keyboard shortcuts in outline */\n\tprettifyKeys: true,\n\t\n\t/** Strip parentheses from prettyfied keyboard shortcut definition */\n\tstripParentheses: false\n};\n\n/**\n * High-level function to create movie instance on textarea.\n * @param {CodeMirror}\n * @param {Element} target Reference to textarea, either <code>Element</code>\n * or string ID. It can also accept existing CodeMirror object.\n * @param {Object} movieOptions Movie options. See <code>defaultOptions</code>\n * for value reference\n * @param {Object} editorOptions Additional options passed to CodeMirror\n * editor initializer.\n */\nexport default function movie(CodeMirrorEditor, target, movieOptions={}, editorOptions={}) {\n\tsetupCodeMirror(CodeMirrorEditor);\n\n\tif (typeof target === 'string') {\n\t\ttarget = document.getElementById(target);\n\t}\n\n\tvar targetIsTextarea = target.nodeName.toLowerCase() === 'textarea';\n\t\n\tmovieOptions = extend({}, defaultOptions, movieOptions);\n\teditorOptions = extend({\n\t\ttheme: 'espresso',\n\t\tmode : 'text/html',\n\t\tindentWithTabs: true,\n\t\ttabSize: 4,\n\t\tlineNumbers : true,\n\t\tpreventCursorMovement: true\n\t}, editorOptions);\n\t\n\tvar initialValue = editorOptions.value || (targetIsTextarea ? target.value : target.getValue()) || '';\n\t\n\tif (targetIsTextarea && movieOptions.parse) {\n\t\textend(movieOptions, parseMovieDefinition(initialValue, movieOptions));\n\t\tinitialValue = movieOptions.value;\n\t\tif (movieOptions.editorOptions) {\n\t\t\textend(editorOptions, movieOptions.editorOptions);\n\t\t}\n\n\t\t// read CM options from given textarea\n\t\tvar cmAttr = /^data\\-cm\\-(.+)$/i;\n\t\ttoArray(target.attributes).forEach(function(attr) {\n\t\t\tvar m = attr.name.match(cmAttr);\n\t\t\tif (m) {\n\t\t\t\teditorOptions[m[1]] = attr.value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t// normalize line endings\n\tinitialValue = initialValue.replace(/\\r?\\n/g, '\\n');\n\t\n\t// locate initial caret position from | symbol\n\tvar initialPos = initialValue.indexOf('|');\n\t\n\tif (targetIsTextarea) {\n\t\ttarget.value = editorOptions.value = initialValue = initialValue.replace(/\\|/g, '');\n\t}\n\n\t// create editor instance if needed\n\tvar editor = targetIsTextarea ? CodeMirrorEditor.fromTextArea(target, editorOptions) : target;\n\n\tif (initialPos != -1) {\n\t\teditor.setCursor(editor.posFromIndex(initialPos));\n\t}\n\t\n\t// save initial data so we can revert to it later\n\teditor.__initial = {\n\t\tcontent: initialValue,\n\t\tpos: editor.getCursor(true)\n\t};\n\t\n\tvar wrapper = editor.getWrapperElement();\n\t\n\t// adjust height, if required\n\tif (editorOptions.height) {\n\t\twrapper.style.height = editorOptions.height + 'px';\n\t}\n\t\n\twrapper.className += ' CodeMirror-movie';\n\t\n\tvar sc = new Scenario(movieOptions.scenario, editor);\n\treturn sc;\n};\n\n/**\n * Prettyfies key bindings references in given string: formats it according\n * to current user’s platform. The key binding should be defined inside \n * parentheses, e.g. <code>(ctrl-alt-up)</code>\n * @param {String} str\n * @param {Object} options Transform options\n * @returns {String}\n */\nfunction prettifyKeyBindings(str, options) {\n\toptions = options || {};\n\tvar reKey = /ctrl|alt|shift|cmd/i;\n\tvar map = mac ? macCharMap : pcCharMap;\n\treturn str.replace(/\\((.+?)\\)/g, function(m, kb) {\n\t\tif (reKey.test(kb)) {\n\t\t\tvar parts = kb.toLowerCase()\n\t\t\t\t.split(/[\\-\\+]/)\n\t\t\t\t.map(key => map[key.toLowerCase()] || key.toUpperCase());\n\t\t\t\n\t\t\tm = parts.join(mac ? '' : '+');\n\t\t\tif (!options.stripParentheses) {\n\t\t\t\tm = '(' + m + ')';\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn m;\n\t});\n}\n\nfunction readLines(text) {\n\t// IE fails to split string by regexp, \n\t// need to normalize newlines first\n\tvar nl = '\\n';\n\tvar lines = (text || '')\n\t\t.replace(/\\r\\n/g, nl)\n\t\t.replace(/\\n\\r/g, nl)\n\t\t.replace(/\\r/g, nl)\n\t\t.split(nl);\n\n\treturn lines.filter(Boolean);\n}\n\nfunction unescape(text) {\n\tvar replacements = {\n\t\t'&lt;':  '<',\n\t\t'&gt;':  '>',\n\t\t'&amp;': '&'\n\t};\n\n\treturn text.replace(/&(lt|gt|amp);/g, function(str, p1) {\n\t\treturn replacements[str] || str;\n\t});\n}\n\n/**\n * Extracts initial content and scenario from given string\n * @param {String} text\n * @param {Object} options\n */\nfunction parseMovieDefinition(text, options={}) {\n\toptions = extend({}, defaultOptions, options || {});\n\tvar parts = text.split(options.sectionSeparator);\n\n\t// parse scenario\n\tvar reDef = /^(\\w+)\\s*:\\s*(.+)$/;\n\tvar scenario = [];\n\tvar editorOptions = {};\n\n\tvar skipComment = line => line.charAt(0) !== '#';\n\n\t// read movie definition\n\treadLines(parts[1]).filter(skipComment).forEach(function(line) {\n\t\t// do we have outline definition here?\n\t\tline = line.replace(options.outlineSeparator, '');\n\n\t\tvar sd = line.match(reDef);\n\t\tif (!sd) {\n\t\t\treturn scenario.push(line.trim());\n\t\t}\n\t\t\t\n\n\t\tif (sd[2].charAt(0) === '{') {\n\t\t\tvar obj = {};\n\t\t\tobj[sd[1]] = parseJSON(unescape(sd[2]));\n\t\t\treturn scenario.push(obj);\n\t\t}\n\n\t\tscenario.push(sd[1] + ':' + unescape(sd[2]));\n\t});\n\n\t// read editor options\n\tif (parts[2]) {\n\t\treadLines(parts[2]).filter(skipComment).forEach(function(line) {\n\t\t\tvar sd = line.match(reDef);\n\t\t\tif (sd) {\n\t\t\t\teditorOptions[sd[1]] = sd[2];\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tvalue: unescape(parts[0].trim()),\n\t\tscenario: scenario,\n\t\teditorOptions: editorOptions\n\t};\n}\n\nfunction setupCodeMirror(CodeMirrorEditor) {\n\tif ('preventCursorMovement' in CodeMirrorEditor.defaults) {\n\t\treturn;\n\t}\n\n\tCodeMirrorEditor.defineOption('preventCursorMovement', false, cm => {\n\t\tvar handler = (cm, event) => cm.getOption('readOnly') && event.preventDefault();\n\t\tcm.on('keydown', handler);\n\t\tcm.on('mousedown', handler);\n\t});\n}\n","import commonActions from './actions';\nimport {actions as prompt} from './widgets/prompt';\nimport {actions as tooltip} from './widgets/tooltip';\nimport {extend} from './utils';\n\nvar actionsDefinition = extend({}, commonActions, prompt, tooltip);\n\nvar STATE_IDLE  = 'idle';\nvar STATE_PLAY  = 'play';\nvar STATE_PAUSE = 'pause';\n\n// Regular expression used to split event strings\nvar eventSplitter = /\\s+/;\n\nexport var defaultOptions = {\n\tbeforeDelay: 1000,\n\tafterDelay: 1000\n};\n\n/**\n * @param {Object} actions Actions scenario\n * @param {Object} data Initial content (<code>String</code>) or editor\n * instance (<code>CodeMirror</code>)\n */\nexport default class Scenario {\n\tconstructor(actions, data) {\n\t\tthis._actions = actions;\n\t\tthis._editor = null;\n\t\tthis._state = STATE_IDLE;\n\t\tthis._timerQueue = [];\n\t\t\n\t\tif (data && 'getValue' in data) {\n\t\t\tthis._editor = data;\n\t\t}\n\t\t\n\t\tvar ed = this._editor;\n\t\tif (ed && !ed.__initial) {\n\t\t\ted.__initial = {\n\t\t\t\tcontent: ed.getValue(),\n\t\t\t\tpos: ed.getCursor(true)\n\t\t\t};\n\t\t}\n\t}\n\n\t_setup(editor) {\n\t\tif (!editor && this._editor) {\n\t\t\teditor = this._editor;\n\t\t}\n\t\t\n\t\teditor.execCommand('revert');\n\t\treturn editor;\n\t}\n\t\n\t/**\n\t * Play current scenario\n\t * @param {CodeMirror} editor Editor instance where on which scenario \n\t * should be played\n\t * @memberOf Scenario\n\t */\n\tplay(editor) {\n\t\tif (this._state === STATE_PLAY) {\n\t\t\t// already playing\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this._state === STATE_PAUSE) {\n\t\t\t// revert from paused state\n\t\t\teditor = editor || this._editor;\n\t\t\teditor.focus();\n\t\t\tvar timerObj = null;\n\t\t\twhile (timerObj = this._timerQueue.shift()) {\n\t\t\t\trequestTimer(timerObj.fn, timerObj.delay);\n\t\t\t}\n\t\t\t\n\t\t\tthis._state = STATE_PLAY;\n\t\t\tthis.trigger('resume');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis._editor = editor = this._setup(editor);\n\t\teditor.focus();\n\t\t\n\t\tvar timer = this.requestTimer.bind(this);\n\n\t\tconsole.log('raw actions: ', this._actions)\n\n\t\tvar goto = actionIx => {\n\t\t\tif (actionIx >= this._actions.length) {\n\t\t\t\treturn timer(() => {\n\t\t\t\t\tthis.stop();\n\t\t\t\t}, defaultOptions.afterDelay);\n\t\t\t}\n\n\t\t\tthis.trigger('action', actionIx);\n\n\t\t\tvar action = parseActionCall(this._actions[actionIx]);\n\n\t\t\t// for (const i = actionIx - 1; i >= 0; i--) {\n\t\t\t// \tif (th)\n\t\t\t// }\n\n\t\t\tconsole.log('action: ', action)\n\t\t\t\n\t\t\tif (action.name in actionsDefinition) {\n\t\t\t\tactionsDefinition[action.name]({\n\t\t\t\t\toptions: action.options,\n\t\t\t\t\teditor,\n\t\t\t\t\tnext: () => goto(actionIx + 1),\n\t\t\t\t\tprev: () => goto(actionIx - 1),\n\t\t\t\t\ttimer\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthrow new Error('No such action: ' + action.name);\n\t\t\t}\n\t\t};\n\n\t\tthis._state = STATE_PLAY;\n\t\tthis._editor.setOption('readOnly', true);\n\t\tthis.trigger('play');\n\t\ttimer(() => goto(0), defaultOptions.beforeDelay);\n\t}\n\t\n\t/**\n\t * Pause current scenario playback. It can be restored with \n\t * <code>play()</code> method call \n\t */\n\tpause() {\n\t\tthis._state = STATE_PAUSE;\n\t\tthis.trigger('pause');\n\t}\n\t\n\t/**\n\t * Stops playback of current scenario\n\t */\n\tstop() {\n\t\tif (this._state !== STATE_IDLE) {\n\t\t\tthis._state = STATE_IDLE;\n\t\t\tthis._timerQueue.length = 0;\n\t\t\tthis._editor.setOption('readOnly', false);\n\t\t\tthis.trigger('stop');\n\t\t}\n\t}\n\t\n\t/**\n\t * Returns current playback state\n\t * @return {String}\n\t */\n\tget state() {\n\t\treturn this._state;\n\t}\n\t\n\t/**\n\t * Toggle playback of movie scenario\n\t */\n\ttoggle() {\n\t\tif (this._state === STATE_PLAY) {\n\t\t\tthis.pause();\n\t\t} else {\n\t\t\tthis.play();\n\t\t}\n\t}\n\t\n\trequestTimer(fn, delay) {\n\t\tif (this._state !== STATE_PLAY) {\n\t\t\t// save function call into a queue till next 'play()' call\n\t\t\tthis._timerQueue.push({\n\t\t\t\tfn: fn,\n\t\t\t\tdelay: delay\n\t\t\t});\n\t\t} else {\n\t\t\treturn requestTimer(fn, delay);\n\t\t}\n\t}\n\t\n\t// borrowed from Backbone\n\t/**\n\t * Bind one or more space separated events, `events`, to a `callback`\n\t * function. Passing `\"all\"` will bind the callback to all events fired.\n\t * @param {String} events\n\t * @param {Function} callback\n\t * @param {Object} context\n\t * @memberOf eventDispatcher\n\t */\n\ton(events, callback, context) {\n\t\tvar calls, event, node, tail, list;\n\t\tif (!callback) {\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tevents = events.split(eventSplitter);\n\t\tcalls = this._callbacks || (this._callbacks = {});\n\n\t\t// Create an immutable callback list, allowing traversal during\n\t\t// modification.  The tail is an empty object that will always be used\n\t\t// as the next node.\n\t\twhile (event = events.shift()) {\n\t\t\tlist = calls[event];\n\t\t\tnode = list ? list.tail : {};\n\t\t\tnode.next = tail = {};\n\t\t\tnode.context = context;\n\t\t\tnode.callback = callback;\n\t\t\tcalls[event] = {\n\t\t\t\ttail : tail,\n\t\t\t\tnext : list ? list.next : node\n\t\t\t};\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Remove one or many callbacks. If `context` is null, removes all\n\t * callbacks with that function. If `callback` is null, removes all\n\t * callbacks for the event. If `events` is null, removes all bound\n\t * callbacks for all events.\n\t * @param {String} events\n\t * @param {Function} callback\n\t * @param {Object} context\n\t */\n\toff(events, callback, context) {\n\t\tvar event, calls, node, tail, cb, ctx;\n\n\t\t// No events, or removing *all* events.\n\t\tif (!(calls = this._callbacks)) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (!(events || callback || context)) {\n\t\t\tdelete this._callbacks;\n\t\t\treturn this;\n\t\t}\n\n\t\t// Loop through the listed events and contexts, splicing them out of the\n\t\t// linked list of callbacks if appropriate.\n\t\tevents = events ? events.split(eventSplitter) : Object.keys(calls);\n\t\twhile (event = events.shift()) {\n\t\t\tnode = calls[event];\n\t\t\tdelete calls[event];\n\t\t\tif (!node || !(callback || context)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\t// Create a new list, omitting the indicated callbacks.\n\t\t\ttail = node.tail;\n\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\tcb = node.callback;\n\t\t\t\tctx = node.context;\n\t\t\t\tif ((callback && cb !== callback) || (context && ctx !== context)) {\n\t\t\t\t\tthis.on(event, cb, ctx);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Trigger one or many events, firing all bound callbacks. Callbacks are\n\t * passed the same arguments as `trigger` is, apart from the event name\n\t * (unless you're listening on `\"all\"`, which will cause your callback\n\t * to receive the true name of the event as the first argument).\n\t * @param {String} events\n\t */\n\ttrigger(events, ...rest) {\n\t\tvar event, node, calls, tail, args, all;\n\t\tif (!(calls = this._callbacks)) {\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tall = calls.all;\n\t\tevents = events.split(eventSplitter);\n\n\t\t// For each event, walk through the linked list of callbacks twice,\n\t\t// first to trigger the event, then to trigger any `\"all\"` callbacks.\n\t\twhile (event = events.shift()) {\n\t\t\tif (node = calls[event]) {\n\t\t\t\ttail = node.tail;\n\t\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\t\tnode.callback.apply(node.context || this, rest);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (node = all) {\n\t\t\t\ttail = node.tail;\n\t\t\t\targs = [ event ].concat(rest);\n\t\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\t\tnode.callback.apply(node.context || this, args);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n};\n\n/**\n * Parses action call from string\n * @param {String} data\n * @returns {Object}\n */\nfunction parseActionCall(data) {\n\tif (typeof data === 'string') {\n\t\tvar parts = data.split(':');\n\t\treturn {\n\t\t\tname: parts.shift(),\n\t\t\toptions: parts.join(':')\n\t\t};\n\t} else {\n\t\tvar name = Object.keys(data)[0];\n\t\treturn {\n\t\t\tname: name,\n\t\t\toptions: data[name]\n\t\t};\n\t}\n}\n\nfunction requestTimer(fn, delay) {\n\tif (!delay) {\n\t\tfn();\n\t} else {\n\t\treturn setTimeout(fn, delay);\n\t}\n}","var propCache = {};\n\n// detect CSS 3D Transforms for smoother animations \nexport var has3d = (function() {\n\tvar el = document.createElement('div');\n\tvar cssTransform = prefixed('transform');\n\tif (cssTransform) {\n\t\tel.style[cssTransform] = 'translateZ(0)';\n\t\treturn (/translatez/i).test(el.style[cssTransform]); \n\t}\n\t\n\treturn false;\n})();\n\nexport function extend(obj, ...args) {\n\targs.forEach(a => {\n\t\tif (typeof a === 'object') {\n\t\t\tObject.keys(a).forEach(key => obj[key] = a[key]);\n\t\t}\n\t});\n\treturn obj;\n}\n\nexport function toArray(obj, ix=0) {\n\treturn Array.prototype.slice.call(obj, ix);\n}\n\n/**\n * Returns prefixed (if required) CSS property name\n * @param  {String} prop\n * @return {String}\n */\nexport function prefixed(prop) {\n\tif (prop in propCache) {\n\t\treturn propCache[prop];\n\t}\n\n\tvar el = document.createElement('div');\n\tvar style = el.style;\n\n\tvar prefixes = ['o', 'ms', 'moz', 'webkit'];\n\tvar props = [prop];\n\tvar capitalize = function(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.substr(1);\n\t};\n\n\tprop = prop.replace(/\\-([a-z])/g, function(str, ch) {\n\t\treturn ch.toUpperCase();\n\t});\n\n\tvar capProp = capitalize(prop);\n\tprefixes.forEach(function(prefix) {\n\t\tprops.push(prefix + capProp, capitalize(prefix) + capProp);\n\t});\n\n\tfor (var i = 0, il = props.length; i < il; i++) {\n\t\tif (props[i] in style) {\n\t\t\treturn propCache[prop] = props[i];\n\t\t}\n\t}\n\n\treturn propCache[prop] = null;\n}\n\nexport function posObj(obj) {\n\treturn {\n\t\tline: obj.line,\n\t\tch: obj.ch\n\t};\n}\n\nexport function getCursor(editor, start='from') {\n\treturn posObj(editor.getCursor(start));\n}\n\n/**\n * Helper function that produces <code>{line, ch}</code> object from\n * passed argument\n * @param {Object} pos\n * @param {CodeMirror} editor\n * @returns {Object}\n */\nexport function makePos(pos, editor) {\n\tif (pos === 'caret') {\n\t\treturn getCursor(editor);\n\t}\n\n\tif (typeof pos === 'string') {\n\t\tif (~pos.indexOf(':')) {\n\t\t\tlet parts = pos.split(':');\n\t\t\treturn {\n\t\t\t\tline: +parts[0],\n\t\t\t\tch: +parts[1]\n\t\t\t};\n\t\t}\n\t\t\n\t\tpos = +pos;\n\t}\n\t\n\tif (typeof pos === 'number') {\n\t\treturn posObj(editor.posFromIndex(pos));\n\t}\n\t\n\treturn posObj(pos);\n}\n\nexport function template(tmpl, data) {\n\tvar fn = data => tmpl.replace(/<%([-=])?\\s*([\\w\\-]+)\\s*%>/g, (str, op, key) => data[key.trim()]);\n\treturn data ? fn(data) : fn;\n}\n\nexport function find(arr, iter) {\n\tvar found;\n\tarr.some((item, i, arr) => {\n\t\tif (iter(item, i, arr)) {\n\t\t\treturn found = item;\n\t\t}\n\t});\n\treturn found;\n}\n\n/**\n * Relaxed JSON parser.\n * @param {String} text\n * @returns {Object} \n */\nexport function parseJSON(text) {\n\ttry {\n\t\treturn (new Function('return ' + text))();\n\t} catch(e) {\n\t\treturn {};\n\t}\n}","var global = window;\nvar time = Date.now \n\t? function() {return Date.now();}\n\t: function() {return +new Date;};\n\nvar indexOf = 'indexOf' in Array.prototype\n\t? function(array, value) {return array.indexOf(value);}\n\t: function(array, value) {\n\t\tfor (var i = 0, il = array.length; i < il; i++) {\n\t\t\tif (array[i] === value) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n\nfunction extend(obj) {\n\tfor (var i = 1, il = arguments.length, source; i < il; i++) {\n\t\tsource = arguments[i];\n\t\tif (source) {\n\t\t\tfor (var prop in source) {\n\t\t\t\tobj[prop] = source[prop];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn obj;\n}\n\n/**\n * requestAnimationFrame polyfill by Erik Möller\n * fixes from Paul Irish and Tino Zijdel\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n */\n(function() {\n\tvar lastTime = 0;\n\tvar vendors = [ 'ms', 'moz', 'webkit', 'o' ];\n\tfor (var x = 0; x < vendors.length && !global.requestAnimationFrame; ++x) {\n\t\tglobal.requestAnimationFrame = global[vendors[x] + 'RequestAnimationFrame'];\n\t\tglobal.cancelAnimationFrame = global[vendors[x] + 'CancelAnimationFrame']\n\t\t\t\t|| global[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n\t\n\tif (!global.requestAnimationFrame)\n\t\tglobal.requestAnimationFrame = function(callback, element) {\n\t\t\tvar currTime = time();\n\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\tvar id = global.setTimeout(function() {\n\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t}, timeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\n\tif (!global.cancelAnimationFrame)\n\t\tglobal.cancelAnimationFrame = function(id) {\n\t\t\tclearTimeout(id);\n\t\t};\n}());\n\n\nvar dummyFn = function() {};\nvar anims = [];\nvar idCounter = 0;\n\nvar defaults = {\n\tduration: 500, // ms\n\tdelay: 0,\n\teasing: 'linear',\n\tstart: dummyFn,\n\tstep: dummyFn,\n\tcomplete: dummyFn,\n\tautostart: true,\n\treverse: false\n};\n\nexport var easings = {\n\tlinear: function(t, b, c, d) {\n\t\treturn c * t / d + b;\n\t},\n\tinQuad: function(t, b, c, d) {\n\t\treturn c*(t/=d)*t + b;\n\t},\n\toutQuad: function(t, b, c, d) {\n\t\treturn -c *(t/=d)*(t-2) + b;\n\t},\n\tinOutQuad: function(t, b, c, d) {\n\t\tif((t/=d/2) < 1) return c/2*t*t + b;\n\t\treturn -c/2 *((--t)*(t-2) - 1) + b;\n\t},\n\tinCubic: function(t, b, c, d) {\n\t\treturn c*(t/=d)*t*t + b;\n\t},\n\toutCubic: function(t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t + 1) + b;\n\t},\n\tinOutCubic: function(t, b, c, d) {\n\t\tif((t/=d/2) < 1) return c/2*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t + 2) + b;\n\t},\n\tinExpo: function(t, b, c, d) {\n\t\treturn(t==0) ? b : c * Math.pow(2, 10 *(t/d - 1)) + b - c * 0.001;\n\t},\n\toutExpo: function(t, b, c, d) {\n\t\treturn(t==d) ? b+c : c * 1.001 *(-Math.pow(2, -10 * t/d) + 1) + b;\n\t},\n\tinOutExpo: function(t, b, c, d) {\n\t\tif(t==0) return b;\n\t\tif(t==d) return b+c;\n\t\tif((t/=d/2) < 1) return c/2 * Math.pow(2, 10 *(t - 1)) + b - c * 0.0005;\n\t\treturn c/2 * 1.0005 *(-Math.pow(2, -10 * --t) + 2) + b;\n\t},\n\tinElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\treturn -(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n\t},\n\toutElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\treturn(a*Math.pow(2,-10*t) * Math.sin((t*d-s)*(2*Math.PI)/p ) + c + b);\n\t},\n\tinOutElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b; \n\t\tif((t/=d/2)==2) return b+c;\n\t\tif(!p) p=d*(.3*1.5);\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; }       else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\tif(t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n\t\treturn a*Math.pow(2,-10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n\t},\n\tinBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\treturn c*(t/=d)*t*((s+1)*t - s) + b;\n\t},\n\toutBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\treturn c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n\t},\n\tinOutBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\tif((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n\t\treturn c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n\t},\n\tinBounce: function(t, b, c, d) {\n\t\treturn c - this.outBounce(t, d-t, 0, c, d) + b;\n\t},\n\toutBounce: function(t, b, c, d) {\n\t\tif((t/=d) <(1/2.75)) {\n\t\t\treturn c*(7.5625*t*t) + b;\n\t\t} else if(t <(2/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n\t\t} else if(t <(2.5/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n\t\t} else {\n\t\t\treturn c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n\t\t}\n\t},\n\tinOutBounce: function(t, b, c, d) {\n\t\tif(t < d/2) return this.inBounce(t*2, 0, c, d) * .5 + b;\n\t\treturn this.outBounce(t*2-d, 0, c, d) * .5 + c*.5 + b;\n\t},\n\toutHard: function(t, b, c, d) {\n\t\tvar ts = (t/=d)*t;\n\t\tvar tc = ts*t;\n\t\treturn b + c*(1.75*tc*ts + -7.4475*ts*ts + 12.995*tc + -11.595*ts + 5.2975*t);\n\t}\n};\n\nfunction mainLoop() {\n\tif (!anims.length) {\n\t\t// no animations left, stop polling\n\t\treturn;\n\t}\n\t\n\tvar now = time();\n\tvar filtered = [], tween, opt;\n\n\t// do not use Array.filter() of _.filter() function\n\t// since tween’s callbacks can add new animations\n\t// in runtime. In this case, filter function will loose\n\t// newly created animation\n\tfor (var i = 0; i < anims.length; i++) {\n\t\ttween = anims[i];\n\n\t\tif (!tween.animating) {\n\t\t\tcontinue;\n\t\t}\n\n\t\topt = tween.options;\n\n\t\tif (tween.startTime > now) {\n\t\t\tfiltered.push(tween);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (tween.infinite) {\n\t\t\t// opt.step.call(tween, 0);\n\t\t\topt.step(0, tween);\n\t\t\tfiltered.push(tween);\n\t\t} else if (tween.pos === 1 || tween.endTime <= now) {\n\t\t\ttween.pos = 1;\n\t\t\t// opt.step.call(tween, opt.reverse ? 0 : 1);\n\t\t\topt.step(opt.reverse ? 0 : 1, tween);\n\t\t\ttween.stop();\n\t\t} else {\n\t\t\ttween.pos = opt.easing(now - tween.startTime, 0, 1, opt.duration);\n\t\t\t// opt.step.call(tween, opt.reverse ? 1 - tween.pos : tween.pos);\n\t\t\topt.step(opt.reverse ? 1 - tween.pos : tween.pos, tween);\n\t\t\tfiltered.push(tween);\n\t\t}\t\t\t\n\t}\n\n\tanims = filtered;\n\n\tif (anims.length) {\n\t\trequestAnimationFrame(mainLoop);\n\t}\n}\n\nfunction addToQueue(tween) {\n\tif (indexOf(anims, tween) == -1) {\n\t\tanims.push(tween);\n\t\tif (anims.length == 1) {\n\t\t\tmainLoop();\n\t\t}\n\t}\n}\n\nexport class Tween {\n\tconstructor(options) {\n\t\tthis.options = extend({}, defaults, options);\n\t\n\t\tvar e = this.options.easing;\n\t\tif (typeof e == 'string') {\n\t\t\tif (!easings[e])\n\t\t\t\tthrow 'Unknown \"' + e + '\" easing function';\n\t\t\tthis.options.easing = easings[e];\n\t\t}\n\t\t\n\t\tif (typeof this.options.easing != 'function')\n\t\t\tthrow 'Easing should be a function';\n\n\t\tthis._id = 'tw' + (idCounter++);\n\t\t\n\t\tif (this.options.autostart) {\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\t/**\n\t * Start animation from the beginning\n\t */\n\tstart() {\n\t\tif (!this.animating) {\n\t\t\tthis.pos = 0;\n\t\t\tthis.startTime = time() + (this.options.delay || 0);\n\t\t\tthis.infinite = this.options.duration === 'infinite';\n\t\t\tthis.endTime = this.infinite ? 0 : this.startTime + this.options.duration;\n\t\t\tthis.animating = true;\n\t\t\tthis.options.start(this);\n\t\t\taddToQueue(this);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Stop animation\n\t */\n\tstop() {\n\t\tif (this.animating) {\n\t\t\tthis.animating = false;\n\t\t\tif (this.options.complete) {\n\t\t\t\tthis.options.complete(this);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\ttoggle() {\n\t\tif (this.animating) {\n\t\t\tthis.stop();\n\t\t} else {\n\t\t\tthis.start();\n\t\t}\n\t}\n}\n\nexport default function tween(options) {\n\treturn new Tween(options);\n}\n\n/**\n * Get or set default value\n * @param  {String} name\n * @param  {Object} value\n * @return {Object}\n */\nexport function defaults(name, value) {\n\tif (typeof value != 'undefined') {\n\t\tdefaults[name] = value;\n\t}\n\n\treturn defaults[name];\n}\n\n/**\n * Returns all active animation objects.\n * For debugging mostly\n * @return {Array}\n */\nexport function _all() {\n\treturn anims;\n}\n\nexport function stop() {\n\tfor (var i = 0; i < anims.length; i++) {\n\t\tanims[i].stop();\n\t}\n\n\tanims.length = 0;\n};","/**\n * Shows fake prompt dialog with interactive value typing\n */\nimport tween from '../vendor/tween';\nimport {extend, template, has3d, prefixed} from '../utils';\nimport * as dom from '../dom';\n\nvar dialogInstance = null;\nvar bgInstance = null;\nvar lastTween = null;\n\nexport var actions = {\n\tprompt({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\ttitle: 'Enter something',\n\t\t\tdelay: 80,        // delay between character typing\n\t\t\ttypeDelay: 1000,  // time to wait before typing text\n\t\t\thideDelay: 2000   // time to wait before hiding prompt dialog\n\t\t}, wrap('text', options));\n\t\t\n\t\tshow(options.title, editor.getWrapperElement(), function(dialog) {\n\t\t\ttimer(function() {\n\t\t\t\ttypeText(dialog.querySelector('.CodeMirror-prompt__input'), options, timer, function() {\n\t\t\t\t\ttimer(function() {\n\t\t\t\t\t\thide(next);\n\t\t\t\t\t}, options.hideDelay);\n\t\t\t\t});\n\t\t\t}, options.typeDelay);\n\t\t});\n\t}\n};\n\nexport function show(text, target, callback) {\n\thide();\n\tdialogInstance = dom.toDOM(`<div class=\"CodeMirror-prompt\">\n\t\t<div class=\"CodeMirror-prompt__title\">${text}</div>\n\t\t<input type=\"text\" name=\"prompt\" class=\"CodeMirror-prompt__input\" readonly=\"readonly\" />\n\t\t</div>`);\n\tbgInstance = dom.toDOM('<div class=\"CodeMirror-prompt__shade\"></div>');\n\t\n\ttarget.appendChild(dialogInstance);\n\ttarget.appendChild(bgInstance);\n\t\n\tanimateShow(dialogInstance, bgInstance, {complete: callback});\n}\n\nexport function hide(callback) {\n\tif (dialogInstance) {\n\t\tif (lastTween) {\n\t\t\tlastTween.stop();\n\t\t\tlastTween = null;\n\t\t}\n\t\tanimateHide(dialogInstance, bgInstance, {complete: callback});\n\t\tdialogInstance = bgInstance = null;\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @param {Element} dialog\n * @param {Element} bg\n * @param {Object} options \n */\nfunction animateShow(dialog, bg, options={}) {\n\tvar cssTransform = prefixed('transform');\n\tvar dialogStyle = dialog.style;\n\tvar bgStyle = bg.style;\n\tvar height = dialog.offsetHeight;\n\tvar tmpl = template(has3d ? 'translate3d(0, <%= pos %>, 0)' : 'translate(0, <%= pos %>)');\n\n\tbgStyle.opacity = 0;\n\ttween({\n\t\tduration: 200,\n\t\tstep(pos) {\n\t\t\tbgStyle.opacity = pos;\n\t\t}\n\t});\n\t\n\tdialogStyle[cssTransform] = tmpl({pos: -height});\n\t\n\treturn lastTween = tween({\n\t\tduration: 400,\n\t\teasing: 'outCubic',\n\t\tstep(pos) {\n\t\t\tdialogStyle[cssTransform] = tmpl({pos: (-height * (1 - pos)) + 'px'});\n\t\t},\n\t\tcomplete: function() {\n\t\t\tlastTween = null;\n\t\t\toptions.complete && options.complete(dialog, bg);\n\t\t}\n\t});\n}\n\n/**\n * @param {Element} dialog\n * @param {Element} bg\n * @param {Object} options\n */\nfunction animateHide(dialog, bg, options) {\n\tvar dialogStyle = dialog.style;\n\tvar bgStyle = bg.style;\n\tvar height = dialog.offsetHeight;\n\tvar cssTransform = prefixed('transform');\n\tvar tmpl = template(has3d ? 'translate3d(0, <%= pos %>, 0)' : 'translate(0, <%= pos %>)');\n\n\treturn tween({\n\t\tduration: 200,\n\t\tstep(pos) {\n\t\t\tdialogStyle[cssTransform] = tmpl({pos: (-height * pos) + 'px'});\n\t\t\tbgStyle.opacity = 1 - pos;\n\t\t},\n\t\tcomplete() {\n\t\t\tdom.remove([dialog, bg]);\n\t\t\toptions.complete && options.complete(dialog, bg);\n\t\t}\n\t});\n}\n\nfunction typeText(target, options, timer, next) {\n\tvar chars = options.text.split('');\n\ttimer(function perform() {\n\t\ttarget.value += chars.shift();\n\t\tif (chars.length) {\n\t\t\ttimer(perform, options.delay);\n\t\t} else {\n\t\t\tnext();\n\t\t}\n\t}, options.delay);\n}\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}","/**\n * Extension that allows authors to display context tooltips bound to specific\n * positions\n */\nimport tween from '../vendor/tween';\nimport {extend, prefixed, makePos, has3d} from '../utils';\nimport * as dom from '../dom';\n\nvar instance = null;\nvar lastTween = null;\n\nexport var alignDefaults = {\n\t/** CSS selector for getting popup tail */\n\ttailClass: 'CodeMirror-tooltip__tail',\n\t\n\t/** Class name for switching tail/popup position relative to target point */\n\tbelowClass: 'CodeMirror-tooltip_below',\n\t\n\t/** Min distance between popup and viewport */\n\tpopupMargin: 5,\n\t\n\t/** Min distance between popup left/right edge and its tail */\n\ttailMargin: 11\n};\n\nexport var actions = {\n\t/**\n\t * Shows tooltip with given text, wait for `options.wait`\n\t * milliseconds then hides tooltip\n\t */\n\ttooltip({options, editor, next, prev, timer}) {\n\t\toptions = extend({\n\t\t\twait: 4000,   // time to wait before hiding tooltip\n\t\t\tpos: 'caret'  // position where tooltip should point to\n\t\t}, wrap('text', options));\n\t\t\n\t\tvar pos = resolvePosition(options.pos, editor);\n\t\tshow(options.text, pos, function() {\n\t\t\t// timer(function() {\n\t\t\t// \thide(() => timer(next));\n\t\t\t// }, options.wait);\n\n\t\t\tinstance.querySelector('.CodeMirror-tooltip__prev').addEventListener('click', () => {\n\t\t\t\thide(prev)\n\t\t\t\tconsole.log('prev')\n\t\t\t})\n\n\t\t\tinstance.querySelector('.CodeMirror-tooltip__next').addEventListener('click', () => {\n\t\t\t\thide(next)\n\t\t\t\tconsole.log('next')\n\t\t\t})\n\t\t});\n\t},\n\n\t/**\n\t * Shows tooltip with specified text. This tooltip should be explicitly \n\t * hidden with `hideTooltip` action\n\t */\n\tshowTooltip({options, editor, next, timer}) {\n\t\toptions = extend({\n\t\t\tpos: 'caret'  // position where tooltip should point to\n\t\t}, wrap('text', options));\n\t\t\n\t\tshow(options.text, resolvePosition(options.pos, editor));\n\t\tnext();\n\t},\n\n\t/**\n\t * Hides tooltip, previously shown by 'showTooltip' action\n\t */\n\thideTooltip({options, editor, next, timer}) {\n\t\thide(next);\n\t}\n};\n\nexport function show(text, pos, callback) {\n\thide();\n\t\n\tinstance = dom.toDOM(`<div class=\"CodeMirror-tooltip\">\n\t\t<div class=\"CodeMirror-tooltip__content\">${text}</div>\n\t\t<div class=\"CodeMirror-tooltip__tail\"></div>\n\t\t<button class=\"CodeMirror-tooltip__prev\">prev</button>\n\t\t<button class=\"CodeMirror-tooltip__next\">next</button>\n\t</div>`);\n\n\tdom.css(instance, prefixed('transform'), 'scale(0)');\n\tdocument.body.appendChild(instance);\n\n\talignPopupWithTail(instance, {position: pos});\n\tanimateShow(instance, {complete: callback});\n}\n\nexport function hide(callback) {\n\tif (instance) {\n\t\tif (lastTween) {\n\t\t\tlastTween.stop();\n\t\t\tlastTween = null;\n\t\t}\n\t\tanimateHide(instance, {complete: callback});\n\t\tinstance = null;\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * Helper function that finds optimal position of tooltip popup on page\n * and aligns popup tail with this position\n * @param {Element} popup\n * @param {Object} options\n */\nfunction alignPopupWithTail(popup, options={}) {\n\toptions = extend({}, alignDefaults, options);\n\t\n\tdom.css(popup, {\n\t\tleft: 0,\n\t\ttop: 0\n\t});\n\t\n\tvar tail = popup.querySelector('.' + options.tailClass);\n\t\n\tvar resultX = 0, resultY = 0;\n\tvar pos = options.position;\n\tvar vp = dom.viewportRect();\n\t\n\tvar width = popup.offsetWidth;\n\tvar height = popup.offsetHeight;\n\t\n\tvar isTop;\n\t\t\n\t// calculate horizontal position\n\tresultX = Math.min(vp.width - width - options.popupMargin, Math.max(options.popupMargin, pos.x - vp.left - width / 2));\n\t\n\t// calculate vertical position\n\tif (height + tail.offsetHeight + options.popupMargin + vp.top < pos.y) {\n\t\t// place above target position\n\t\tresultY = Math.max(0, pos.y - height - tail.offsetHeight);\n\t\tisTop = true;\n\t} else {\n\t\t// place below target position \n\t\tresultY = pos.y + tail.offsetHeight;\n\t\tisTop = false;\n\t}\n\t\n\t// calculate tail position\n\tvar tailMinLeft = options.tailMargin;\n\tvar tailMaxLeft = width - options.tailMargin;\n\ttail.style.left = Math.min(tailMaxLeft, Math.max(tailMinLeft, pos.x - resultX - vp.left)) + 'px';\n\t\n\tdom.css(popup, {\n\t\tleft: resultX,\n\t\ttop: resultY\n\t});\n\t\n\tpopup.classList.toggle(options.belowClass, !isTop);\n}\n\n/**\n * @param {jQuery} elem\n * @param {Object} options \n */\nfunction animateShow(elem, options={}) {\n\toptions = extend({}, alignDefaults, options);\n\tvar cssOrigin = prefixed('transform-origin');\n\tvar cssTransform = prefixed('transform');\n\tvar style = elem.style;\n\n\tvar tail = elem.querySelector('.' + options.tailClass);\n\tvar xOrigin = dom.css(tail, 'left');\n\tvar yOrigin = tail.offsetTop;\n\tif (elem.classList.contains(options.belowClass)) {\n\t\tyOrigin -= tail.offsetHeight;\n\t}\n\t\n\tyOrigin += 'px';\n\n\tstyle[cssOrigin] = xOrigin + ' ' + yOrigin;\n\tvar prefix = has3d ? 'translateZ(0) ' : '';\n\t\n\treturn lastTween = tween({\n\t\tduration: 800,\n\t\teasing: 'outElastic',\n\t\tstep(pos) {\n\t\t\tstyle[cssTransform] = prefix + 'scale(' + pos + ')';\n\t\t},\n\t\tcomplete() {\n\t\t\tstyle[cssTransform] = 'none';\n\t\t\tlastTween = null;\n\t\t\toptions.complete && options.complete(elem);\n\t\t}\n\t});\n}\n\n/**\n * @param {jQuery} elem\n * @param {Object} options\n */\nfunction animateHide(elem, options) {\n\tvar style = elem.style;\n\n\treturn tween({\n\t\tduration: 200,\n\t\teasing: 'linear',\n\t\tstep: function(pos) {\n\t\t\tstyle.opacity = (1 - pos);\n\t\t},\n\t\tcomplete: function() {\n\t\t\tdom.remove(elem);\n\t\t\toptions.complete && options.complete(elem);\n\t\t}\n\t});\n}\n\n/**\n * Resolves position where tooltip should point to\n * @param {Object} pos\n * @param {CodeMirror} editor\n * @returns {Object} Object with <code>x</code> and <code>y</code> \n * properties\n */\nfunction resolvePosition(pos, editor) {\n\tif (pos === 'caret') {\n\t\t// get absolute position of current caret position\n\t\treturn sanitizeCaretPos(editor.cursorCoords(true));\n\t}\n\n\tif (typeof pos === 'object') {\n\t\tif ('x' in pos && 'y' in pos) {\n\t\t\t// passed absolute coordinates\n\t\t\treturn pos;\n\t\t}\n\n\t\tif ('left' in pos && 'top' in pos) {\n\t\t\t// passed absolute coordinates\n\t\t\treturn sanitizeCaretPos(pos);\n\t\t}\n\t}\n\t\n\tpos = makePos(pos, editor);\n\treturn sanitizeCaretPos(editor.charCoords(pos));\n}\n\nfunction sanitizeCaretPos(pos) {\n\tif ('left' in pos) {\n\t\tpos.x = pos.left;\n\t}\n\n\tif ('top' in pos) {\n\t\tpos.y = pos.top;\n\t}\n\n\treturn pos;\n}\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvYWN0aW9ucy5qcyIsImxpYi9kb20uanMiLCJsaWIvbW92aWUuanMiLCJsaWIvc2NlbmFyaW8uanMiLCJsaWIvdXRpbHMuanMiLCJsaWIvdmVuZG9yL3R3ZWVuLmpzIiwibGliL3dpZGdldHMvcHJvbXB0LmpzIiwibGliL3dpZGdldHMvdG9vbHRpcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0FDQUE7Ozs7QUFFQSxJQUFJLFVBQVU7QUFDYjs7Ozs7Ozs7Ozs7QUFXQSxPQUFNLG9CQUF5QztBQUFBLE1BQS9CLE9BQStCLFFBQS9CLE9BQStCO0FBQUEsTUFBdEIsTUFBc0IsUUFBdEIsTUFBc0I7QUFBQSxNQUFkLElBQWMsUUFBZCxJQUFjO0FBQUEsTUFBUixLQUFRLFFBQVIsS0FBUTs7QUFDOUMsWUFBVSxtQkFBTztBQUNoQixTQUFNLEVBRFUsRUFDTDtBQUNYLFVBQU8sRUFGUyxFQUVMO0FBQ1gsUUFBSyxJQUhXLENBR0w7QUFISyxHQUFQLEVBSVAsS0FBSyxNQUFMLEVBQWEsT0FBYixDQUpPLENBQVY7O0FBTUEsTUFBSSxDQUFDLFFBQVEsSUFBYixFQUFtQjtBQUNsQixTQUFNLElBQUksS0FBSixDQUFVLG9DQUFWLENBQU47QUFDQTs7QUFFRCxNQUFJLFFBQVEsR0FBUixLQUFnQixJQUFwQixFQUEwQjtBQUN6QixVQUFPLFNBQVAsQ0FBaUIsb0JBQVEsUUFBUSxHQUFoQixFQUFxQixNQUFyQixDQUFqQjtBQUNBOztBQUVELE1BQUksUUFBUSxRQUFRLElBQVIsQ0FBYSxLQUFiLENBQW1CLEVBQW5CLENBQVo7O0FBRUEsUUFBTSxTQUFTLE9BQVQsR0FBbUI7QUFDeEIsT0FBSSxLQUFLLE1BQU0sS0FBTixFQUFUO0FBQ0EsVUFBTyxnQkFBUCxDQUF3QixFQUF4QixFQUE0QixLQUE1QjtBQUNBLE9BQUksTUFBTSxNQUFWLEVBQWtCO0FBQ2pCLFVBQU0s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Q0FBb0IsSUFBcEIsQ0FBakIsQ0FBUDtBQUNBOztBQUVELEtBQUksUUFBTyxHQUFQLHlDQUFPLEdBQVAsT0FBZSxRQUFuQixFQUE2QjtBQUM1QixNQUFJLE9BQU8sR0FBUCxJQUFjLE9BQU8sR0FBekIsRUFBOEI7QUFDN0I7QUFDQSxVQUFPLEdBQVA7QUFDQTs7QUFFRCxNQUFJLFVBQVUsR0FBVixJQUFpQixTQUFTLEdBQTlCLEVBQW1DO0FBQ2xDO0FBQ0EsVUFBTyxpQkFBaUIsR0FBakIsQ0FBUDtBQUNBO0FBQ0Q7O0FBRUQsT0FBTSxvQkFBUSxHQUFSLEVBQWEsTUFBYixDQUFOO0FBQ0EsUUFBTyxpQkFBaUIsT0FBTyxVQUFQLENBQWtCLEdBQWxCLENBQWpCLENBQVA7QUFDQTs7QUFFRCxTQUFTLGdCQUFULENBQTBCLEdBQTFCLEVBQStCO0FBQzlCLEtBQUksVUFBVSxHQUFkLEVBQW1CO0FBQ2xCLE1BQUksQ0FBSixHQUFRLElBQUksSUFBWjtBQUNBOztBQUVELEtBQUksU0FBUyxHQUFiLEVBQWtCO0FBQ2pCLE1BQUksQ0FBSixHQUFRLElBQUksR0FBWjtBQUNBOztBQUVELFFBQU8sR0FBUDtBQUNBOztBQUVELFNBQVMsSUFBVCxDQUFjLEdBQWQsRUFBbUIsS0FBbkIsRUFBMEI7QUFDekIsUUFBTyxRQUFPLEtBQVAseUNBQU8sS0FBUCxPQUFpQixRQUFqQixHQUE0QixLQUE1Qix1QkFBc0MsR0FBdEMsRUFBNEMsS0FBNUMsQ0FBUDtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc31yZXR1cm4gZX0pKCkiLCJpbXBvcnQge2V4dGVuZCwgbWFrZVBvcywgZ2V0Q3Vyc29yfSBmcm9tICcuL3V0aWxzJztcblxudmFyIGFjdGlvbnMgPSB7XG5cdC8qKlxuXHQgKiBUeXBlLWluIHBhc3NlZCB0ZXh0IGludG8gY3VycmVudCBlZGl0b3IgY2hhci1ieS1jaGFyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIEN1cnJlbnQgb3B0aW9uc1xuXHQgKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvciBFZGl0b3IgaW5zdGFuY2Ugd2hlcmUgYWN0aW9uIHNob3VsZCBiZSBcblx0ICogcGVyZm9ybWVkXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHQgRnVuY3Rpb24gdG8gY2FsbCB3aGVuIGFjdGlvbiBwZXJmb3JtYW5jZVxuXHQgKiBpcyBjb21wbGV0ZWRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZXIgRnVuY3Rpb24gdGhhdCBjcmVhdGVzIHRpbWVyIGZvciBkZWxheWVkIFxuXHQgKiBleGVjdXRpb24uIFRoaXMgdGltZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGRlbGF5IGV4ZWN1dGlvbiB3aGVuXG5cdCAqIHNjZW5hcmlvIGlzIHBhdXNlZCBhbmQgcmV2ZXJ0IHdoZW4gcGxheWVkIGFnYWluIFxuXHQgKi9cblx0dHlwZTogZnVuY3Rpb24oe29wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXJ9KSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHR0ZXh0OiAnJywgIC8vIHRleHQgdG8gdHlwZVxuXHRcdFx0ZGVsYXk6IDYwLCAvLyBkZWxheSBiZXR3ZWVuIGNoYXJhY3RlciB0eXBpbmdcblx0XHRcdHBvczogbnVsbCAgLy8gaW5pdGlhbCBwb3NpdGlvbiB3aGVyZSB0byBzdGFydCB0eXBpbmdcblx0XHR9LCB3cmFwKCd0ZXh0Jywgb3B0aW9ucykpO1xuXHRcdFxuXHRcdGlmICghb3B0aW9ucy50ZXh0KSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIHRleHQgcHJvdmlkZWQgZm9yIFwidHlwZVwiIGFjdGlvbicpO1xuXHRcdH1cblx0XHRcblx0XHRpZiAob3B0aW9ucy5wb3MgIT09IG51bGwpIHtcblx0XHRcdGVkaXRvci5zZXRDdXJzb3IobWFrZVBvcyhvcHRpb25zLnBvcywgZWRpdG9yKSk7XG5cdFx0fVxuXHRcdFxuXHRcdHZhciBjaGFycyA9IG9wdGlvbnMudGV4dC5zcGxpdCgnJyk7XG5cdFx0XG5cdFx0dGltZXIoZnVuY3Rpb24gcGVyZm9ybSgpIHtcblx0XHRcdHZhciBjaCA9IGNoYXJzLnNoaWZ0KCk7XG5cdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihjaCwgJ2VuZCcpO1xuXHRcdFx0aWYgKGNoYXJzLmxlbmd0aCkge1xuXHRcdFx0XHR0aW1lcihwZXJmb3JtLCBvcHRpb25zLmRlbGF5KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5leHQoKTtcblx0XHRcdH1cblx0XHR9LCBvcHRpb25zLmRlbGF5KTtcblx0fSxcblx0XG5cdC8qKlxuXHQgKiBXYWl0IGZvciBhIHNwZWNpZmllZCB0aW1lb3V0XG5cdCAqIEBwYXJhbSBvcHRpb25zXG5cdCAqIEBwYXJhbSBlZGl0b3Jcblx0ICogQHBhcmFtIG5leHRcblx0ICogQHBhcmFtIHRpbWVyXG5cdCAqL1xuXHR3YWl0OiBmdW5jdGlvbih7b3B0aW9ucywgZWRpdG9yLCBuZXh0LCB0aW1lcn0pIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdHRpbWVvdXQ6IDEwMFxuXHRcdH0sIHdyYXAoJ3RpbWVvdXQnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0dGltZXIobmV4dCwgcGFyc2VJbnQob3B0aW9ucy50aW1lb3V0LCAxMCkpO1xuXHR9LFxuXHRcblx0LyoqXG5cdCAqIE1vdmUgY2FyZXQgdG8gYSBzcGVjaWZpZWQgcG9zaXRpb25cblx0ICovXG5cdG1vdmVUbzogZnVuY3Rpb24oe29wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXJ9KSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHRkZWxheTogODAsXG5cdFx0XHRpbW1lZGlhdGU6IGZhbHNlIC8vIFRPRE86IHJlbW92ZSwgdXNlIGRlbGF5OiAwIGluc3RlYWRcblx0XHR9LCB3cmFwKCdwb3MnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLnBvcyA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignTm8gcG9zaXRpb24gc3BlY2lmaWVkIGZvciBcIm1vdmVUb1wiIGFjdGlvbicpO1xuXHRcdH1cblx0XHRcblx0XHR2YXIgY3VyUG9zID0gZ2V0Q3Vyc29yKGVkaXRvcik7XG5cdFx0Ly8gcmVzZXQgc2VsZWN0aW9uLCBpZiBleGlzdHNcblx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGN1clBvcywgY3VyUG9zKTtcblx0XHR2YXIgdGFyZ2V0UG9zID0gbWFrZVBvcyhvcHRpb25zLnBvcywgZWRpdG9yKTtcblx0XHRcblx0XHRpZiAob3B0aW9ucy5pbW1lZGlhdGUgfHwgIW9wdGlvbnMuZGVsYXkpIHtcblx0XHRcdGVkaXRvci5zZXRDdXJzb3IodGFyZ2V0UG9zKTtcblx0XHRcdG5leHQoKTtcblx0XHR9XG5cblx0XHR2YXIgZGVsdGFMaW5lID0gdGFyZ2V0UG9zLmxpbmUgLSBjdXJQb3MubGluZTtcblx0XHR2YXIgZGVsdGFDaGFyID0gdGFyZ2V0UG9zLmNoIC0gY3VyUG9zLmNoO1xuXHRcdHZhciBzdGVwcyA9IE1hdGgubWF4KGRlbHRhQ2hhciwgZGVsdGFMaW5lKTtcblx0XHQvLyB2YXIgc3RlcExpbmUgPSBkZWx0YUxpbmUgLyBzdGVwcztcblx0XHQvLyB2YXIgc3RlcENoYXIgPSBkZWx0YUNoYXIgLyBzdGVwcztcblx0XHR2YXIgc3RlcExpbmUgPSBkZWx0YUxpbmUgPCAwID8gLTEgOiAxO1xuXHRcdHZhciBzdGVwQ2hhciA9IGRlbHRhQ2hhciA8IDAgPyAtMSA6IDE7XG5cblx0XHR0aW1lcihmdW5jdGlvbiBwZXJmb3JtKCkge1xuXHRcdFx0Y3VyUG9zID0gZ2V0Q3Vyc29yKGVkaXRvcik7XG5cdFx0XHRpZiAoc3RlcHMgPiAwICYmICEoY3VyUG9zLmxpbmUgPT0gdGFyZ2V0UG9zLmxpbmUgJiYgY3VyUG9zLmNoID09IHRhcmdldFBvcy5jaCkpIHtcblxuXHRcdFx0XHRpZiAoY3VyUG9zLmxpbmUgIT0gdGFyZ2V0UG9zLmxpbmUpIHtcblx0XHRcdFx0XHRjdXJQb3MubGluZSArPSBzdGVwTGluZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJQb3MuY2ggIT0gdGFyZ2V0UG9zLmNoKSB7XG5cdFx0XHRcdFx0Y3VyUG9zLmNoICs9IHN0ZXBDaGFyO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcihjdXJQb3MpO1xuXHRcdFx0XHRzdGVwcy0tO1xuXHRcdFx0XHR0aW1lcihwZXJmb3JtLCBvcHRpb25zLmRlbGF5KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVkaXRvci5zZXRDdXJzb3IodGFyZ2V0UG9zKTtcblx0XHRcdFx0bmV4dCgpO1xuXHRcdFx0fVxuXHRcdH0sIG9wdGlvbnMuZGVsYXkpO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBTaW1pbGFyIHRvIFwibW92ZVRvXCIgZnVuY3Rpb24gYnV0IHdpdGggaW1tZWRpYXRlIGN1cnNvciBwb3NpdGlvbiB1cGRhdGVcblx0ICovXG5cdGp1bXBUbzogZnVuY3Rpb24oe29wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXJ9KSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHRhZnRlckRlbGF5OiAyMDBcblx0XHR9LCB3cmFwKCdwb3MnLCBvcHRpb25zKSk7XG5cblx0XHRpZiAodHlwZW9mIG9wdGlvbnMucG9zID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdObyBwb3NpdGlvbiBzcGVjaWZpZWQgZm9yIFwianVtcFRvXCIgYWN0aW9uJyk7XG5cdFx0fVxuXHRcdFxuXHRcdGVkaXRvci5zZXRDdXJzb3IobWFrZVBvcyhvcHRpb25zLnBvcywgZWRpdG9yKSk7XG5cdFx0dGltZXIobmV4dCwgb3B0aW9ucy5hZnRlckRlbGF5KTtcblx0fSxcblx0XG5cdC8qKlxuXHQgKiBFeGVjdXRlcyBwcmVkZWZpbmVkIENvZGVNaXJyb3IgY29tbWFuZFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvclxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHRpbWVyXG5cdCAqL1xuXHRydW46IGZ1bmN0aW9uKHtvcHRpb25zLCBlZGl0b3IsIG5leHQsIHRpbWVyfSkge1xuXHRcdG9wdGlvbnMgPSBleHRlbmQoe1xuXHRcdFx0YmVmb3JlRGVsYXk6IDUwMCxcblx0XHRcdHRpbWVzOiAxXG5cdFx0fSwgd3JhcCgnY29tbWFuZCcsIG9wdGlvbnMpKTtcblx0XHRcblx0XHR2YXIgdGltZXMgPSBvcHRpb25zLnRpbWVzO1xuXHRcdHRpbWVyKGZ1bmN0aW9uIHBlcmZvcm0oKSB7XG5cdFx0XHRpZiAodHlwZW9mIG9wdGlvbnMuY29tbWFuZCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRvcHRpb25zLmNvbW1hbmQoZWRpdG9yLCBvcHRpb25zKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVkaXRvci5leGVjQ29tbWFuZChvcHRpb25zLmNvbW1hbmQpO1x0XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGlmICgtLXRpbWVzID4gMCkge1xuXHRcdFx0XHR0aW1lcihwZXJmb3JtLCBvcHRpb25zLmJlZm9yZURlbGF5KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5leHQoKTtcblx0XHRcdH1cblx0XHR9LCBvcHRpb25zLmJlZm9yZURlbGF5KTtcblx0fSxcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIHNlbGVjdGlvbiBmb3Igc3BlY2lmaWVkIHBvc2l0aW9uXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7Q29kZU1pcnJvcn0gZWRpdG9yXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZXJcblx0ICovXG5cdHNlbGVjdDogZnVuY3Rpb24oe29wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXJ9KSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHRmcm9tOiAnY2FyZXQnXG5cdFx0fSwgd3JhcCgndG8nLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0dmFyIGZyb20gPSBtYWtlUG9zKG9wdGlvbnMuZnJvbSwgZWRpdG9yKTtcblx0XHR2YXIgdG8gPSBtYWtlUG9zKG9wdGlvbnMudG8sIGVkaXRvcik7XG5cdFx0ZWRpdG9yLnNldFNlbGVjdGlvbihmcm9tLCB0byk7XG5cdFx0bmV4dCgpO1xuXHR9XG59O1xuXG5mdW5jdGlvbiB3cmFwKGtleSwgdmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyB2YWx1ZSA6IHtba2V5XTogdmFsdWV9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBhY3Rpb25zOyIsImltcG9ydCB7dG9BcnJheX0gZnJvbSAnLi91dGlscyc7XG5cbnZhciB3M2NDU1MgPSBkb2N1bWVudC5kZWZhdWx0VmlldyAmJiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlO1xuXG5leHBvcnQgZnVuY3Rpb24gdmlld3BvcnRSZWN0KCkge1xuXHR2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdHZhciBkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHR2YXIgY2xpZW50VG9wID0gZG9jRWxlbS5jbGllbnRUb3AgIHx8IGJvZHkuY2xpZW50VG9wICB8fCAwO1xuXHR2YXIgY2xpZW50TGVmdCA9IGRvY0VsZW0uY2xpZW50TGVmdCB8fCBib2R5LmNsaWVudExlZnQgfHwgMDtcblx0dmFyIHNjcm9sbFRvcCAgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxUb3AgIHx8IGJvZHkuc2Nyb2xsVG9wO1xuXHR2YXIgc2Nyb2xsTGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbExlZnQgfHwgYm9keS5zY3JvbGxMZWZ0O1xuXHRcblx0cmV0dXJuIHtcblx0XHR0b3A6IHNjcm9sbFRvcCAgLSBjbGllbnRUb3AsXG5cdFx0bGVmdDogc2Nyb2xsTGVmdCAtIGNsaWVudExlZnQsXG5cdFx0d2lkdGg6IGJvZHkuY2xpZW50V2lkdGggfHwgZG9jRWxlbS5jbGllbnRXaWR0aCxcblx0XHRoZWlnaHQ6IGJvZHkuY2xpZW50SGVpZ2h0IHx8IGRvY0VsZW0uY2xpZW50SGVpZ2h0XG5cdH07XG59XG5cbi8qKlxuICogUmVtb3ZlcyBlbGVtZW50IGZyb20gcGFyZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1cbiAqIEByZXR1cm5zIHtFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGVsZW0pIHtcblx0YXIoZWxlbSkuZm9yRWFjaChlbCA9PiBlbC5wYXJlbnROb2RlICYmIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpKTtcblx0cmV0dXJuIGVsZW07XG59XG5cbi8qKlxuICogUmVuZGVycyBzdHJpbmcgaW50byBET00gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybnMge0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RPTShzdHIpIHtcblx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRkaXYuaW5uZXJIVE1MID0gc3RyO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQ7XG59XG5cbi8qKlxuICogU2V0cyBvciByZXRyaWV2ZXMgQ1NTIHByb3BlcnR5IHZhbHVlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjc3MoZWxlbSwgcHJvcCwgdmFsKSB7XG5cdGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycgJiYgdmFsID09IG51bGwpIHtcblx0XHRyZXR1cm4gZ2V0Q1NTKGVsZW0sIHByb3ApO1xuXHR9XG5cdFxuXHRpZiAodHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSB7XG5cdFx0dmFyIG9iaiA9IHt9O1xuXHRcdG9ialtwcm9wXSA9IHZhbDtcblx0XHRwcm9wID0gb2JqO1xuXHR9XG5cdFxuXHRzZXRDU1MoZWxlbSwgcHJvcCk7XG59XG5cbmZ1bmN0aW9uIGFyKG9iaikge1xuXHRpZiAob2JqLmxlbmd0aCA9PT0gK29iai5sZW5ndGgpIHtcblx0XHRyZXR1cm4gdG9BcnJheShvYmopO1xuXHR9XG5cdFxuXHRyZXR1cm4gQXJyYXkuaXNBcnJheShvYmopID8gb2JqIDogW29ial07XG59XG5cbmZ1bmN0aW9uIHRvQ2FtZWxDYXNlKG5hbWUpIHtcblx0cmV0dXJuIG5hbWUucmVwbGFjZSgvXFwtKFxcdykvZywgZnVuY3Rpb24oc3RyLCBwMSkge1xuXHRcdHJldHVybiBwMS50b1VwcGVyQ2FzZSgpO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIENTUyBwcm9wZXJ0eSB2YWx1ZSBvZiBnaXZlbiBlbGVtZW50LlxuICogQGF1dGhvciBqUXVlcnkgVGVhbVxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBDU1MgcHJvcGVydHkgdmFsdWVcbiAqL1xuZnVuY3Rpb24gZ2V0Q1NTKGVsZW0sIG5hbWUpIHtcblx0dmFyIHJudW1weCA9IC9eLT9cXGQrKD86cHgpPyQvaSxcblx0XHRybnVtID0gL14tP1xcZCg/OlxcLlxcZCspPy8sXG5cdFx0cnN1ZiA9IC9cXGQkLztcblx0XG5cdHZhciBuYW1lQ2FtZWwgPSB0b0NhbWVsQ2FzZShuYW1lKTtcblx0Ly8gSWYgdGhlIHByb3BlcnR5IGV4aXN0cyBpbiBzdHlsZVtdLCB0aGVuIGl0J3MgYmVlbiBzZXRcblx0Ly8gcmVjZW50bHkgKGFuZCBpcyBjdXJyZW50KVxuXHRpZiAoZWxlbS5zdHlsZVtuYW1lQ2FtZWxdKSB7XG5cdFx0cmV0dXJuIGVsZW0uc3R5bGVbbmFtZUNhbWVsXTtcblx0fSBcblx0XHRcblx0aWYgKHczY0NTUykge1xuXHRcdHZhciBjcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0sICcnKTtcblx0XHRyZXR1cm4gY3MuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcblx0fVxuXHRcblx0aWYgKGVsZW0uY3VycmVudFN0eWxlKSB7XG5cdFx0dmFyIHJldCA9IGVsZW0uY3VycmVudFN0eWxlW25hbWVdIHx8IGVsZW0uY3VycmVudFN0eWxlW25hbWVDYW1lbF07XG5cdFx0dmFyIHN0eWxlID0gZWxlbS5zdHlsZSB8fCBlbGVtO1xuXHRcdFxuXHRcdC8vIEZyb20gdGhlIGF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcblx0XHQvLyBodHRwOi8vZXJpay5lYWUubmV0L2FyY2hpdmVzLzIwMDcvMDcvMjcvMTguNTQuMTUvI2NvbW1lbnQtMTAyMjkxXG5cdFx0XG5cdFx0Ly8gSWYgd2UncmUgbm90IGRlYWxpbmcgd2l0aCBhIHJlZ3VsYXIgcGl4ZWwgbnVtYmVyXG5cdFx0Ly8gYnV0IGEgbnVtYmVyIHRoYXQgaGFzIGEgd2VpcmQgZW5kaW5nLCB3ZSBuZWVkIHRvIGNvbnZlcnQgaXQgdG8gcGl4ZWxzXG5cdFx0aWYgKCFybnVtcHgudGVzdChyZXQpICYmIHJudW0udGVzdChyZXQpKSB7XG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHR2YXIgbGVmdCA9IHN0eWxlLmxlZnQsIHJzTGVmdCA9IGVsZW0ucnVudGltZVN0eWxlLmxlZnQ7XG5cdFx0XHRcblx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdGVsZW0ucnVudGltZVN0eWxlLmxlZnQgPSBlbGVtLmN1cnJlbnRTdHlsZS5sZWZ0O1xuXHRcdFx0dmFyIHN1ZmZpeCA9IHJzdWYudGVzdChyZXQpID8gJ2VtJyA6ICcnO1xuXHRcdFx0c3R5bGUubGVmdCA9IG5hbWVDYW1lbCA9PT0gJ2ZvbnRTaXplJyA/ICcxZW0nIDogKHJldCArIHN1ZmZpeCB8fCAwKTtcblx0XHRcdHJldCA9IHN0eWxlLnBpeGVsTGVmdCArICdweCc7XG5cdFx0XHRcblx0XHRcdC8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXNcblx0XHRcdHN0eWxlLmxlZnQgPSBsZWZ0O1xuXHRcdFx0ZWxlbS5ydW50aW1lU3R5bGUubGVmdCA9IHJzTGVmdDtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIHJldDtcblx0fVxufVxuXG4vKipcbiAqIFNldHMgQ1NTIHByb3BlcnRpZXMgdG8gZ2l2ZW4gZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIENTUyBwcm9wZXJ0aWVzIHRvIHNldFxuICovXG5mdW5jdGlvbiBzZXRDU1MoZWxlbSwgcGFyYW1zKSB7XG5cdGlmICghZWxlbSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHZhciBudW1Qcm9wcyA9IHsnbGluZS1oZWlnaHQnOiAxLCAnei1pbmRleCc6IDEsIG9wYWNpdHk6IDF9O1xuXHR2YXIgcHJvcHMgPSBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChrID0+IHtcblx0XHR2YXIgdiA9IHBhcmFtc1trXTtcblx0XHR2YXIgbmFtZSA9IGsucmVwbGFjZSgvKFtBLVpdKS9nLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSArICc6JyArICgodHlwZW9mIHYgPT09ICdudW1iZXInICYmICEobmFtZSBpbiBudW1Qcm9wcykpID8gdiArICdweCcgOiB2KTtcblx0fSk7XG5cblx0ZWxlbS5zdHlsZS5jc3NUZXh0ICs9ICc7JyArIHByb3BzLmpvaW4oJzsnKTtcbn0iLCIvKipcbiAqIEEgaGlnaC1sZXZlbCBsaWJyYXJ5IGludGVyZmFjZSBmb3IgY3JlYXRpbmcgc2NlbmFyaW9zIG92ZXIgdGV4dGFyZWFcbiAqIGVsZW1lbnQuIFRoZSA8Y29kZT5Db2RlTWlycm9yLm1vdmllPC9jb2RlPiB0YWtlcyByZWZlcmVuY2UgdG8gdGV4dGFyZWFcbiAqIGVsZW1lbnQgKG9yIGl0cyBJRCkgYW5kIHBhcnNlcyBpdHMgY29udGVudCBmb3IgaW5pdGlhbCBjb250ZW50IHZhbHVlLFxuICogc2NlbmFyaW8uXG4gKi9cbmltcG9ydCB7cGFyc2VKU09OLCBleHRlbmQsIHRvQXJyYXl9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IFNjZW5hcmlvIGZyb20gJy4vc2NlbmFyaW8nO1xuXG52YXIgaW9zID0gL0FwcGxlV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmIC9Nb2JpbGVcXC9cXHcrLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xudmFyIG1hYyA9IGlvcyB8fCAvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XG5cbnZhciBtYWNDaGFyTWFwID0ge1xuXHQnY3RybCc6ICfijIMnLFxuXHQnY29udHJvbCc6ICfijIMnLFxuXHQnY21kJzogJ+KMmCcsXG5cdCdzaGlmdCc6ICfih6cnLFxuXHQnYWx0JzogJ+KMpScsXG5cdCdlbnRlcic6ICfij44nLFxuXHQndGFiJzogJ+KHpScsXG5cdCdsZWZ0JzogJ+KGkCcsXG5cdCdyaWdodCc6ICfihpInLFxuXHQndXAnOiAn4oaRJyxcblx0J2Rvd24nOiAn4oaTJ1xufTtcblx0XG52YXIgcGNDaGFyTWFwID0ge1xuXHQnY21kJzogJ0N0cmwnLFxuXHQnY29udHJvbCc6ICdDdHJsJyxcblx0J2N0cmwnOiAnQ3RybCcsXG5cdCdhbHQnOiAnQWx0Jyxcblx0J3NoaWZ0JzogJ1NoaWZ0Jyxcblx0J2xlZnQnOiAn4oaQJyxcblx0J3JpZ2h0JzogJ+KGkicsXG5cdCd1cCc6ICfihpEnLFxuXHQnZG93bic6ICfihpMnXG59O1xuXG5leHBvcnQgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuXHQvKipcblx0ICogQXV0b21hdGljYWxseSBwYXJzZSBtb3ZpZSBkZWZpbml0aW9uIGZyb20gdGV4dGFyZWEgY29udGVudC4gU2V0dGluZ1xuXHQgKiB0aGlzIHByb3BlcnR5IHRvIDxjb2RlPmZhbHNlPC9jb2RlPiBhc3N1bWVzIHRoYXQgdXNlciB3YW50cyB0b1xuXHQgKiBleHBsaWNpdGx5IHByb3ZpZGUgbW92aWUgZGF0YTogaW5pdGlhbCB2YWx1ZSwgc2NlbmFyaW8gZXRjLlxuXHQgKi9cblx0cGFyc2U6IHRydWUsXG5cdFxuXHQvKipcblx0ICogU3RyaW5nIG9yIHJlZ2V4cCB1c2VkIHRvIHNlcGFyYXRlIHNlY3Rpb25zIG9mIG1vdmllIGRlZmluaXRpb24sIGUuZy5cblx0ICogZGVmYXVsdCB2YWx1ZSwgc2NlbmFyaW8gYW5kIGVkaXRvciBvcHRpb25zXG5cdCAqL1xuXHRzZWN0aW9uU2VwYXJhdG9yOiAnQEBAJyxcblx0XG5cdC8qKiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gZXh0cmFjdCBvdXRsaW5lIGZyb20gc2NlbmFyaW8gbGluZSAqL1xuXHRvdXRsaW5lU2VwYXJhdG9yOiAvXFxzKzo6OlxccysoLispJC8sXG5cdFxuXHQvKiogQXV0b21hdGljYWxseSBwcmV0dGlmeSBrZXlib2FyZCBzaG9ydGN1dHMgaW4gb3V0bGluZSAqL1xuXHRwcmV0dGlmeUtleXM6IHRydWUsXG5cdFxuXHQvKiogU3RyaXAgcGFyZW50aGVzZXMgZnJvbSBwcmV0dHlmaWVkIGtleWJvYXJkIHNob3J0Y3V0IGRlZmluaXRpb24gKi9cblx0c3RyaXBQYXJlbnRoZXNlczogZmFsc2Vcbn07XG5cbi8qKlxuICogSGlnaC1sZXZlbCBmdW5jdGlvbiB0byBjcmVhdGUgbW92aWUgaW5zdGFuY2Ugb24gdGV4dGFyZWEuXG4gKiBAcGFyYW0ge0NvZGVNaXJyb3J9XG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCBSZWZlcmVuY2UgdG8gdGV4dGFyZWEsIGVpdGhlciA8Y29kZT5FbGVtZW50PC9jb2RlPlxuICogb3Igc3RyaW5nIElELiBJdCBjYW4gYWxzbyBhY2NlcHQgZXhpc3RpbmcgQ29kZU1pcnJvciBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gbW92aWVPcHRpb25zIE1vdmllIG9wdGlvbnMuIFNlZSA8Y29kZT5kZWZhdWx0T3B0aW9uczwvY29kZT5cbiAqIGZvciB2YWx1ZSByZWZlcmVuY2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBlZGl0b3JPcHRpb25zIEFkZGl0aW9uYWwgb3B0aW9ucyBwYXNzZWQgdG8gQ29kZU1pcnJvclxuICogZWRpdG9yIGluaXRpYWxpemVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtb3ZpZShDb2RlTWlycm9yRWRpdG9yLCB0YXJnZXQsIG1vdmllT3B0aW9ucz17fSwgZWRpdG9yT3B0aW9ucz17fSkge1xuXHRzZXR1cENvZGVNaXJyb3IoQ29kZU1pcnJvckVkaXRvcik7XG5cblx0aWYgKHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7XG5cdFx0dGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KTtcblx0fVxuXG5cdHZhciB0YXJnZXRJc1RleHRhcmVhID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0YXJlYSc7XG5cdFxuXHRtb3ZpZU9wdGlvbnMgPSBleHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBtb3ZpZU9wdGlvbnMpO1xuXHRlZGl0b3JPcHRpb25zID0gZXh0ZW5kKHtcblx0XHR0aGVtZTogJ2VzcHJlc3NvJyxcblx0XHRtb2RlIDogJ3RleHQvaHRtbCcsXG5cdFx0aW5kZW50V2l0aFRhYnM6IHRydWUsXG5cdFx0dGFiU2l6ZTogNCxcblx0XHRsaW5lTnVtYmVycyA6IHRydWUsXG5cdFx0cHJldmVudEN1cnNvck1vdmVtZW50OiB0cnVlXG5cdH0sIGVkaXRvck9wdGlvbnMpO1xuXHRcblx0dmFyIGluaXRpYWxWYWx1ZSA9IGVkaXRvck9wdGlvbnMudmFsdWUgfHwgKHRhcmdldElzVGV4dGFyZWEgPyB0YXJnZXQudmFsdWUgOiB0YXJnZXQuZ2V0VmFsdWUoKSkgfHwgJyc7XG5cdFxuXHRpZiAodGFyZ2V0SXNUZXh0YXJlYSAmJiBtb3ZpZU9wdGlvbnMucGFyc2UpIHtcblx0XHRleHRlbmQobW92aWVPcHRpb25zLCBwYXJzZU1vdmllRGVmaW5pdGlvbihpbml0aWFsVmFsdWUsIG1vdmllT3B0aW9ucykpO1xuXHRcdGluaXRpYWxWYWx1ZSA9IG1vdmllT3B0aW9ucy52YWx1ZTtcblx0XHRpZiAobW92aWVPcHRpb25zLmVkaXRvck9wdGlvbnMpIHtcblx0XHRcdGV4dGVuZChlZGl0b3JPcHRpb25zLCBtb3ZpZU9wdGlvbnMuZWRpdG9yT3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Ly8gcmVhZCBDTSBvcHRpb25zIGZyb20gZ2l2ZW4gdGV4dGFyZWFcblx0XHR2YXIgY21BdHRyID0gL15kYXRhXFwtY21cXC0oLispJC9pO1xuXHRcdHRvQXJyYXkodGFyZ2V0LmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24oYXR0cikge1xuXHRcdFx0dmFyIG0gPSBhdHRyLm5hbWUubWF0Y2goY21BdHRyKTtcblx0XHRcdGlmIChtKSB7XG5cdFx0XHRcdGVkaXRvck9wdGlvbnNbbVsxXV0gPSBhdHRyLnZhbHVlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHQvLyBub3JtYWxpemUgbGluZSBlbmRpbmdzXG5cdGluaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZS5yZXBsYWNlKC9cXHI/XFxuL2csICdcXG4nKTtcblx0XG5cdC8vIGxvY2F0ZSBpbml0aWFsIGNhcmV0IHBvc2l0aW9uIGZyb20gfCBzeW1ib2xcblx0dmFyIGluaXRpYWxQb3MgPSBpbml0aWFsVmFsdWUuaW5kZXhPZignfCcpO1xuXHRcblx0aWYgKHRhcmdldElzVGV4dGFyZWEpIHtcblx0XHR0YXJnZXQudmFsdWUgPSBlZGl0b3JPcHRpb25zLnZhbHVlID0gaW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlLnJlcGxhY2UoL1xcfC9nLCAnJyk7XG5cdH1cblxuXHQvLyBjcmVhdGUgZWRpdG9yIGluc3RhbmNlIGlmIG5lZWRlZFxuXHR2YXIgZWRpdG9yID0gdGFyZ2V0SXNUZXh0YXJlYSA/IENvZGVNaXJyb3JFZGl0b3IuZnJvbVRleHRBcmVhKHRhcmdldCwgZWRpdG9yT3B0aW9ucykgOiB0YXJnZXQ7XG5cblx0aWYgKGluaXRpYWxQb3MgIT0gLTEpIHtcblx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGVkaXRvci5wb3NGcm9tSW5kZXgoaW5pdGlhbFBvcykpO1xuXHR9XG5cdFxuXHQvLyBzYXZlIGluaXRpYWwgZGF0YSBzbyB3ZSBjYW4gcmV2ZXJ0IHRvIGl0IGxhdGVyXG5cdGVkaXRvci5fX2luaXRpYWwgPSB7XG5cdFx0Y29udGVudDogaW5pdGlhbFZhbHVlLFxuXHRcdHBvczogZWRpdG9yLmdldEN1cnNvcih0cnVlKVxuXHR9O1xuXHRcblx0dmFyIHdyYXBwZXIgPSBlZGl0b3IuZ2V0V3JhcHBlckVsZW1lbnQoKTtcblx0XG5cdC8vIGFkanVzdCBoZWlnaHQsIGlmIHJlcXVpcmVkXG5cdGlmIChlZGl0b3JPcHRpb25zLmhlaWdodCkge1xuXHRcdHdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gZWRpdG9yT3B0aW9ucy5oZWlnaHQgKyAncHgnO1xuXHR9XG5cdFxuXHR3cmFwcGVyLmNsYXNzTmFtZSArPSAnIENvZGVNaXJyb3ItbW92aWUnO1xuXHRcblx0dmFyIHNjID0gbmV3IFNjZW5hcmlvKG1vdmllT3B0aW9ucy5zY2VuYXJpbywgZWRpdG9yKTtcblx0cmV0dXJuIHNjO1xufTtcblxuLyoqXG4gKiBQcmV0dHlmaWVzIGtleSBiaW5kaW5ncyByZWZlcmVuY2VzIGluIGdpdmVuIHN0cmluZzogZm9ybWF0cyBpdCBhY2NvcmRpbmdcbiAqIHRvIGN1cnJlbnQgdXNlcuKAmXMgcGxhdGZvcm0uIFRoZSBrZXkgYmluZGluZyBzaG91bGQgYmUgZGVmaW5lZCBpbnNpZGUgXG4gKiBwYXJlbnRoZXNlcywgZS5nLiA8Y29kZT4oY3RybC1hbHQtdXApPC9jb2RlPlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVHJhbnNmb3JtIG9wdGlvbnNcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHByZXR0aWZ5S2V5QmluZGluZ3Moc3RyLCBvcHRpb25zKSB7XG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHR2YXIgcmVLZXkgPSAvY3RybHxhbHR8c2hpZnR8Y21kL2k7XG5cdHZhciBtYXAgPSBtYWMgPyBtYWNDaGFyTWFwIDogcGNDaGFyTWFwO1xuXHRyZXR1cm4gc3RyLnJlcGxhY2UoL1xcKCguKz8pXFwpL2csIGZ1bmN0aW9uKG0sIGtiKSB7XG5cdFx0aWYgKHJlS2V5LnRlc3Qoa2IpKSB7XG5cdFx0XHR2YXIgcGFydHMgPSBrYi50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdC5zcGxpdCgvW1xcLVxcK10vKVxuXHRcdFx0XHQubWFwKGtleSA9PiBtYXBba2V5LnRvTG93ZXJDYXNlKCldIHx8IGtleS50b1VwcGVyQ2FzZSgpKTtcblx0XHRcdFxuXHRcdFx0bSA9IHBhcnRzLmpvaW4obWFjID8gJycgOiAnKycpO1xuXHRcdFx0aWYgKCFvcHRpb25zLnN0cmlwUGFyZW50aGVzZXMpIHtcblx0XHRcdFx0bSA9ICcoJyArIG0gKyAnKSc7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiBtO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gcmVhZExpbmVzKHRleHQpIHtcblx0Ly8gSUUgZmFpbHMgdG8gc3BsaXQgc3RyaW5nIGJ5IHJlZ2V4cCwgXG5cdC8vIG5lZWQgdG8gbm9ybWFsaXplIG5ld2xpbmVzIGZpcnN0XG5cdHZhciBubCA9ICdcXG4nO1xuXHR2YXIgbGluZXMgPSAodGV4dCB8fCAnJylcblx0XHQucmVwbGFjZSgvXFxyXFxuL2csIG5sKVxuXHRcdC5yZXBsYWNlKC9cXG5cXHIvZywgbmwpXG5cdFx0LnJlcGxhY2UoL1xcci9nLCBubClcblx0XHQuc3BsaXQobmwpO1xuXG5cdHJldHVybiBsaW5lcy5maWx0ZXIoQm9vbGVhbik7XG59XG5cbmZ1bmN0aW9uIHVuZXNjYXBlKHRleHQpIHtcblx0dmFyIHJlcGxhY2VtZW50cyA9IHtcblx0XHQnJmx0Oyc6ICAnPCcsXG5cdFx0JyZndDsnOiAgJz4nLFxuXHRcdCcmYW1wOyc6ICcmJ1xuXHR9O1xuXG5cdHJldHVybiB0ZXh0LnJlcGxhY2UoLyYobHR8Z3R8YW1wKTsvZywgZnVuY3Rpb24oc3RyLCBwMSkge1xuXHRcdHJldHVybiByZXBsYWNlbWVudHNbc3RyXSB8fCBzdHI7XG5cdH0pO1xufVxuXG4vKipcbiAqIEV4dHJhY3RzIGluaXRpYWwgY29udGVudCBhbmQgc2NlbmFyaW8gZnJvbSBnaXZlbiBzdHJpbmdcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBwYXJzZU1vdmllRGVmaW5pdGlvbih0ZXh0LCBvcHRpb25zPXt9KSB7XG5cdG9wdGlvbnMgPSBleHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zIHx8IHt9KTtcblx0dmFyIHBhcnRzID0gdGV4dC5zcGxpdChvcHRpb25zLnNlY3Rpb25TZXBhcmF0b3IpO1xuXG5cdC8vIHBhcnNlIHNjZW5hcmlvXG5cdHZhciByZURlZiA9IC9eKFxcdyspXFxzKjpcXHMqKC4rKSQvO1xuXHR2YXIgc2NlbmFyaW8gPSBbXTtcblx0dmFyIGVkaXRvck9wdGlvbnMgPSB7fTtcblxuXHR2YXIgc2tpcENvbW1lbnQgPSBsaW5lID0+IGxpbmUuY2hhckF0KDApICE9PSAnIyc7XG5cblx0Ly8gcmVhZCBtb3ZpZSBkZWZpbml0aW9uXG5cdHJlYWRMaW5lcyhwYXJ0c1sxXSkuZmlsdGVyKHNraXBDb21tZW50KS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcblx0XHQvLyBkbyB3ZSBoYXZlIG91dGxpbmUgZGVmaW5pdGlvbiBoZXJlP1xuXHRcdGxpbmUgPSBsaW5lLnJlcGxhY2Uob3B0aW9ucy5vdXRsaW5lU2VwYXJhdG9yLCAnJyk7XG5cblx0XHR2YXIgc2QgPSBsaW5lLm1hdGNoKHJlRGVmKTtcblx0XHRpZiAoIXNkKSB7XG5cdFx0XHRyZXR1cm4gc2NlbmFyaW8ucHVzaChsaW5lLnRyaW0oKSk7XG5cdFx0fVxuXHRcdFx0XG5cblx0XHRpZiAoc2RbMl0uY2hhckF0KDApID09PSAneycpIHtcblx0XHRcdHZhciBvYmogPSB7fTtcblx0XHRcdG9ialtzZFsxXV0gPSBwYXJzZUpTT04odW5lc2NhcGUoc2RbMl0pKTtcblx0XHRcdHJldHVybiBzY2VuYXJpby5wdXNoKG9iaik7XG5cdFx0fVxuXG5cdFx0c2NlbmFyaW8ucHVzaChzZFsxXSArICc6JyArIHVuZXNjYXBlKHNkWzJdKSk7XG5cdH0pO1xuXG5cdC8vIHJlYWQgZWRpdG9yIG9wdGlvbnNcblx0aWYgKHBhcnRzWzJdKSB7XG5cdFx0cmVhZExpbmVzKHBhcnRzWzJdKS5maWx0ZXIoc2tpcENvbW1lbnQpLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuXHRcdFx0dmFyIHNkID0gbGluZS5tYXRjaChyZURlZik7XG5cdFx0XHRpZiAoc2QpIHtcblx0XHRcdFx0ZWRpdG9yT3B0aW9uc1tzZFsxXV0gPSBzZFsyXTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dmFsdWU6IHVuZXNjYXBlKHBhcnRzWzBdLnRyaW0oKSksXG5cdFx0c2NlbmFyaW86IHNjZW5hcmlvLFxuXHRcdGVkaXRvck9wdGlvbnM6IGVkaXRvck9wdGlvbnNcblx0fTtcbn1cblxuZnVuY3Rpb24gc2V0dXBDb2RlTWlycm9yKENvZGVNaXJyb3JFZGl0b3IpIHtcblx0aWYgKCdwcmV2ZW50Q3Vyc29yTW92ZW1lbnQnIGluIENvZGVNaXJyb3JFZGl0b3IuZGVmYXVsdHMpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRDb2RlTWlycm9yRWRpdG9yLmRlZmluZU9wdGlvbigncHJldmVudEN1cnNvck1vdmVtZW50JywgZmFsc2UsIGNtID0+IHtcblx0XHR2YXIgaGFuZGxlciA9IChjbSwgZXZlbnQpID0+IGNtLmdldE9wdGlvbigncmVhZE9ubHknKSAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGNtLm9uKCdrZXlkb3duJywgaGFuZGxlcik7XG5cdFx0Y20ub24oJ21vdXNlZG93bicsIGhhbmRsZXIpO1xuXHR9KTtcbn1cbiIsImltcG9ydCBjb21tb25BY3Rpb25zIGZyb20gJy4vYWN0aW9ucyc7XG5pbXBvcnQge2FjdGlvbnMgYXMgcHJvbXB0fSBmcm9tICcuL3dpZGdldHMvcHJvbXB0JztcbmltcG9ydCB7YWN0aW9ucyBhcyB0b29sdGlwfSBmcm9tICcuL3dpZGdldHMvdG9vbHRpcCc7XG5pbXBvcnQge2V4dGVuZH0gZnJvbSAnLi91dGlscyc7XG5cbnZhciBhY3Rpb25zRGVmaW5pdGlvbiA9IGV4dGVuZCh7fSwgY29tbW9uQWN0aW9ucywgcHJvbXB0LCB0b29sdGlwKTtcblxudmFyIFNUQVRFX0lETEUgID0gJ2lkbGUnO1xudmFyIFNUQVRFX1BMQVkgID0gJ3BsYXknO1xudmFyIFNUQVRFX1BBVVNFID0gJ3BhdXNlJztcblxuLy8gUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gc3BsaXQgZXZlbnQgc3RyaW5nc1xudmFyIGV2ZW50U3BsaXR0ZXIgPSAvXFxzKy87XG5cbmV4cG9ydCB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG5cdGJlZm9yZURlbGF5OiAxMDAwLFxuXHRhZnRlckRlbGF5OiAxMDAwXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb25zIEFjdGlvbnMgc2NlbmFyaW9cbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIEluaXRpYWwgY29udGVudCAoPGNvZGU+U3RyaW5nPC9jb2RlPikgb3IgZWRpdG9yXG4gKiBpbnN0YW5jZSAoPGNvZGU+Q29kZU1pcnJvcjwvY29kZT4pXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5hcmlvIHtcblx0Y29uc3RydWN0b3IoYWN0aW9ucywgZGF0YSkge1xuXHRcdHRoaXMuX2FjdGlvbnMgPSBhY3Rpb25zO1xuXHRcdHRoaXMuX2VkaXRvciA9IG51bGw7XG5cdFx0dGhpcy5fc3RhdGUgPSBTVEFURV9JRExFO1xuXHRcdHRoaXMuX3RpbWVyUXVldWUgPSBbXTtcblx0XHRcblx0XHRpZiAoZGF0YSAmJiAnZ2V0VmFsdWUnIGluIGRhdGEpIHtcblx0XHRcdHRoaXMuX2VkaXRvciA9IGRhdGE7XG5cdFx0fVxuXHRcdFxuXHRcdHZhciBlZCA9IHRoaXMuX2VkaXRvcjtcblx0XHRpZiAoZWQgJiYgIWVkLl9faW5pdGlhbCkge1xuXHRcdFx0ZWQuX19pbml0aWFsID0ge1xuXHRcdFx0XHRjb250ZW50OiBlZC5nZXRWYWx1ZSgpLFxuXHRcdFx0XHRwb3M6IGVkLmdldEN1cnNvcih0cnVlKVxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHRfc2V0dXAoZWRpdG9yKSB7XG5cdFx0aWYgKCFlZGl0b3IgJiYgdGhpcy5fZWRpdG9yKSB7XG5cdFx0XHRlZGl0b3IgPSB0aGlzLl9lZGl0b3I7XG5cdFx0fVxuXHRcdFxuXHRcdGVkaXRvci5leGVjQ29tbWFuZCgncmV2ZXJ0Jyk7XG5cdFx0cmV0dXJuIGVkaXRvcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBsYXkgY3VycmVudCBzY2VuYXJpb1xuXHQgKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvciBFZGl0b3IgaW5zdGFuY2Ugd2hlcmUgb24gd2hpY2ggc2NlbmFyaW8gXG5cdCAqIHNob3VsZCBiZSBwbGF5ZWRcblx0ICogQG1lbWJlck9mIFNjZW5hcmlvXG5cdCAqL1xuXHRwbGF5KGVkaXRvcikge1xuXHRcdGlmICh0aGlzLl9zdGF0ZSA9PT0gU1RBVEVfUExBWSkge1xuXHRcdFx0Ly8gYWxyZWFkeSBwbGF5aW5nXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGlmICh0aGlzLl9zdGF0ZSA9PT0gU1RBVEVfUEFVU0UpIHtcblx0XHRcdC8vIHJldmVydCBmcm9tIHBhdXNlZCBzdGF0ZVxuXHRcdFx0ZWRpdG9yID0gZWRpdG9yIHx8IHRoaXMuX2VkaXRvcjtcblx0XHRcdGVkaXRvci5mb2N1cygpO1xuXHRcdFx0dmFyIHRpbWVyT2JqID0gbnVsbDtcblx0XHRcdHdoaWxlICh0aW1lck9iaiA9IHRoaXMuX3RpbWVyUXVldWUuc2hpZnQoKSkge1xuXHRcdFx0XHRyZXF1ZXN0VGltZXIodGltZXJPYmouZm4sIHRpbWVyT2JqLmRlbGF5KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dGhpcy5fc3RhdGUgPSBTVEFURV9QTEFZO1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdyZXN1bWUnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5fZWRpdG9yID0gZWRpdG9yID0gdGhpcy5fc2V0dXAoZWRpdG9yKTtcblx0XHRlZGl0b3IuZm9jdXMoKTtcblx0XHRcblx0XHR2YXIgdGltZXIgPSB0aGlzLnJlcXVlc3RUaW1lci5iaW5kKHRoaXMpO1xuXG5cdFx0Y29uc29sZS5sb2coJ3JhdyBhY3Rpb25zOiAnLCB0aGlzLl9hY3Rpb25zKVxuXG5cdFx0dmFyIGdvdG8gPSBhY3Rpb25JeCA9PiB7XG5cdFx0XHRpZiAoYWN0aW9uSXggPj0gdGhpcy5fYWN0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuIHRpbWVyKCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnN0b3AoKTtcblx0XHRcdFx0fSwgZGVmYXVsdE9wdGlvbnMuYWZ0ZXJEZWxheSk7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMudHJpZ2dlcignYWN0aW9uJywgYWN0aW9uSXgpO1xuXG5cdFx0XHR2YXIgYWN0aW9uID0gcGFyc2VBY3Rpb25DYWxsKHRoaXMuX2FjdGlvbnNbYWN0aW9uSXhdKTtcblxuXHRcdFx0Ly8gZm9yIChjb25zdCBpID0gYWN0aW9uSXggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0Ly8gXHRpZiAodGgpXG5cdFx0XHQvLyB9XG5cblx0XHRcdGNvbnNvbGUubG9nKCdhY3Rpb246ICcsIGFjdGlvbilcblx0XHRcdFxuXHRcdFx0aWYgKGFjdGlvbi5uYW1lIGluIGFjdGlvbnNEZWZpbml0aW9uKSB7XG5cdFx0XHRcdGFjdGlvbnNEZWZpbml0aW9uW2FjdGlvbi5uYW1lXSh7XG5cdFx0XHRcdFx0b3B0aW9uczogYWN0aW9uLm9wdGlvbnMsXG5cdFx0XHRcdFx0ZWRpdG9yLFxuXHRcdFx0XHRcdG5leHQ6ICgpID0+IGdvdG8oYWN0aW9uSXggKyAxKSxcblx0XHRcdFx0XHRwcmV2OiAoKSA9PiBnb3RvKGFjdGlvbkl4IC0gMSksXG5cdFx0XHRcdFx0dGltZXJcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIHN1Y2ggYWN0aW9uOiAnICsgYWN0aW9uLm5hbWUpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHR0aGlzLl9zdGF0ZSA9IFNUQVRFX1BMQVk7XG5cdFx0dGhpcy5fZWRpdG9yLnNldE9wdGlvbigncmVhZE9ubHknLCB0cnVlKTtcblx0XHR0aGlzLnRyaWdnZXIoJ3BsYXknKTtcblx0XHR0aW1lcigoKSA9PiBnb3RvKDApLCBkZWZhdWx0T3B0aW9ucy5iZWZvcmVEZWxheSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXVzZSBjdXJyZW50IHNjZW5hcmlvIHBsYXliYWNrLiBJdCBjYW4gYmUgcmVzdG9yZWQgd2l0aCBcblx0ICogPGNvZGU+cGxheSgpPC9jb2RlPiBtZXRob2QgY2FsbCBcblx0ICovXG5cdHBhdXNlKCkge1xuXHRcdHRoaXMuX3N0YXRlID0gU1RBVEVfUEFVU0U7XG5cdFx0dGhpcy50cmlnZ2VyKCdwYXVzZScpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RvcHMgcGxheWJhY2sgb2YgY3VycmVudCBzY2VuYXJpb1xuXHQgKi9cblx0c3RvcCgpIHtcblx0XHRpZiAodGhpcy5fc3RhdGUgIT09IFNUQVRFX0lETEUpIHtcblx0XHRcdHRoaXMuX3N0YXRlID0gU1RBVEVfSURMRTtcblx0XHRcdHRoaXMuX3RpbWVyUXVldWUubGVuZ3RoID0gMDtcblx0XHRcdHRoaXMuX2VkaXRvci5zZXRPcHRpb24oJ3JlYWRPbmx5JywgZmFsc2UpO1xuXHRcdFx0dGhpcy50cmlnZ2VyKCdzdG9wJyk7XG5cdFx0fVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmV0dXJucyBjdXJyZW50IHBsYXliYWNrIHN0YXRlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdGdldCBzdGF0ZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUb2dnbGUgcGxheWJhY2sgb2YgbW92aWUgc2NlbmFyaW9cblx0ICovXG5cdHRvZ2dsZSgpIHtcblx0XHRpZiAodGhpcy5fc3RhdGUgPT09IFNUQVRFX1BMQVkpIHtcblx0XHRcdHRoaXMucGF1c2UoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5wbGF5KCk7XG5cdFx0fVxuXHR9XG5cdFxuXHRyZXF1ZXN0VGltZXIoZm4sIGRlbGF5KSB7XG5cdFx0aWYgKHRoaXMuX3N0YXRlICE9PSBTVEFURV9QTEFZKSB7XG5cdFx0XHQvLyBzYXZlIGZ1bmN0aW9uIGNhbGwgaW50byBhIHF1ZXVlIHRpbGwgbmV4dCAncGxheSgpJyBjYWxsXG5cdFx0XHR0aGlzLl90aW1lclF1ZXVlLnB1c2goe1xuXHRcdFx0XHRmbjogZm4sXG5cdFx0XHRcdGRlbGF5OiBkZWxheVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiByZXF1ZXN0VGltZXIoZm4sIGRlbGF5KTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIGJvcnJvd2VkIGZyb20gQmFja2JvbmVcblx0LyoqXG5cdCAqIEJpbmQgb25lIG9yIG1vcmUgc3BhY2Ugc2VwYXJhdGVkIGV2ZW50cywgYGV2ZW50c2AsIHRvIGEgYGNhbGxiYWNrYFxuXHQgKiBmdW5jdGlvbi4gUGFzc2luZyBgXCJhbGxcImAgd2lsbCBiaW5kIHRoZSBjYWxsYmFjayB0byBhbGwgZXZlbnRzIGZpcmVkLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG5cdCAqIEBtZW1iZXJPZiBldmVudERpc3BhdGNoZXJcblx0ICovXG5cdG9uKGV2ZW50cywgY2FsbGJhY2ssIGNvbnRleHQpIHtcblx0XHR2YXIgY2FsbHMsIGV2ZW50LCBub2RlLCB0YWlsLCBsaXN0O1xuXHRcdGlmICghY2FsbGJhY2spIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRcblx0XHRldmVudHMgPSBldmVudHMuc3BsaXQoZXZlbnRTcGxpdHRlcik7XG5cdFx0Y2FsbHMgPSB0aGlzLl9jYWxsYmFja3MgfHwgKHRoaXMuX2NhbGxiYWNrcyA9IHt9KTtcblxuXHRcdC8vIENyZWF0ZSBhbiBpbW11dGFibGUgY2FsbGJhY2sgbGlzdCwgYWxsb3dpbmcgdHJhdmVyc2FsIGR1cmluZ1xuXHRcdC8vIG1vZGlmaWNhdGlvbi4gIFRoZSB0YWlsIGlzIGFuIGVtcHR5IG9iamVjdCB0aGF0IHdpbGwgYWx3YXlzIGJlIHVzZWRcblx0XHQvLyBhcyB0aGUgbmV4dCBub2RlLlxuXHRcdHdoaWxlIChldmVudCA9IGV2ZW50cy5zaGlmdCgpKSB7XG5cdFx0XHRsaXN0ID0gY2FsbHNbZXZlbnRdO1xuXHRcdFx0bm9kZSA9IGxpc3QgPyBsaXN0LnRhaWwgOiB7fTtcblx0XHRcdG5vZGUubmV4dCA9IHRhaWwgPSB7fTtcblx0XHRcdG5vZGUuY29udGV4dCA9IGNvbnRleHQ7XG5cdFx0XHRub2RlLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdFx0XHRjYWxsc1tldmVudF0gPSB7XG5cdFx0XHRcdHRhaWwgOiB0YWlsLFxuXHRcdFx0XHRuZXh0IDogbGlzdCA/IGxpc3QubmV4dCA6IG5vZGVcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogUmVtb3ZlIG9uZSBvciBtYW55IGNhbGxiYWNrcy4gSWYgYGNvbnRleHRgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG5cdCAqIGNhbGxiYWNrcyB3aXRoIHRoYXQgZnVuY3Rpb24uIElmIGBjYWxsYmFja2AgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcblx0ICogY2FsbGJhY2tzIGZvciB0aGUgZXZlbnQuIElmIGBldmVudHNgIGlzIG51bGwsIHJlbW92ZXMgYWxsIGJvdW5kXG5cdCAqIGNhbGxiYWNrcyBmb3IgYWxsIGV2ZW50cy5cblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuXHQgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dFxuXHQgKi9cblx0b2ZmKGV2ZW50cywgY2FsbGJhY2ssIGNvbnRleHQpIHtcblx0XHR2YXIgZXZlbnQsIGNhbGxzLCBub2RlLCB0YWlsLCBjYiwgY3R4O1xuXG5cdFx0Ly8gTm8gZXZlbnRzLCBvciByZW1vdmluZyAqYWxsKiBldmVudHMuXG5cdFx0aWYgKCEoY2FsbHMgPSB0aGlzLl9jYWxsYmFja3MpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGlmICghKGV2ZW50cyB8fCBjYWxsYmFjayB8fCBjb250ZXh0KSkge1xuXHRcdFx0ZGVsZXRlIHRoaXMuX2NhbGxiYWNrcztcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdC8vIExvb3AgdGhyb3VnaCB0aGUgbGlzdGVkIGV2ZW50cyBhbmQgY29udGV4dHMsIHNwbGljaW5nIHRoZW0gb3V0IG9mIHRoZVxuXHRcdC8vIGxpbmtlZCBsaXN0IG9mIGNhbGxiYWNrcyBpZiBhcHByb3ByaWF0ZS5cblx0XHRldmVudHMgPSBldmVudHMgPyBldmVudHMuc3BsaXQoZXZlbnRTcGxpdHRlcikgOiBPYmplY3Qua2V5cyhjYWxscyk7XG5cdFx0d2hpbGUgKGV2ZW50ID0gZXZlbnRzLnNoaWZ0KCkpIHtcblx0XHRcdG5vZGUgPSBjYWxsc1tldmVudF07XG5cdFx0XHRkZWxldGUgY2FsbHNbZXZlbnRdO1xuXHRcdFx0aWYgKCFub2RlIHx8ICEoY2FsbGJhY2sgfHwgY29udGV4dCkpIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyBsaXN0LCBvbWl0dGluZyB0aGUgaW5kaWNhdGVkIGNhbGxiYWNrcy5cblx0XHRcdHRhaWwgPSBub2RlLnRhaWw7XG5cdFx0XHR3aGlsZSAoKG5vZGUgPSBub2RlLm5leHQpICE9PSB0YWlsKSB7XG5cdFx0XHRcdGNiID0gbm9kZS5jYWxsYmFjaztcblx0XHRcdFx0Y3R4ID0gbm9kZS5jb250ZXh0O1xuXHRcdFx0XHRpZiAoKGNhbGxiYWNrICYmIGNiICE9PSBjYWxsYmFjaykgfHwgKGNvbnRleHQgJiYgY3R4ICE9PSBjb250ZXh0KSkge1xuXHRcdFx0XHRcdHRoaXMub24oZXZlbnQsIGNiLCBjdHgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUcmlnZ2VyIG9uZSBvciBtYW55IGV2ZW50cywgZmlyaW5nIGFsbCBib3VuZCBjYWxsYmFja3MuIENhbGxiYWNrcyBhcmVcblx0ICogcGFzc2VkIHRoZSBzYW1lIGFyZ3VtZW50cyBhcyBgdHJpZ2dlcmAgaXMsIGFwYXJ0IGZyb20gdGhlIGV2ZW50IG5hbWVcblx0ICogKHVubGVzcyB5b3UncmUgbGlzdGVuaW5nIG9uIGBcImFsbFwiYCwgd2hpY2ggd2lsbCBjYXVzZSB5b3VyIGNhbGxiYWNrXG5cdCAqIHRvIHJlY2VpdmUgdGhlIHRydWUgbmFtZSBvZiB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50KS5cblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50c1xuXHQgKi9cblx0dHJpZ2dlcihldmVudHMsIC4uLnJlc3QpIHtcblx0XHR2YXIgZXZlbnQsIG5vZGUsIGNhbGxzLCB0YWlsLCBhcmdzLCBhbGw7XG5cdFx0aWYgKCEoY2FsbHMgPSB0aGlzLl9jYWxsYmFja3MpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0XG5cdFx0YWxsID0gY2FsbHMuYWxsO1xuXHRcdGV2ZW50cyA9IGV2ZW50cy5zcGxpdChldmVudFNwbGl0dGVyKTtcblxuXHRcdC8vIEZvciBlYWNoIGV2ZW50LCB3YWxrIHRocm91Z2ggdGhlIGxpbmtlZCBsaXN0IG9mIGNhbGxiYWNrcyB0d2ljZSxcblx0XHQvLyBmaXJzdCB0byB0cmlnZ2VyIHRoZSBldmVudCwgdGhlbiB0byB0cmlnZ2VyIGFueSBgXCJhbGxcImAgY2FsbGJhY2tzLlxuXHRcdHdoaWxlIChldmVudCA9IGV2ZW50cy5zaGlmdCgpKSB7XG5cdFx0XHRpZiAobm9kZSA9IGNhbGxzW2V2ZW50XSkge1xuXHRcdFx0XHR0YWlsID0gbm9kZS50YWlsO1xuXHRcdFx0XHR3aGlsZSAoKG5vZGUgPSBub2RlLm5leHQpICE9PSB0YWlsKSB7XG5cdFx0XHRcdFx0bm9kZS5jYWxsYmFjay5hcHBseShub2RlLmNvbnRleHQgfHwgdGhpcywgcmVzdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChub2RlID0gYWxsKSB7XG5cdFx0XHRcdHRhaWwgPSBub2RlLnRhaWw7XG5cdFx0XHRcdGFyZ3MgPSBbIGV2ZW50IF0uY29uY2F0KHJlc3QpO1xuXHRcdFx0XHR3aGlsZSAoKG5vZGUgPSBub2RlLm5leHQpICE9PSB0YWlsKSB7XG5cdFx0XHRcdFx0bm9kZS5jYWxsYmFjay5hcHBseShub2RlLmNvbnRleHQgfHwgdGhpcywgYXJncyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufTtcblxuLyoqXG4gKiBQYXJzZXMgYWN0aW9uIGNhbGwgZnJvbSBzdHJpbmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBwYXJzZUFjdGlvbkNhbGwoZGF0YSkge1xuXHRpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG5cdFx0dmFyIHBhcnRzID0gZGF0YS5zcGxpdCgnOicpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBwYXJ0cy5zaGlmdCgpLFxuXHRcdFx0b3B0aW9uczogcGFydHMuam9pbignOicpXG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHR2YXIgbmFtZSA9IE9iamVjdC5rZXlzKGRhdGEpWzBdO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0b3B0aW9uczogZGF0YVtuYW1lXVxuXHRcdH07XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVxdWVzdFRpbWVyKGZuLCBkZWxheSkge1xuXHRpZiAoIWRlbGF5KSB7XG5cdFx0Zm4oKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gc2V0VGltZW91dChmbiwgZGVsYXkpO1xuXHR9XG59IiwidmFyIHByb3BDYWNoZSA9IHt9O1xuXG4vLyBkZXRlY3QgQ1NTIDNEIFRyYW5zZm9ybXMgZm9yIHNtb290aGVyIGFuaW1hdGlvbnMgXG5leHBvcnQgdmFyIGhhczNkID0gKGZ1bmN0aW9uKCkge1xuXHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0dmFyIGNzc1RyYW5zZm9ybSA9IHByZWZpeGVkKCd0cmFuc2Zvcm0nKTtcblx0aWYgKGNzc1RyYW5zZm9ybSkge1xuXHRcdGVsLnN0eWxlW2Nzc1RyYW5zZm9ybV0gPSAndHJhbnNsYXRlWigwKSc7XG5cdFx0cmV0dXJuICgvdHJhbnNsYXRlei9pKS50ZXN0KGVsLnN0eWxlW2Nzc1RyYW5zZm9ybV0pOyBcblx0fVxuXHRcblx0cmV0dXJuIGZhbHNlO1xufSkoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChvYmosIC4uLmFyZ3MpIHtcblx0YXJncy5mb3JFYWNoKGEgPT4ge1xuXHRcdGlmICh0eXBlb2YgYSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdE9iamVjdC5rZXlzKGEpLmZvckVhY2goa2V5ID0+IG9ialtrZXldID0gYVtrZXldKTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gb2JqO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9BcnJheShvYmosIGl4PTApIHtcblx0cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG9iaiwgaXgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgcHJlZml4ZWQgKGlmIHJlcXVpcmVkKSBDU1MgcHJvcGVydHkgbmFtZVxuICogQHBhcmFtICB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmVmaXhlZChwcm9wKSB7XG5cdGlmIChwcm9wIGluIHByb3BDYWNoZSkge1xuXHRcdHJldHVybiBwcm9wQ2FjaGVbcHJvcF07XG5cdH1cblxuXHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0dmFyIHN0eWxlID0gZWwuc3R5bGU7XG5cblx0dmFyIHByZWZpeGVzID0gWydvJywgJ21zJywgJ21veicsICd3ZWJraXQnXTtcblx0dmFyIHByb3BzID0gW3Byb3BdO1xuXHR2YXIgY2FwaXRhbGl6ZSA9IGZ1bmN0aW9uKHN0cikge1xuXHRcdHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyKDEpO1xuXHR9O1xuXG5cdHByb3AgPSBwcm9wLnJlcGxhY2UoL1xcLShbYS16XSkvZywgZnVuY3Rpb24oc3RyLCBjaCkge1xuXHRcdHJldHVybiBjaC50b1VwcGVyQ2FzZSgpO1xuXHR9KTtcblxuXHR2YXIgY2FwUHJvcCA9IGNhcGl0YWxpemUocHJvcCk7XG5cdHByZWZpeGVzLmZvckVhY2goZnVuY3Rpb24ocHJlZml4KSB7XG5cdFx0cHJvcHMucHVzaChwcmVmaXggKyBjYXBQcm9wLCBjYXBpdGFsaXplKHByZWZpeCkgKyBjYXBQcm9wKTtcblx0fSk7XG5cblx0Zm9yICh2YXIgaSA9IDAsIGlsID0gcHJvcHMubGVuZ3RoOyBpIDwgaWw7IGkrKykge1xuXHRcdGlmIChwcm9wc1tpXSBpbiBzdHlsZSkge1xuXHRcdFx0cmV0dXJuIHByb3BDYWNoZVtwcm9wXSA9IHByb3BzW2ldO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBwcm9wQ2FjaGVbcHJvcF0gPSBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9zT2JqKG9iaikge1xuXHRyZXR1cm4ge1xuXHRcdGxpbmU6IG9iai5saW5lLFxuXHRcdGNoOiBvYmouY2hcblx0fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnNvcihlZGl0b3IsIHN0YXJ0PSdmcm9tJykge1xuXHRyZXR1cm4gcG9zT2JqKGVkaXRvci5nZXRDdXJzb3Ioc3RhcnQpKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBwcm9kdWNlcyA8Y29kZT57bGluZSwgY2h9PC9jb2RlPiBvYmplY3QgZnJvbVxuICogcGFzc2VkIGFyZ3VtZW50XG4gKiBAcGFyYW0ge09iamVjdH0gcG9zXG4gKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvclxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQb3MocG9zLCBlZGl0b3IpIHtcblx0aWYgKHBvcyA9PT0gJ2NhcmV0Jykge1xuXHRcdHJldHVybiBnZXRDdXJzb3IoZWRpdG9yKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgcG9zID09PSAnc3RyaW5nJykge1xuXHRcdGlmICh+cG9zLmluZGV4T2YoJzonKSkge1xuXHRcdFx0bGV0IHBhcnRzID0gcG9zLnNwbGl0KCc6Jyk7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRsaW5lOiArcGFydHNbMF0sXG5cdFx0XHRcdGNoOiArcGFydHNbMV1cblx0XHRcdH07XG5cdFx0fVxuXHRcdFxuXHRcdHBvcyA9ICtwb3M7XG5cdH1cblx0XG5cdGlmICh0eXBlb2YgcG9zID09PSAnbnVtYmVyJykge1xuXHRcdHJldHVybiBwb3NPYmooZWRpdG9yLnBvc0Zyb21JbmRleChwb3MpKTtcblx0fVxuXHRcblx0cmV0dXJuIHBvc09iaihwb3MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGUodG1wbCwgZGF0YSkge1xuXHR2YXIgZm4gPSBkYXRhID0+IHRtcGwucmVwbGFjZSgvPCUoWy09XSk/XFxzKihbXFx3XFwtXSspXFxzKiU+L2csIChzdHIsIG9wLCBrZXkpID0+IGRhdGFba2V5LnRyaW0oKV0pO1xuXHRyZXR1cm4gZGF0YSA/IGZuKGRhdGEpIDogZm47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kKGFyciwgaXRlcikge1xuXHR2YXIgZm91bmQ7XG5cdGFyci5zb21lKChpdGVtLCBpLCBhcnIpID0+IHtcblx0XHRpZiAoaXRlcihpdGVtLCBpLCBhcnIpKSB7XG5cdFx0XHRyZXR1cm4gZm91bmQgPSBpdGVtO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBmb3VuZDtcbn1cblxuLyoqXG4gKiBSZWxheGVkIEpTT04gcGFyc2VyLlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEByZXR1cm5zIHtPYmplY3R9IFxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKU09OKHRleHQpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gKG5ldyBGdW5jdGlvbigncmV0dXJuICcgKyB0ZXh0KSkoKTtcblx0fSBjYXRjaChlKSB7XG5cdFx0cmV0dXJuIHt9O1xuXHR9XG59IiwidmFyIGdsb2JhbCA9IHdpbmRvdztcbnZhciB0aW1lID0gRGF0ZS5ub3cgXG5cdD8gZnVuY3Rpb24oKSB7cmV0dXJuIERhdGUubm93KCk7fVxuXHQ6IGZ1bmN0aW9uKCkge3JldHVybiArbmV3IERhdGU7fTtcblxudmFyIGluZGV4T2YgPSAnaW5kZXhPZicgaW4gQXJyYXkucHJvdG90eXBlXG5cdD8gZnVuY3Rpb24oYXJyYXksIHZhbHVlKSB7cmV0dXJuIGFycmF5LmluZGV4T2YodmFsdWUpO31cblx0OiBmdW5jdGlvbihhcnJheSwgdmFsdWUpIHtcblx0XHRmb3IgKHZhciBpID0gMCwgaWwgPSBhcnJheS5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7XG5cdFx0XHRpZiAoYXJyYXlbaV0gPT09IHZhbHVlKSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiAtMTtcblx0fTtcblxuZnVuY3Rpb24gZXh0ZW5kKG9iaikge1xuXHRmb3IgKHZhciBpID0gMSwgaWwgPSBhcmd1bWVudHMubGVuZ3RoLCBzb3VyY2U7IGkgPCBpbDsgaSsrKSB7XG5cdFx0c291cmNlID0gYXJndW1lbnRzW2ldO1xuXHRcdGlmIChzb3VyY2UpIHtcblx0XHRcdGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7XG5cdFx0XHRcdG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIHJlcXVlc3RBbmltYXRpb25GcmFtZSBwb2x5ZmlsbCBieSBFcmlrIE3DtmxsZXJcbiAqIGZpeGVzIGZyb20gUGF1bCBJcmlzaCBhbmQgVGlubyBaaWpkZWxcbiAqIGh0dHA6Ly9wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvXG4gKiBodHRwOi8vbXkub3BlcmEuY29tL2Vtb2xsZXIvYmxvZy8yMDExLzEyLzIwL3JlcXVlc3RhbmltYXRpb25mcmFtZS1mb3Itc21hcnQtZXItYW5pbWF0aW5nXG4gKi9cbihmdW5jdGlvbigpIHtcblx0dmFyIGxhc3RUaW1lID0gMDtcblx0dmFyIHZlbmRvcnMgPSBbICdtcycsICdtb3onLCAnd2Via2l0JywgJ28nIF07XG5cdGZvciAodmFyIHggPSAwOyB4IDwgdmVuZG9ycy5sZW5ndGggJiYgIWdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7ICsreCkge1xuXHRcdGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBnbG9iYWxbdmVuZG9yc1t4XSArICdSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcblx0XHRnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBnbG9iYWxbdmVuZG9yc1t4XSArICdDYW5jZWxBbmltYXRpb25GcmFtZSddXG5cdFx0XHRcdHx8IGdsb2JhbFt2ZW5kb3JzW3hdICsgJ0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSddO1xuXHR9XG5cdFxuXHRpZiAoIWdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXG5cdFx0Z2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBlbGVtZW50KSB7XG5cdFx0XHR2YXIgY3VyclRpbWUgPSB0aW1lKCk7XG5cdFx0XHR2YXIgdGltZVRvQ2FsbCA9IE1hdGgubWF4KDAsIDE2IC0gKGN1cnJUaW1lIC0gbGFzdFRpbWUpKTtcblx0XHRcdHZhciBpZCA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpO1xuXHRcdFx0fSwgdGltZVRvQ2FsbCk7XG5cdFx0XHRsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcblx0XHRcdHJldHVybiBpZDtcblx0XHR9O1xuXG5cdGlmICghZ2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lKVxuXHRcdGdsb2JhbC5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRjbGVhclRpbWVvdXQoaWQpO1xuXHRcdH07XG59KCkpO1xuXG5cbnZhciBkdW1teUZuID0gZnVuY3Rpb24oKSB7fTtcbnZhciBhbmltcyA9IFtdO1xudmFyIGlkQ291bnRlciA9IDA7XG5cbnZhciBkZWZhdWx0cyA9IHtcblx0ZHVyYXRpb246IDUwMCwgLy8gbXNcblx0ZGVsYXk6IDAsXG5cdGVhc2luZzogJ2xpbmVhcicsXG5cdHN0YXJ0OiBkdW1teUZuLFxuXHRzdGVwOiBkdW1teUZuLFxuXHRjb21wbGV0ZTogZHVtbXlGbixcblx0YXV0b3N0YXJ0OiB0cnVlLFxuXHRyZXZlcnNlOiBmYWxzZVxufTtcblxuZXhwb3J0IHZhciBlYXNpbmdzID0ge1xuXHRsaW5lYXI6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gYyAqIHQgLyBkICsgYjtcblx0fSxcblx0aW5RdWFkOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMqKHQvPWQpKnQgKyBiO1xuXHR9LFxuXHRvdXRRdWFkOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIC1jICoodC89ZCkqKHQtMikgKyBiO1xuXHR9LFxuXHRpbk91dFF1YWQ6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRpZigodC89ZC8yKSA8IDEpIHJldHVybiBjLzIqdCp0ICsgYjtcblx0XHRyZXR1cm4gLWMvMiAqKCgtLXQpKih0LTIpIC0gMSkgKyBiO1xuXHR9LFxuXHRpbkN1YmljOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMqKHQvPWQpKnQqdCArIGI7XG5cdH0sXG5cdG91dEN1YmljOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMqKCh0PXQvZC0xKSp0KnQgKyAxKSArIGI7XG5cdH0sXG5cdGluT3V0Q3ViaWM6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRpZigodC89ZC8yKSA8IDEpIHJldHVybiBjLzIqdCp0KnQgKyBiO1xuXHRcdHJldHVybiBjLzIqKCh0LT0yKSp0KnQgKyAyKSArIGI7XG5cdH0sXG5cdGluRXhwbzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHJldHVybih0PT0wKSA/IGIgOiBjICogTWF0aC5wb3coMiwgMTAgKih0L2QgLSAxKSkgKyBiIC0gYyAqIDAuMDAxO1xuXHR9LFxuXHRvdXRFeHBvOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuKHQ9PWQpID8gYitjIDogYyAqIDEuMDAxICooLU1hdGgucG93KDIsIC0xMCAqIHQvZCkgKyAxKSArIGI7XG5cdH0sXG5cdGluT3V0RXhwbzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdGlmKHQ9PTApIHJldHVybiBiO1xuXHRcdGlmKHQ9PWQpIHJldHVybiBiK2M7XG5cdFx0aWYoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yICogTWF0aC5wb3coMiwgMTAgKih0IC0gMSkpICsgYiAtIGMgKiAwLjAwMDU7XG5cdFx0cmV0dXJuIGMvMiAqIDEuMDAwNSAqKC1NYXRoLnBvdygyLCAtMTAgKiAtLXQpICsgMikgKyBiO1xuXHR9LFxuXHRpbkVsYXN0aWM6IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIGEsIHApIHtcblx0XHR2YXIgcztcblx0XHRpZih0PT0wKSByZXR1cm4gYjsgIGlmKCh0Lz1kKT09MSkgcmV0dXJuIGIrYzsgIGlmKCFwKSBwPWQqLjM7XG5cdFx0aWYoIWEgfHwgYSA8IE1hdGguYWJzKGMpKSB7IGE9Yzsgcz1wLzQ7IH0gZWxzZSBzID0gcC8oMipNYXRoLlBJKSAqIE1hdGguYXNpbihjL2EpO1xuXHRcdHJldHVybiAtKGEqTWF0aC5wb3coMiwxMCoodC09MSkpICogTWF0aC5zaW4oKHQqZC1zKSooMipNYXRoLlBJKS9wICkpICsgYjtcblx0fSxcblx0b3V0RWxhc3RpYzogZnVuY3Rpb24odCwgYiwgYywgZCwgYSwgcCkge1xuXHRcdHZhciBzO1xuXHRcdGlmKHQ9PTApIHJldHVybiBiOyAgaWYoKHQvPWQpPT0xKSByZXR1cm4gYitjOyAgaWYoIXApIHA9ZCouMztcblx0XHRpZighYSB8fCBhIDwgTWF0aC5hYnMoYykpIHsgYT1jOyBzPXAvNDsgfSBlbHNlIHMgPSBwLygyKk1hdGguUEkpICogTWF0aC5hc2luKGMvYSk7XG5cdFx0cmV0dXJuKGEqTWF0aC5wb3coMiwtMTAqdCkgKiBNYXRoLnNpbigodCpkLXMpKigyKk1hdGguUEkpL3AgKSArIGMgKyBiKTtcblx0fSxcblx0aW5PdXRFbGFzdGljOiBmdW5jdGlvbih0LCBiLCBjLCBkLCBhLCBwKSB7XG5cdFx0dmFyIHM7XG5cdFx0aWYodD09MCkgcmV0dXJuIGI7IFxuXHRcdGlmKCh0Lz1kLzIpPT0yKSByZXR1cm4gYitjO1xuXHRcdGlmKCFwKSBwPWQqKC4zKjEuNSk7XG5cdFx0aWYoIWEgfHwgYSA8IE1hdGguYWJzKGMpKSB7IGE9Yzsgcz1wLzQ7IH0gICAgICAgZWxzZSBzID0gcC8oMipNYXRoLlBJKSAqIE1hdGguYXNpbihjL2EpO1xuXHRcdGlmKHQgPCAxKSByZXR1cm4gLS41KihhKk1hdGgucG93KDIsMTAqKHQtPTEpKSAqIE1hdGguc2luKCh0KmQtcykqKDIqTWF0aC5QSSkvcCApKSArIGI7XG5cdFx0cmV0dXJuIGEqTWF0aC5wb3coMiwtMTAqKHQtPTEpKSAqIE1hdGguc2luKCh0KmQtcykqKDIqTWF0aC5QSSkvcCApKi41ICsgYyArIGI7XG5cdH0sXG5cdGluQmFjazogZnVuY3Rpb24odCwgYiwgYywgZCwgcykge1xuXHRcdGlmKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcblx0XHRyZXR1cm4gYyoodC89ZCkqdCooKHMrMSkqdCAtIHMpICsgYjtcblx0fSxcblx0b3V0QmFjazogZnVuY3Rpb24odCwgYiwgYywgZCwgcykge1xuXHRcdGlmKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcblx0XHRyZXR1cm4gYyooKHQ9dC9kLTEpKnQqKChzKzEpKnQgKyBzKSArIDEpICsgYjtcblx0fSxcblx0aW5PdXRCYWNrOiBmdW5jdGlvbih0LCBiLCBjLCBkLCBzKSB7XG5cdFx0aWYocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4O1xuXHRcdGlmKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIGMvMioodCp0KigoKHMqPSgxLjUyNSkpKzEpKnQgLSBzKSkgKyBiO1xuXHRcdHJldHVybiBjLzIqKCh0LT0yKSp0KigoKHMqPSgxLjUyNSkpKzEpKnQgKyBzKSArIDIpICsgYjtcblx0fSxcblx0aW5Cb3VuY2U6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gYyAtIHRoaXMub3V0Qm91bmNlKHQsIGQtdCwgMCwgYywgZCkgKyBiO1xuXHR9LFxuXHRvdXRCb3VuY2U6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRpZigodC89ZCkgPCgxLzIuNzUpKSB7XG5cdFx0XHRyZXR1cm4gYyooNy41NjI1KnQqdCkgKyBiO1xuXHRcdH0gZWxzZSBpZih0IDwoMi8yLjc1KSkge1xuXHRcdFx0cmV0dXJuIGMqKDcuNTYyNSoodC09KDEuNS8yLjc1KSkqdCArIC43NSkgKyBiO1xuXHRcdH0gZWxzZSBpZih0IDwoMi41LzIuNzUpKSB7XG5cdFx0XHRyZXR1cm4gYyooNy41NjI1Kih0LT0oMi4yNS8yLjc1KSkqdCArIC45Mzc1KSArIGI7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBjKig3LjU2MjUqKHQtPSgyLjYyNS8yLjc1KSkqdCArIC45ODQzNzUpICsgYjtcblx0XHR9XG5cdH0sXG5cdGluT3V0Qm91bmNlOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0aWYodCA8IGQvMikgcmV0dXJuIHRoaXMuaW5Cb3VuY2UodCoyLCAwLCBjLCBkKSAqIC41ICsgYjtcblx0XHRyZXR1cm4gdGhpcy5vdXRCb3VuY2UodCoyLWQsIDAsIGMsIGQpICogLjUgKyBjKi41ICsgYjtcblx0fSxcblx0b3V0SGFyZDogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHZhciB0cyA9ICh0Lz1kKSp0O1xuXHRcdHZhciB0YyA9IHRzKnQ7XG5cdFx0cmV0dXJuIGIgKyBjKigxLjc1KnRjKnRzICsgLTcuNDQ3NSp0cyp0cyArIDEyLjk5NSp0YyArIC0xMS41OTUqdHMgKyA1LjI5NzUqdCk7XG5cdH1cbn07XG5cbmZ1bmN0aW9uIG1haW5Mb29wKCkge1xuXHRpZiAoIWFuaW1zLmxlbmd0aCkge1xuXHRcdC8vIG5vIGFuaW1hdGlvbnMgbGVmdCwgc3RvcCBwb2xsaW5nXG5cdFx0cmV0dXJuO1xuXHR9XG5cdFxuXHR2YXIgbm93ID0gdGltZSgpO1xuXHR2YXIgZmlsdGVyZWQgPSBbXSwgdHdlZW4sIG9wdDtcblxuXHQvLyBkbyBub3QgdXNlIEFycmF5LmZpbHRlcigpIG9mIF8uZmlsdGVyKCkgZnVuY3Rpb25cblx0Ly8gc2luY2UgdHdlZW7igJlzIGNhbGxiYWNrcyBjYW4gYWRkIG5ldyBhbmltYXRpb25zXG5cdC8vIGluIHJ1bnRpbWUuIEluIHRoaXMgY2FzZSwgZmlsdGVyIGZ1bmN0aW9uIHdpbGwgbG9vc2Vcblx0Ly8gbmV3bHkgY3JlYXRlZCBhbmltYXRpb25cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhbmltcy5sZW5ndGg7IGkrKykge1xuXHRcdHR3ZWVuID0gYW5pbXNbaV07XG5cblx0XHRpZiAoIXR3ZWVuLmFuaW1hdGluZykge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0b3B0ID0gdHdlZW4ub3B0aW9ucztcblxuXHRcdGlmICh0d2Vlbi5zdGFydFRpbWUgPiBub3cpIHtcblx0XHRcdGZpbHRlcmVkLnB1c2godHdlZW4pO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0aWYgKHR3ZWVuLmluZmluaXRlKSB7XG5cdFx0XHQvLyBvcHQuc3RlcC5jYWxsKHR3ZWVuLCAwKTtcblx0XHRcdG9wdC5zdGVwKDAsIHR3ZWVuKTtcblx0XHRcdGZpbHRlcmVkLnB1c2godHdlZW4pO1xuXHRcdH0gZWxzZSBpZiAodHdlZW4ucG9zID09PSAxIHx8IHR3ZWVuLmVuZFRpbWUgPD0gbm93KSB7XG5cdFx0XHR0d2Vlbi5wb3MgPSAxO1xuXHRcdFx0Ly8gb3B0LnN0ZXAuY2FsbCh0d2Vlbiwgb3B0LnJldmVyc2UgPyAwIDogMSk7XG5cdFx0XHRvcHQuc3RlcChvcHQucmV2ZXJzZSA/IDAgOiAxLCB0d2Vlbik7XG5cdFx0XHR0d2Vlbi5zdG9wKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHR3ZWVuLnBvcyA9IG9wdC5lYXNpbmcobm93IC0gdHdlZW4uc3RhcnRUaW1lLCAwLCAxLCBvcHQuZHVyYXRpb24pO1xuXHRcdFx0Ly8gb3B0LnN0ZXAuY2FsbCh0d2Vlbiwgb3B0LnJldmVyc2UgPyAxIC0gdHdlZW4ucG9zIDogdHdlZW4ucG9zKTtcblx0XHRcdG9wdC5zdGVwKG9wdC5yZXZlcnNlID8gMSAtIHR3ZWVuLnBvcyA6IHR3ZWVuLnBvcywgdHdlZW4pO1xuXHRcdFx0ZmlsdGVyZWQucHVzaCh0d2Vlbik7XG5cdFx0fVx0XHRcdFxuXHR9XG5cblx0YW5pbXMgPSBmaWx0ZXJlZDtcblxuXHRpZiAoYW5pbXMubGVuZ3RoKSB7XG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKG1haW5Mb29wKTtcblx0fVxufVxuXG5mdW5jdGlvbiBhZGRUb1F1ZXVlKHR3ZWVuKSB7XG5cdGlmIChpbmRleE9mKGFuaW1zLCB0d2VlbikgPT0gLTEpIHtcblx0XHRhbmltcy5wdXNoKHR3ZWVuKTtcblx0XHRpZiAoYW5pbXMubGVuZ3RoID09IDEpIHtcblx0XHRcdG1haW5Mb29wKCk7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBUd2VlbiB7XG5cdGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblx0XHR0aGlzLm9wdGlvbnMgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblx0XG5cdFx0dmFyIGUgPSB0aGlzLm9wdGlvbnMuZWFzaW5nO1xuXHRcdGlmICh0eXBlb2YgZSA9PSAnc3RyaW5nJykge1xuXHRcdFx0aWYgKCFlYXNpbmdzW2VdKVxuXHRcdFx0XHR0aHJvdyAnVW5rbm93biBcIicgKyBlICsgJ1wiIGVhc2luZyBmdW5jdGlvbic7XG5cdFx0XHR0aGlzLm9wdGlvbnMuZWFzaW5nID0gZWFzaW5nc1tlXTtcblx0XHR9XG5cdFx0XG5cdFx0aWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuZWFzaW5nICE9ICdmdW5jdGlvbicpXG5cdFx0XHR0aHJvdyAnRWFzaW5nIHNob3VsZCBiZSBhIGZ1bmN0aW9uJztcblxuXHRcdHRoaXMuX2lkID0gJ3R3JyArIChpZENvdW50ZXIrKyk7XG5cdFx0XG5cdFx0aWYgKHRoaXMub3B0aW9ucy5hdXRvc3RhcnQpIHtcblx0XHRcdHRoaXMuc3RhcnQoKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3RhcnQgYW5pbWF0aW9uIGZyb20gdGhlIGJlZ2lubmluZ1xuXHQgKi9cblx0c3RhcnQoKSB7XG5cdFx0aWYgKCF0aGlzLmFuaW1hdGluZykge1xuXHRcdFx0dGhpcy5wb3MgPSAwO1xuXHRcdFx0dGhpcy5zdGFydFRpbWUgPSB0aW1lKCkgKyAodGhpcy5vcHRpb25zLmRlbGF5IHx8IDApO1xuXHRcdFx0dGhpcy5pbmZpbml0ZSA9IHRoaXMub3B0aW9ucy5kdXJhdGlvbiA9PT0gJ2luZmluaXRlJztcblx0XHRcdHRoaXMuZW5kVGltZSA9IHRoaXMuaW5maW5pdGUgPyAwIDogdGhpcy5zdGFydFRpbWUgKyB0aGlzLm9wdGlvbnMuZHVyYXRpb247XG5cdFx0XHR0aGlzLmFuaW1hdGluZyA9IHRydWU7XG5cdFx0XHR0aGlzLm9wdGlvbnMuc3RhcnQodGhpcyk7XG5cdFx0XHRhZGRUb1F1ZXVlKHRoaXMpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0LyoqXG5cdCAqIFN0b3AgYW5pbWF0aW9uXG5cdCAqL1xuXHRzdG9wKCkge1xuXHRcdGlmICh0aGlzLmFuaW1hdGluZykge1xuXHRcdFx0dGhpcy5hbmltYXRpbmcgPSBmYWxzZTtcblx0XHRcdGlmICh0aGlzLm9wdGlvbnMuY29tcGxldGUpIHtcblx0XHRcdFx0dGhpcy5vcHRpb25zLmNvbXBsZXRlKHRoaXMpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHRvZ2dsZSgpIHtcblx0XHRpZiAodGhpcy5hbmltYXRpbmcpIHtcblx0XHRcdHRoaXMuc3RvcCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnN0YXJ0KCk7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHR3ZWVuKG9wdGlvbnMpIHtcblx0cmV0dXJuIG5ldyBUd2VlbihvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBHZXQgb3Igc2V0IGRlZmF1bHQgdmFsdWVcbiAqIEBwYXJhbSAge1N0cmluZ30gbmFtZVxuICogQHBhcmFtICB7T2JqZWN0fSB2YWx1ZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdHMobmFtZSwgdmFsdWUpIHtcblx0aWYgKHR5cGVvZiB2YWx1ZSAhPSAndW5kZWZpbmVkJykge1xuXHRcdGRlZmF1bHRzW25hbWVdID0gdmFsdWU7XG5cdH1cblxuXHRyZXR1cm4gZGVmYXVsdHNbbmFtZV07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbGwgYWN0aXZlIGFuaW1hdGlvbiBvYmplY3RzLlxuICogRm9yIGRlYnVnZ2luZyBtb3N0bHlcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gX2FsbCgpIHtcblx0cmV0dXJuIGFuaW1zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcCgpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhbmltcy5sZW5ndGg7IGkrKykge1xuXHRcdGFuaW1zW2ldLnN0b3AoKTtcblx0fVxuXG5cdGFuaW1zLmxlbmd0aCA9IDA7XG59OyIsIi8qKlxuICogU2hvd3MgZmFrZSBwcm9tcHQgZGlhbG9nIHdpdGggaW50ZXJhY3RpdmUgdmFsdWUgdHlwaW5nXG4gKi9cbmltcG9ydCB0d2VlbiBmcm9tICcuLi92ZW5kb3IvdHdlZW4nO1xuaW1wb3J0IHtleHRlbmQsIHRlbXBsYXRlLCBoYXMzZCwgcHJlZml4ZWR9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCAqIGFzIGRvbSBmcm9tICcuLi9kb20nO1xuXG52YXIgZGlhbG9nSW5zdGFuY2UgPSBudWxsO1xudmFyIGJnSW5zdGFuY2UgPSBudWxsO1xudmFyIGxhc3RUd2VlbiA9IG51bGw7XG5cbmV4cG9ydCB2YXIgYWN0aW9ucyA9IHtcblx0cHJvbXB0KHtvcHRpb25zLCBlZGl0b3IsIG5leHQsIHRpbWVyfSkge1xuXHRcdG9wdGlvbnMgPSBleHRlbmQoe1xuXHRcdFx0dGl0bGU6ICdFbnRlciBzb21ldGhpbmcnLFxuXHRcdFx0ZGVsYXk6IDgwLCAgICAgICAgLy8gZGVsYXkgYmV0d2VlbiBjaGFyYWN0ZXIgdHlwaW5nXG5cdFx0XHR0eXBlRGVsYXk6IDEwMDAsICAvLyB0aW1lIHRvIHdhaXQgYmVmb3JlIHR5cGluZyB0ZXh0XG5cdFx0XHRoaWRlRGVsYXk6IDIwMDAgICAvLyB0aW1lIHRvIHdhaXQgYmVmb3JlIGhpZGluZyBwcm9tcHQgZGlhbG9nXG5cdFx0fSwgd3JhcCgndGV4dCcsIG9wdGlvbnMpKTtcblx0XHRcblx0XHRzaG93KG9wdGlvbnMudGl0bGUsIGVkaXRvci5nZXRXcmFwcGVyRWxlbWVudCgpLCBmdW5jdGlvbihkaWFsb2cpIHtcblx0XHRcdHRpbWVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0eXBlVGV4dChkaWFsb2cucXVlcnlTZWxlY3RvcignLkNvZGVNaXJyb3ItcHJvbXB0X19pbnB1dCcpLCBvcHRpb25zLCB0aW1lciwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dGltZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRoaWRlKG5leHQpO1xuXHRcdFx0XHRcdH0sIG9wdGlvbnMuaGlkZURlbGF5KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9LCBvcHRpb25zLnR5cGVEZWxheSk7XG5cdFx0fSk7XG5cdH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93KHRleHQsIHRhcmdldCwgY2FsbGJhY2spIHtcblx0aGlkZSgpO1xuXHRkaWFsb2dJbnN0YW5jZSA9IGRvbS50b0RPTShgPGRpdiBjbGFzcz1cIkNvZGVNaXJyb3ItcHJvbXB0XCI+XG5cdFx0PGRpdiBjbGFzcz1cIkNvZGVNaXJyb3ItcHJvbXB0X190aXRsZVwiPiR7dGV4dH08L2Rpdj5cblx0XHQ8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwicHJvbXB0XCIgY2xhc3M9XCJDb2RlTWlycm9yLXByb21wdF9faW5wdXRcIiByZWFkb25seT1cInJlYWRvbmx5XCIgLz5cblx0XHQ8L2Rpdj5gKTtcblx0YmdJbnN0YW5jZSA9IGRvbS50b0RPTSgnPGRpdiBjbGFzcz1cIkNvZGVNaXJyb3ItcHJvbXB0X19zaGFkZVwiPjwvZGl2PicpO1xuXHRcblx0dGFyZ2V0LmFwcGVuZENoaWxkKGRpYWxvZ0luc3RhbmNlKTtcblx0dGFyZ2V0LmFwcGVuZENoaWxkKGJnSW5zdGFuY2UpO1xuXHRcblx0YW5pbWF0ZVNob3coZGlhbG9nSW5zdGFuY2UsIGJnSW5zdGFuY2UsIHtjb21wbGV0ZTogY2FsbGJhY2t9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGUoY2FsbGJhY2spIHtcblx0aWYgKGRpYWxvZ0luc3RhbmNlKSB7XG5cdFx0aWYgKGxhc3RUd2Vlbikge1xuXHRcdFx0bGFzdFR3ZWVuLnN0b3AoKTtcblx0XHRcdGxhc3RUd2VlbiA9IG51bGw7XG5cdFx0fVxuXHRcdGFuaW1hdGVIaWRlKGRpYWxvZ0luc3RhbmNlLCBiZ0luc3RhbmNlLCB7Y29tcGxldGU6IGNhbGxiYWNrfSk7XG5cdFx0ZGlhbG9nSW5zdGFuY2UgPSBiZ0luc3RhbmNlID0gbnVsbDtcblx0fSBlbHNlIGlmIChjYWxsYmFjaykge1xuXHRcdGNhbGxiYWNrKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGRpYWxvZ1xuICogQHBhcmFtIHtFbGVtZW50fSBiZ1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGVTaG93KGRpYWxvZywgYmcsIG9wdGlvbnM9e30pIHtcblx0dmFyIGNzc1RyYW5zZm9ybSA9IHByZWZpeGVkKCd0cmFuc2Zvcm0nKTtcblx0dmFyIGRpYWxvZ1N0eWxlID0gZGlhbG9nLnN0eWxlO1xuXHR2YXIgYmdTdHlsZSA9IGJnLnN0eWxlO1xuXHR2YXIgaGVpZ2h0ID0gZGlhbG9nLm9mZnNldEhlaWdodDtcblx0dmFyIHRtcGwgPSB0ZW1wbGF0ZShoYXMzZCA/ICd0cmFuc2xhdGUzZCgwLCA8JT0gcG9zICU+LCAwKScgOiAndHJhbnNsYXRlKDAsIDwlPSBwb3MgJT4pJyk7XG5cblx0YmdTdHlsZS5vcGFjaXR5ID0gMDtcblx0dHdlZW4oe1xuXHRcdGR1cmF0aW9uOiAyMDAsXG5cdFx0c3RlcChwb3MpIHtcblx0XHRcdGJnU3R5bGUub3BhY2l0eSA9IHBvcztcblx0XHR9XG5cdH0pO1xuXHRcblx0ZGlhbG9nU3R5bGVbY3NzVHJhbnNmb3JtXSA9IHRtcGwoe3BvczogLWhlaWdodH0pO1xuXHRcblx0cmV0dXJuIGxhc3RUd2VlbiA9IHR3ZWVuKHtcblx0XHRkdXJhdGlvbjogNDAwLFxuXHRcdGVhc2luZzogJ291dEN1YmljJyxcblx0XHRzdGVwKHBvcykge1xuXHRcdFx0ZGlhbG9nU3R5bGVbY3NzVHJhbnNmb3JtXSA9IHRtcGwoe3BvczogKC1oZWlnaHQgKiAoMSAtIHBvcykpICsgJ3B4J30pO1xuXHRcdH0sXG5cdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0bGFzdFR3ZWVuID0gbnVsbDtcblx0XHRcdG9wdGlvbnMuY29tcGxldGUgJiYgb3B0aW9ucy5jb21wbGV0ZShkaWFsb2csIGJnKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZGlhbG9nXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJnXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBhbmltYXRlSGlkZShkaWFsb2csIGJnLCBvcHRpb25zKSB7XG5cdHZhciBkaWFsb2dTdHlsZSA9IGRpYWxvZy5zdHlsZTtcblx0dmFyIGJnU3R5bGUgPSBiZy5zdHlsZTtcblx0dmFyIGhlaWdodCA9IGRpYWxvZy5vZmZzZXRIZWlnaHQ7XG5cdHZhciBjc3NUcmFuc2Zvcm0gPSBwcmVmaXhlZCgndHJhbnNmb3JtJyk7XG5cdHZhciB0bXBsID0gdGVtcGxhdGUoaGFzM2QgPyAndHJhbnNsYXRlM2QoMCwgPCU9IHBvcyAlPiwgMCknIDogJ3RyYW5zbGF0ZSgwLCA8JT0gcG9zICU+KScpO1xuXG5cdHJldHVybiB0d2Vlbih7XG5cdFx0ZHVyYXRpb246IDIwMCxcblx0XHRzdGVwKHBvcykge1xuXHRcdFx0ZGlhbG9nU3R5bGVbY3NzVHJhbnNmb3JtXSA9IHRtcGwoe3BvczogKC1oZWlnaHQgKiBwb3MpICsgJ3B4J30pO1xuXHRcdFx0YmdTdHlsZS5vcGFjaXR5ID0gMSAtIHBvcztcblx0XHR9LFxuXHRcdGNvbXBsZXRlKCkge1xuXHRcdFx0ZG9tLnJlbW92ZShbZGlhbG9nLCBiZ10pO1xuXHRcdFx0b3B0aW9ucy5jb21wbGV0ZSAmJiBvcHRpb25zLmNvbXBsZXRlKGRpYWxvZywgYmcpO1xuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIHR5cGVUZXh0KHRhcmdldCwgb3B0aW9ucywgdGltZXIsIG5leHQpIHtcblx0dmFyIGNoYXJzID0gb3B0aW9ucy50ZXh0LnNwbGl0KCcnKTtcblx0dGltZXIoZnVuY3Rpb24gcGVyZm9ybSgpIHtcblx0XHR0YXJnZXQudmFsdWUgKz0gY2hhcnMuc2hpZnQoKTtcblx0XHRpZiAoY2hhcnMubGVuZ3RoKSB7XG5cdFx0XHR0aW1lcihwZXJmb3JtLCBvcHRpb25zLmRlbGF5KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV4dCgpO1xuXHRcdH1cblx0fSwgb3B0aW9ucy5kZWxheSk7XG59XG5cbmZ1bmN0aW9uIHdyYXAoa2V5LCB2YWx1ZSkge1xuXHRyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyA/IHZhbHVlIDoge1trZXldOiB2YWx1ZX07XG59IiwiLyoqXG4gKiBFeHRlbnNpb24gdGhhdCBhbGxvd3MgYXV0aG9ycyB0byBkaXNwbGF5IGNvbnRleHQgdG9vbHRpcHMgYm91bmQgdG8gc3BlY2lmaWNcbiAqIHBvc2l0aW9uc1xuICovXG5pbXBvcnQgdHdlZW4gZnJvbSAnLi4vdmVuZG9yL3R3ZWVuJztcbmltcG9ydCB7ZXh0ZW5kLCBwcmVmaXhlZCwgbWFrZVBvcywgaGFzM2R9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCAqIGFzIGRvbSBmcm9tICcuLi9kb20nO1xuXG52YXIgaW5zdGFuY2UgPSBudWxsO1xudmFyIGxhc3RUd2VlbiA9IG51bGw7XG5cbmV4cG9ydCB2YXIgYWxpZ25EZWZhdWx0cyA9IHtcblx0LyoqIENTUyBzZWxlY3RvciBmb3IgZ2V0dGluZyBwb3B1cCB0YWlsICovXG5cdHRhaWxDbGFzczogJ0NvZGVNaXJyb3ItdG9vbHRpcF9fdGFpbCcsXG5cdFxuXHQvKiogQ2xhc3MgbmFtZSBmb3Igc3dpdGNoaW5nIHRhaWwvcG9wdXAgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGFyZ2V0IHBvaW50ICovXG5cdGJlbG93Q2xhc3M6ICdDb2RlTWlycm9yLXRvb2x0aXBfYmVsb3cnLFxuXHRcblx0LyoqIE1pbiBkaXN0YW5jZSBiZXR3ZWVuIHBvcHVwIGFuZCB2aWV3cG9ydCAqL1xuXHRwb3B1cE1hcmdpbjogNSxcblx0XG5cdC8qKiBNaW4gZGlzdGFuY2UgYmV0d2VlbiBwb3B1cCBsZWZ0L3JpZ2h0IGVkZ2UgYW5kIGl0cyB0YWlsICovXG5cdHRhaWxNYXJnaW46IDExXG59O1xuXG5leHBvcnQgdmFyIGFjdGlvbnMgPSB7XG5cdC8qKlxuXHQgKiBTaG93cyB0b29sdGlwIHdpdGggZ2l2ZW4gdGV4dCwgd2FpdCBmb3IgYG9wdGlvbnMud2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIHRoZW4gaGlkZXMgdG9vbHRpcFxuXHQgKi9cblx0dG9vbHRpcCh7b3B0aW9ucywgZWRpdG9yLCBuZXh0LCBwcmV2LCB0aW1lcn0pIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdHdhaXQ6IDQwMDAsICAgLy8gdGltZSB0byB3YWl0IGJlZm9yZSBoaWRpbmcgdG9vbHRpcFxuXHRcdFx0cG9zOiAnY2FyZXQnICAvLyBwb3NpdGlvbiB3aGVyZSB0b29sdGlwIHNob3VsZCBwb2ludCB0b1xuXHRcdH0sIHdyYXAoJ3RleHQnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0dmFyIHBvcyA9IHJlc29sdmVQb3NpdGlvbihvcHRpb25zLnBvcywgZWRpdG9yKTtcblx0XHRzaG93KG9wdGlvbnMudGV4dCwgcG9zLCBmdW5jdGlvbigpIHtcblx0XHRcdC8vIHRpbWVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gXHRoaWRlKCgpID0+IHRpbWVyKG5leHQpKTtcblx0XHRcdC8vIH0sIG9wdGlvbnMud2FpdCk7XG5cblx0XHRcdGluc3RhbmNlLnF1ZXJ5U2VsZWN0b3IoJy5Db2RlTWlycm9yLXRvb2x0aXBfX3ByZXYnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0aGlkZShwcmV2KVxuXHRcdFx0XHRjb25zb2xlLmxvZygncHJldicpXG5cdFx0XHR9KVxuXG5cdFx0XHRpbnN0YW5jZS5xdWVyeVNlbGVjdG9yKCcuQ29kZU1pcnJvci10b29sdGlwX19uZXh0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdGhpZGUobmV4dClcblx0XHRcdFx0Y29uc29sZS5sb2coJ25leHQnKVxuXHRcdFx0fSlcblx0XHR9KTtcblx0fSxcblxuXHQvKipcblx0ICogU2hvd3MgdG9vbHRpcCB3aXRoIHNwZWNpZmllZCB0ZXh0LiBUaGlzIHRvb2x0aXAgc2hvdWxkIGJlIGV4cGxpY2l0bHkgXG5cdCAqIGhpZGRlbiB3aXRoIGBoaWRlVG9vbHRpcGAgYWN0aW9uXG5cdCAqL1xuXHRzaG93VG9vbHRpcCh7b3B0aW9ucywgZWRpdG9yLCBuZXh0LCB0aW1lcn0pIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdHBvczogJ2NhcmV0JyAgLy8gcG9zaXRpb24gd2hlcmUgdG9vbHRpcCBzaG91bGQgcG9pbnQgdG9cblx0XHR9LCB3cmFwKCd0ZXh0Jywgb3B0aW9ucykpO1xuXHRcdFxuXHRcdHNob3cob3B0aW9ucy50ZXh0LCByZXNvbHZlUG9zaXRpb24ob3B0aW9ucy5wb3MsIGVkaXRvcikpO1xuXHRcdG5leHQoKTtcblx0fSxcblxuXHQvKipcblx0ICogSGlkZXMgdG9vbHRpcCwgcHJldmlvdXNseSBzaG93biBieSAnc2hvd1Rvb2x0aXAnIGFjdGlvblxuXHQgKi9cblx0aGlkZVRvb2x0aXAoe29wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXJ9KSB7XG5cdFx0aGlkZShuZXh0KTtcblx0fVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3codGV4dCwgcG9zLCBjYWxsYmFjaykge1xuXHRoaWRlKCk7XG5cdFxuXHRpbnN0YW5jZSA9IGRvbS50b0RPTShgPGRpdiBjbGFzcz1cIkNvZGVNaXJyb3ItdG9vbHRpcFwiPlxuXHRcdDxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXRvb2x0aXBfX2NvbnRlbnRcIj4ke3RleHR9PC9kaXY+XG5cdFx0PGRpdiBjbGFzcz1cIkNvZGVNaXJyb3ItdG9vbHRpcF9fdGFpbFwiPjwvZGl2PlxuXHRcdDxidXR0b24gY2xhc3M9XCJDb2RlTWlycm9yLXRvb2x0aXBfX3ByZXZcIj5wcmV2PC9idXR0b24+XG5cdFx0PGJ1dHRvbiBjbGFzcz1cIkNvZGVNaXJyb3ItdG9vbHRpcF9fbmV4dFwiPm5leHQ8L2J1dHRvbj5cblx0PC9kaXY+YCk7XG5cblx0ZG9tLmNzcyhpbnN0YW5jZSwgcHJlZml4ZWQoJ3RyYW5zZm9ybScpLCAnc2NhbGUoMCknKTtcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbnN0YW5jZSk7XG5cblx0YWxpZ25Qb3B1cFdpdGhUYWlsKGluc3RhbmNlLCB7cG9zaXRpb246IHBvc30pO1xuXHRhbmltYXRlU2hvdyhpbnN0YW5jZSwge2NvbXBsZXRlOiBjYWxsYmFja30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGlkZShjYWxsYmFjaykge1xuXHRpZiAoaW5zdGFuY2UpIHtcblx0XHRpZiAobGFzdFR3ZWVuKSB7XG5cdFx0XHRsYXN0VHdlZW4uc3RvcCgpO1xuXHRcdFx0bGFzdFR3ZWVuID0gbnVsbDtcblx0XHR9XG5cdFx0YW5pbWF0ZUhpZGUoaW5zdGFuY2UsIHtjb21wbGV0ZTogY2FsbGJhY2t9KTtcblx0XHRpbnN0YW5jZSA9IG51bGw7XG5cdH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcblx0XHRjYWxsYmFjaygpO1xuXHR9XG59XG5cbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgZmluZHMgb3B0aW1hbCBwb3NpdGlvbiBvZiB0b29sdGlwIHBvcHVwIG9uIHBhZ2VcbiAqIGFuZCBhbGlnbnMgcG9wdXAgdGFpbCB3aXRoIHRoaXMgcG9zaXRpb25cbiAqIEBwYXJhbSB7RWxlbWVudH0gcG9wdXBcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGFsaWduUG9wdXBXaXRoVGFpbChwb3B1cCwgb3B0aW9ucz17fSkge1xuXHRvcHRpb25zID0gZXh0ZW5kKHt9LCBhbGlnbkRlZmF1bHRzLCBvcHRpb25zKTtcblx0XG5cdGRvbS5jc3MocG9wdXAsIHtcblx0XHRsZWZ0OiAwLFxuXHRcdHRvcDogMFxuXHR9KTtcblx0XG5cdHZhciB0YWlsID0gcG9wdXAucXVlcnlTZWxlY3RvcignLicgKyBvcHRpb25zLnRhaWxDbGFzcyk7XG5cdFxuXHR2YXIgcmVzdWx0WCA9IDAsIHJlc3VsdFkgPSAwO1xuXHR2YXIgcG9zID0gb3B0aW9ucy5wb3NpdGlvbjtcblx0dmFyIHZwID0gZG9tLnZpZXdwb3J0UmVjdCgpO1xuXHRcblx0dmFyIHdpZHRoID0gcG9wdXAub2Zmc2V0V2lkdGg7XG5cdHZhciBoZWlnaHQgPSBwb3B1cC5vZmZzZXRIZWlnaHQ7XG5cdFxuXHR2YXIgaXNUb3A7XG5cdFx0XG5cdC8vIGNhbGN1bGF0ZSBob3Jpem9udGFsIHBvc2l0aW9uXG5cdHJlc3VsdFggPSBNYXRoLm1pbih2cC53aWR0aCAtIHdpZHRoIC0gb3B0aW9ucy5wb3B1cE1hcmdpbiwgTWF0aC5tYXgob3B0aW9ucy5wb3B1cE1hcmdpbiwgcG9zLnggLSB2cC5sZWZ0IC0gd2lkdGggLyAyKSk7XG5cdFxuXHQvLyBjYWxjdWxhdGUgdmVydGljYWwgcG9zaXRpb25cblx0aWYgKGhlaWdodCArIHRhaWwub2Zmc2V0SGVpZ2h0ICsgb3B0aW9ucy5wb3B1cE1hcmdpbiArIHZwLnRvcCA8IHBvcy55KSB7XG5cdFx0Ly8gcGxhY2UgYWJvdmUgdGFyZ2V0IHBvc2l0aW9uXG5cdFx0cmVzdWx0WSA9IE1hdGgubWF4KDAsIHBvcy55IC0gaGVpZ2h0IC0gdGFpbC5vZmZzZXRIZWlnaHQpO1xuXHRcdGlzVG9wID0gdHJ1ZTtcblx0fSBlbHNlIHtcblx0XHQvLyBwbGFjZSBiZWxvdyB0YXJnZXQgcG9zaXRpb24gXG5cdFx0cmVzdWx0WSA9IHBvcy55ICsgdGFpbC5vZmZzZXRIZWlnaHQ7XG5cdFx0aXNUb3AgPSBmYWxzZTtcblx0fVxuXHRcblx0Ly8gY2FsY3VsYXRlIHRhaWwgcG9zaXRpb25cblx0dmFyIHRhaWxNaW5MZWZ0ID0gb3B0aW9ucy50YWlsTWFyZ2luO1xuXHR2YXIgdGFpbE1heExlZnQgPSB3aWR0aCAtIG9wdGlvbnMudGFpbE1hcmdpbjtcblx0dGFpbC5zdHlsZS5sZWZ0ID0gTWF0aC5taW4odGFpbE1heExlZnQsIE1hdGgubWF4KHRhaWxNaW5MZWZ0LCBwb3MueCAtIHJlc3VsdFggLSB2cC5sZWZ0KSkgKyAncHgnO1xuXHRcblx0ZG9tLmNzcyhwb3B1cCwge1xuXHRcdGxlZnQ6IHJlc3VsdFgsXG5cdFx0dG9wOiByZXN1bHRZXG5cdH0pO1xuXHRcblx0cG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShvcHRpb25zLmJlbG93Q2xhc3MsICFpc1RvcCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtqUXVlcnl9IGVsZW1cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFxuICovXG5mdW5jdGlvbiBhbmltYXRlU2hvdyhlbGVtLCBvcHRpb25zPXt9KSB7XG5cdG9wdGlvbnMgPSBleHRlbmQoe30sIGFsaWduRGVmYXVsdHMsIG9wdGlvbnMpO1xuXHR2YXIgY3NzT3JpZ2luID0gcHJlZml4ZWQoJ3RyYW5zZm9ybS1vcmlnaW4nKTtcblx0dmFyIGNzc1RyYW5zZm9ybSA9IHByZWZpeGVkKCd0cmFuc2Zvcm0nKTtcblx0dmFyIHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHR2YXIgdGFpbCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLicgKyBvcHRpb25zLnRhaWxDbGFzcyk7XG5cdHZhciB4T3JpZ2luID0gZG9tLmNzcyh0YWlsLCAnbGVmdCcpO1xuXHR2YXIgeU9yaWdpbiA9IHRhaWwub2Zmc2V0VG9wO1xuXHRpZiAoZWxlbS5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9ucy5iZWxvd0NsYXNzKSkge1xuXHRcdHlPcmlnaW4gLT0gdGFpbC5vZmZzZXRIZWlnaHQ7XG5cdH1cblx0XG5cdHlPcmlnaW4gKz0gJ3B4JztcblxuXHRzdHlsZVtjc3NPcmlnaW5dID0geE9yaWdpbiArICcgJyArIHlPcmlnaW47XG5cdHZhciBwcmVmaXggPSBoYXMzZCA/ICd0cmFuc2xhdGVaKDApICcgOiAnJztcblx0XG5cdHJldHVybiBsYXN0VHdlZW4gPSB0d2Vlbih7XG5cdFx0ZHVyYXRpb246IDgwMCxcblx0XHRlYXNpbmc6ICdvdXRFbGFzdGljJyxcblx0XHRzdGVwKHBvcykge1xuXHRcdFx0c3R5bGVbY3NzVHJhbnNmb3JtXSA9IHByZWZpeCArICdzY2FsZSgnICsgcG9zICsgJyknO1xuXHRcdH0sXG5cdFx0Y29tcGxldGUoKSB7XG5cdFx0XHRzdHlsZVtjc3NUcmFuc2Zvcm1dID0gJ25vbmUnO1xuXHRcdFx0bGFzdFR3ZWVuID0gbnVsbDtcblx0XHRcdG9wdGlvbnMuY29tcGxldGUgJiYgb3B0aW9ucy5jb21wbGV0ZShlbGVtKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7alF1ZXJ5fSBlbGVtXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBhbmltYXRlSGlkZShlbGVtLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0cmV0dXJuIHR3ZWVuKHtcblx0XHRkdXJhdGlvbjogMjAwLFxuXHRcdGVhc2luZzogJ2xpbmVhcicsXG5cdFx0c3RlcDogZnVuY3Rpb24ocG9zKSB7XG5cdFx0XHRzdHlsZS5vcGFjaXR5ID0gKDEgLSBwb3MpO1xuXHRcdH0sXG5cdFx0Y29tcGxldGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0ZG9tLnJlbW92ZShlbGVtKTtcblx0XHRcdG9wdGlvbnMuY29tcGxldGUgJiYgb3B0aW9ucy5jb21wbGV0ZShlbGVtKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIFJlc29sdmVzIHBvc2l0aW9uIHdoZXJlIHRvb2x0aXAgc2hvdWxkIHBvaW50IHRvXG4gKiBAcGFyYW0ge09iamVjdH0gcG9zXG4gKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvclxuICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IHdpdGggPGNvZGU+eDwvY29kZT4gYW5kIDxjb2RlPnk8L2NvZGU+IFxuICogcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiByZXNvbHZlUG9zaXRpb24ocG9zLCBlZGl0b3IpIHtcblx0aWYgKHBvcyA9PT0gJ2NhcmV0Jykge1xuXHRcdC8vIGdldCBhYnNvbHV0ZSBwb3NpdGlvbiBvZiBjdXJyZW50IGNhcmV0IHBvc2l0aW9uXG5cdFx0cmV0dXJuIHNhbml0aXplQ2FyZXRQb3MoZWRpdG9yLmN1cnNvckNvb3Jkcyh0cnVlKSk7XG5cdH1cblxuXHRpZiAodHlwZW9mIHBvcyA9PT0gJ29iamVjdCcpIHtcblx0XHRpZiAoJ3gnIGluIHBvcyAmJiAneScgaW4gcG9zKSB7XG5cdFx0XHQvLyBwYXNzZWQgYWJzb2x1dGUgY29vcmRpbmF0ZXNcblx0XHRcdHJldHVybiBwb3M7XG5cdFx0fVxuXG5cdFx0aWYgKCdsZWZ0JyBpbiBwb3MgJiYgJ3RvcCcgaW4gcG9zKSB7XG5cdFx0XHQvLyBwYXNzZWQgYWJzb2x1dGUgY29vcmRpbmF0ZXNcblx0XHRcdHJldHVybiBzYW5pdGl6ZUNhcmV0UG9zKHBvcyk7XG5cdFx0fVxuXHR9XG5cdFxuXHRwb3MgPSBtYWtlUG9zKHBvcywgZWRpdG9yKTtcblx0cmV0dXJuIHNhbml0aXplQ2FyZXRQb3MoZWRpdG9yLmNoYXJDb29yZHMocG9zKSk7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplQ2FyZXRQb3MocG9zKSB7XG5cdGlmICgnbGVmdCcgaW4gcG9zKSB7XG5cdFx0cG9zLnggPSBwb3MubGVmdDtcblx0fVxuXG5cdGlmICgndG9wJyBpbiBwb3MpIHtcblx0XHRwb3MueSA9IHBvcy50b3A7XG5cdH1cblxuXHRyZXR1cm4gcG9zO1xufVxuXG5mdW5jdGlvbiB3cmFwKGtleSwgdmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyB2YWx1ZSA6IHtba2V5XTogdmFsdWV9O1xufSJdfQ=="}