{"version":3,"sources":["node_modules/browser-pack/_prelude.js","lib/actions.js","lib/dom.js","lib/movie.js","lib/scenario.js","lib/utils.js","lib/vendor/tween.js","lib/widgets/outline.js","lib/widgets/prompt.js","lib/widgets/tooltip.js"],"names":[],"mappings":"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","file":"movie.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","import {extend, makePos, getCursor} from './utils';\n\nvar actions = {\n\t/**\n\t * Type-in passed text into current editor char-by-char\n\t * @param {Object} options Current options\n\t * @param {CodeMirror} editor Editor instance where action should be \n\t * performed\n\t * @param {Function} next Function to call when action performance\n\t * is completed\n\t * @param {Function} timer Function that creates timer for delayed \n\t * execution. This timer will automatically delay execution when\n\t * scenario is paused and revert when played again \n\t */\n\ttype: function(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\ttext: '',  // text to type\n\t\t\tdelay: 60, // delay between character typing\n\t\t\tpos: null  // initial position where to start typing\n\t\t}, wrap('text', options));\n\t\t\n\t\tif (!options.text) {\n\t\t\tthrow new Error('No text provided for \"type\" action');\n\t\t}\n\t\t\n\t\tif (options.pos !== null) {\n\t\t\teditor.setCursor(makePos(options.pos, editor));\n\t\t}\n\t\t\n\t\tvar chars = options.text.split('');\n\t\t\n\t\ttimer(function perform() {\n\t\t\tvar ch = chars.shift();\n\t\t\teditor.replaceSelection(ch, 'end');\n\t\t\tif (chars.length) {\n\t\t\t\ttimer(perform, options.delay);\n\t\t\t} else {\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.delay);\n\t},\n\t\n\t/**\n\t * Wait for a specified timeout\n\t * @param options\n\t * @param editor\n\t * @param next\n\t * @param timer\n\t */\n\twait: function(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\ttimeout: 100\n\t\t}, wrap('timeout', options));\n\t\t\n\t\ttimer(next, parseInt(options.timeout, 10));\n\t},\n\t\n\t/**\n\t * Move caret to a specified position\n\t */\n\tmoveTo: function(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\tdelay: 80,\n\t\t\timmediate: false // TODO: remove, use delay: 0 instead\n\t\t}, wrap('pos', options));\n\t\t\n\t\tif (typeof options.pos === 'undefined') {\n\t\t\tthrow new Error('No position specified for \"moveTo\" action');\n\t\t}\n\t\t\n\t\tvar curPos = getCursor(editor);\n\t\t// reset selection, if exists\n\t\teditor.setSelection(curPos, curPos);\n\t\tvar targetPos = makePos(options.pos, editor);\n\t\t\n\t\tif (options.immediate || !options.delay) {\n\t\t\teditor.setCursor(targetPos);\n\t\t\tnext();\n\t\t}\n\n\t\tvar deltaLine = targetPos.line - curPos.line;\n\t\tvar deltaChar = targetPos.ch - curPos.ch;\n\t\tvar steps = Math.max(deltaChar, deltaLine);\n\t\t// var stepLine = deltaLine / steps;\n\t\t// var stepChar = deltaChar / steps;\n\t\tvar stepLine = deltaLine < 0 ? -1 : 1;\n\t\tvar stepChar = deltaChar < 0 ? -1 : 1;\n\n\t\ttimer(function perform() {\n\t\t\tcurPos = getCursor(editor);\n\t\t\tif (steps > 0 && !(curPos.line == targetPos.line && curPos.ch == targetPos.ch)) {\n\n\t\t\t\tif (curPos.line != targetPos.line) {\n\t\t\t\t\tcurPos.line += stepLine;\n\t\t\t\t}\n\n\t\t\t\tif (curPos.ch != targetPos.ch) {\n\t\t\t\t\tcurPos.ch += stepChar;\n\t\t\t\t}\n\n\t\t\t\teditor.setCursor(curPos);\n\t\t\t\tsteps--;\n\t\t\t\ttimer(perform, options.delay);\n\t\t\t} else {\n\t\t\t\teditor.setCursor(targetPos);\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.delay);\n\t},\n\n\t/**\n\t * Similar to \"moveTo\" function but with immediate cursor position update\n\t */\n\tjumpTo: function(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\tafterDelay: 200\n\t\t}, wrap('pos', options));\n\n\t\tif (typeof options.pos === 'undefined') {\n\t\t\tthrow new Error('No position specified for \"jumpTo\" action');\n\t\t}\n\t\t\n\t\teditor.setCursor(makePos(options.pos, editor));\n\t\ttimer(next, options.afterDelay);\n\t},\n\t\n\t/**\n\t * Executes predefined CodeMirror command\n\t * @param {Object} options\n\t * @param {CodeMirror} editor\n\t * @param {Function} next\n\t * @param {Function} timer\n\t */\n\trun: function(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\tbeforeDelay: 500,\n\t\t\ttimes: 1\n\t\t}, wrap('command', options));\n\t\t\n\t\tvar times = options.times;\n\t\ttimer(function perform() {\n\t\t\tif (typeof options.command === 'function') {\n\t\t\t\toptions.command(editor, options);\n\t\t\t} else {\n\t\t\t\teditor.execCommand(options.command);\t\n\t\t\t}\n\t\t\t\n\t\t\tif (--times > 0) {\n\t\t\t\ttimer(perform, options.beforeDelay);\n\t\t\t} else {\n\t\t\t\tnext();\n\t\t\t}\n\t\t}, options.beforeDelay);\n\t},\n\t\n\t/**\n\t * Creates selection for specified position\n\t * @param {Object} options\n\t * @param {CodeMirror} editor\n\t * @param {Function} next\n\t * @param {Function} timer\n\t */\n\tselect: function(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\tfrom: 'caret'\n\t\t}, wrap('to', options));\n\t\t\n\t\tvar from = makePos(options.from, editor);\n\t\tvar to = makePos(options.to, editor);\n\t\teditor.setSelection(from, to);\n\t\tnext();\n\t}\n};\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}\n\nexport default actions;","\"use strict\";\n\nimport {toArray} from './utils';\n\nvar w3cCSS = document.defaultView && document.defaultView.getComputedStyle;\n\nexport function viewportRect() {\n\tvar body = document.body;\n\tvar docElem = document.documentElement;\n\tvar clientTop = docElem.clientTop  || body.clientTop  || 0;\n\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\tvar scrollTop  = window.pageYOffset || docElem.scrollTop  || body.scrollTop;\n\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\n\t\n\treturn {\n\t\ttop: scrollTop  - clientTop,\n\t\tleft: scrollLeft - clientLeft,\n\t\twidth: body.clientWidth || docElem.clientWidth,\n\t\theight: body.clientHeight || docElem.clientHeight\n\t};\n}\n\n/**\n * Removes element from parent\n * @param {Element} elem\n * @returns {Element}\n */\nexport function remove(elem) {\n\tar(elem).forEach(el => el.parentNode && el.parentNode.removeChild(el));\n\treturn elem;\n}\n\n/**\n * Renders string into DOM element\n * @param {String} str\n * @returns {Element}\n */\nexport function toDOM(str) {\n\tvar div = document.createElement('div');\n\tdiv.innerHTML = str;\n\treturn div.firstChild;\n}\n\n/**\n * Sets or retrieves CSS property value\n * @param {Element} elem\n * @param {String} prop\n * @param {String} val\n */\nexport function css(elem, prop, val) {\n\tif (typeof prop === 'string' && val == null) {\n\t\treturn getCSS(elem, prop);\n\t}\n\t\n\tif (typeof prop === 'string') {\n\t\tvar obj = {};\n\t\tobj[prop] = val;\n\t\tprop = obj;\n\t}\n\t\n\tsetCSS(elem, prop);\n}\n\nfunction ar(obj) {\n\tif (obj.length === +obj.length) {\n\t\treturn toArray(obj);\n\t}\n\t\n\treturn Array.isArray(obj) ? obj : [obj];\n}\n\nfunction toCamelCase(name) {\n\treturn name.replace(/\\-(\\w)/g, function(str, p1) {\n\t\treturn p1.toUpperCase();\n\t});\n}\n\n/**\n * Returns CSS property value of given element.\n * @author jQuery Team\n * @param {Element} elem\n * @param {String} name CSS property value\n */\nfunction getCSS(elem, name) {\n\tvar rnumpx = /^-?\\d+(?:px)?$/i,\n\t\trnum = /^-?\\d(?:\\.\\d+)?/,\n\t\trsuf = /\\d$/;\n\t\n\tvar nameCamel = toCamelCase(name);\n\t// If the property exists in style[], then it's been set\n\t// recently (and is current)\n\tif (elem.style[nameCamel]) {\n\t\treturn elem.style[nameCamel];\n\t} \n\t\t\n\tif (w3cCSS) {\n\t\tvar cs = window.getComputedStyle(elem, '');\n\t\treturn cs.getPropertyValue(name);\n\t}\n\t\n\tif (elem.currentStyle) {\n\t\tvar ret = elem.currentStyle[name] || elem.currentStyle[nameCamel];\n\t\tvar style = elem.style || elem;\n\t\t\n\t\t// From the awesome hack by Dean Edwards\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n\t\t\n\t\t// If we're not dealing with a regular pixel number\n\t\t// but a number that has a weird ending, we need to convert it to pixels\n\t\tif (!rnumpx.test(ret) && rnum.test(ret)) {\n\t\t\t// Remember the original values\n\t\t\tvar left = style.left, rsLeft = elem.runtimeStyle.left;\n\t\t\t\n\t\t\t// Put in the new values to get a computed value out\n\t\t\telem.runtimeStyle.left = elem.currentStyle.left;\n\t\t\tvar suffix = rsuf.test(ret) ? 'em' : '';\n\t\t\tstyle.left = nameCamel === 'fontSize' ? '1em' : (ret + suffix || 0);\n\t\t\tret = style.pixelLeft + 'px';\n\t\t\t\n\t\t\t// Revert the changed values\n\t\t\tstyle.left = left;\n\t\t\telem.runtimeStyle.left = rsLeft;\n\t\t}\n\t\t\n\t\treturn ret;\n\t}\n}\n\n/**\n * Sets CSS properties to given element\n * @param {Element} elem\n * @param {Object} params CSS properties to set\n */\nfunction setCSS(elem, params) {\n\tif (!elem) {\n\t\treturn;\n\t}\n\n\tvar numProps = {'line-height': 1, 'z-index': 1, opacity: 1};\n\tvar props = Object.keys(params).map(k => {\n\t\tvar v = params[k];\n\t\tvar name = k.replace(/([A-Z])/g, '-$1').toLowerCase();\n\t\treturn name + ':' + ((typeof v === 'number' && !(name in numProps)) ? v + 'px' : v);\n\t});\n\n\telem.style.cssText += ';' + props.join(';');\n}","/**\n * A high-level library interface for creating scenarios over textarea\n * element. The <code>CodeMirror.movie</code> takes reference to textarea\n * element (or its ID) and parses its content for initial content value,\n * scenario and outline.\n */\n\"use strict\";\n\nimport {parseJSON, extend, toArray} from './utils';\nimport Scenario from './scenario';\nimport outline from './widgets/outline';\n\nvar ios = /AppleWebKit/.test(navigator.userAgent) && /Mobile\\/\\w+/.test(navigator.userAgent);\nvar mac = ios || /Mac/.test(navigator.platform);\n\nvar macCharMap = {\n\t'ctrl': '⌃',\n\t'control': '⌃',\n\t'cmd': '⌘',\n\t'shift': '⇧',\n\t'alt': '⌥',\n\t'enter': '⏎',\n\t'tab': '⇥',\n\t'left': '←',\n\t'right': '→',\n\t'up': '↑',\n\t'down': '↓'\n};\n\t\nvar pcCharMap = {\n\t'cmd': 'Ctrl',\n\t'control': 'Ctrl',\n\t'ctrl': 'Ctrl',\n\t'alt': 'Alt',\n\t'shift': 'Shift',\n\t'left': '←',\n\t'right': '→',\n\t'up': '↑',\n\t'down': '↓'\n};\n\nexport var defaultOptions = {\n\t/**\n\t * Automatically parse movie definition from textarea content. Setting\n\t * this property to <code>false</code> assumes that user wants to\n\t * explicitly provide movie data: initial value, scenario etc.\n\t */\n\tparse: true,\n\t\n\t/**\n\t * String or regexp used to separate sections of movie definition, e.g.\n\t * default value, scenario and editor options\n\t */\n\tsectionSeparator: '@@@',\n\t\n\t/** Regular expression to extract outline from scenario line */\n\toutlineSeparator: /\\s+:::\\s+(.+)$/,\n\t\n\t/** Automatically prettify keyboard shortcuts in outline */\n\tprettifyKeys: true,\n\t\n\t/** Strip parentheses from prettyfied keyboard shortcut definition */\n\tstripParentheses: false\n};\n\n/**\n * High-level function to create movie instance on textarea.\n * @param {Element} target Reference to textarea, either <code>Element</code>\n * or string ID. It can also accept existing CodeMirror object.\n * @param {Object} movieOptions Movie options. See <code>defaultOptions</code>\n * for value reference\n * @param {Object} editorOptions Additional options passed to CodeMirror\n * editor initializer.\n */\nexport default function movie(target, movieOptions={}, editorOptions={}) {\n\tsetupCodeMirror();\n\n\tif (typeof target === 'string') {\n\t\ttarget = document.getElementById(target);\n\t}\n\n\tvar targetIsTextarea = target.nodeName.toLowerCase() === 'textarea';\n\t\n\tmovieOptions = extend({}, defaultOptions, movieOptions);\n\teditorOptions = extend({\n\t\ttheme: 'espresso',\n\t\tmode : 'text/html',\n\t\tindentWithTabs: true,\n\t\ttabSize: 4,\n\t\tlineNumbers : true,\n\t\tpreventCursorMovement: true\n\t}, editorOptions);\n\t\n\tvar initialValue = editorOptions.value || (targetIsTextarea ? target.value : target.getValue()) || '';\n\t\n\tif (targetIsTextarea && movieOptions.parse) {\n\t\textend(movieOptions, parseMovieDefinition(initialValue, movieOptions));\n\t\tinitialValue = movieOptions.value;\n\t\tif (movieOptions.editorOptions) {\n\t\t\textend(editorOptions, movieOptions.editorOptions);\n\t\t}\n\n\t\t// read CM options from given textarea\n\t\tvar cmAttr = /^data\\-cm\\-(.+)$/i;\n\t\ttoArray(target.attributes).forEach(function(attr) {\n\t\t\tvar m = attr.name.match(cmAttr);\n\t\t\tif (m) {\n\t\t\t\teditorOptions[m[1]] = attr.value;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t// normalize line endings\n\tinitialValue = initialValue.replace(/\\r?\\n/g, '\\n');\n\t\n\t// locate initial caret position from | symbol\n\tvar initialPos = initialValue.indexOf('|');\n\t\n\tif (targetIsTextarea) {\n\t\ttarget.value = editorOptions.value = initialValue = initialValue.replace(/\\|/g, '');\n\t}\n\n\t// create editor instance if needed\n\tvar editor = targetIsTextarea ? CodeMirror.fromTextArea(target, editorOptions) : target;\n\n\tif (initialPos != -1) {\n\t\teditor.setCursor(editor.posFromIndex(initialPos));\n\t}\n\t\n\t// save initial data so we can revert to it later\n\teditor.__initial = {\n\t\tcontent: initialValue,\n\t\tpos: editor.getCursor(true)\n\t};\n\t\n\tvar wrapper = editor.getWrapperElement();\n\t\n\t// adjust height, if required\n\tif (editorOptions.height) {\n\t\twrapper.style.height = editorOptions.height + 'px';\n\t}\n\t\n\twrapper.className += ' CodeMirror-movie' + (movieOptions.outline ? ' CodeMirror-movie_with-outline' : '');\n\t\n\tvar sc = new Scenario(movieOptions.scenario, editor);\n\tif (movieOptions.outline) {\n\t\twrapper.className += ' CodeMirror-movie_with-outline';\n\t\twrapper.appendChild(outline(movieOptions.outline, sc));\n\t}\n\treturn sc;\n};\n\n/**\n * Prettyfies key bindings references in given string: formats it according\n * to current user’s platform. The key binding should be defined inside \n * parentheses, e.g. <code>(ctrl-alt-up)</code>\n * @param {String} str\n * @param {Object} options Transform options\n * @returns {String}\n */\nfunction prettifyKeyBindings(str, options) {\n\toptions = options || {};\n\tvar reKey = /ctrl|alt|shift|cmd/i;\n\tvar map = mac ? macCharMap : pcCharMap;\n\treturn str.replace(/\\((.+?)\\)/g, function(m, kb) {\n\t\tif (reKey.test(kb)) {\n\t\t\tvar parts = kb.toLowerCase()\n\t\t\t\t.split(/[\\-\\+]/)\n\t\t\t\t.map(key => map[key.toLowerCase()] || key.toUpperCase());\n\t\t\t\n\t\t\tm = parts.join(mac ? '' : '+');\n\t\t\tif (!options.stripParentheses) {\n\t\t\t\tm = '(' + m + ')';\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn m;\n\t});\n}\n\nfunction readLines(text) {\n\t// IE fails to split string by regexp, \n\t// need to normalize newlines first\n\tvar nl = '\\n';\n\tvar lines = (text || '')\n\t\t.replace(/\\r\\n/g, nl)\n\t\t.replace(/\\n\\r/g, nl)\n\t\t.replace(/\\r/g, nl)\n\t\t.split(nl);\n\n\treturn lines.filter(Boolean);\n}\n\nfunction unescape(text) {\n\tvar replacements = {\n\t\t'&lt;':  '<',\n\t\t'&gt;':  '>',\n\t\t'&amp;': '&'\n\t};\n\n\treturn text.replace(/&(lt|gt|amp);/g, function(str, p1) {\n\t\treturn replacements[str] || str;\n\t});\n}\n\n/**\n * Extracts initial content, scenario and outline from given string\n * @param {String} text\n * @param {Object} options\n */\nfunction parseMovieDefinition(text, options={}) {\n\toptions = extend({}, defaultOptions, options || {});\n\tvar parts = text.split(options.sectionSeparator);\n\n\t// parse scenario\n\tvar reDef = /^(\\w+)\\s*:\\s*(.+)$/;\n\tvar scenario = [];\n\tvar outline = {};\n\tvar editorOptions = {};\n\n\tvar skipComment = line => line.charAt(0) !== '#';\n\n\t// read movie definition\n\treadLines(parts[1]).filter(skipComment).forEach(function(line) {\n\t\t// do we have outline definition here?\n\t\tline = line.replace(options.outlineSeparator, '');\n\n\t\tvar sd = line.match(reDef);\n\t\tif (!sd) {\n\t\t\treturn scenario.push(line.trim());\n\t\t}\n\t\t\t\n\n\t\tif (sd[2].charAt(0) === '{') {\n\t\t\tvar obj = {};\n\t\t\tobj[sd[1]] = parseJSON(unescape(sd[2]));\n\t\t\treturn scenario.push(obj);\n\t\t}\n\n\t\tscenario.push(sd[1] + ':' + unescape(sd[2]));\n\t});\n\n\t// read editor options\n\tif (parts[2]) {\n\t\treadLines(parts[2]).filter(skipComment).forEach(function(line) {\n\t\t\tvar sd = line.match(reDef);\n\t\t\tif (sd) {\n\t\t\t\teditorOptions[sd[1]] = sd[2];\n\t\t\t}\n\t\t});\n\t}\n\n\treturn {\n\t\tvalue: unescape(parts[0].trim()),\n\t\tscenario: scenario,\n\t\toutline: Object.keys(outline).length ? outline : null,\n\t\teditorOptions: editorOptions\n\t};\n}\n\nfunction setupCodeMirror() {\n\tif (typeof CodeMirror === 'undefined' || 'preventCursorMovement' in CodeMirror.defaults) {\n\t\treturn;\n\t}\n\n\tCodeMirror.defineOption('preventCursorMovement', false, cm => {\n\t\tvar handler = (cm, event) => cm.getOption('readOnly') && event.preventDefault();\n\t\tcm.on('keydown', handler);\n\t\tcm.on('mousedown', handler);\n\t});\n}\n\nif (typeof CodeMirror !== 'undefined') {\n\tCodeMirror.movie = movie;\n}","\"use strict\";\n\nimport commonActions from './actions';\nimport {actions as prompt} from './widgets/prompt';\nimport {actions as tooltip} from './widgets/tooltip';\nimport {extend} from './utils';\n\nvar actionsDefinition = extend({}, commonActions, prompt, tooltip);\n\nvar STATE_IDLE  = 'idle';\nvar STATE_PLAY  = 'play';\nvar STATE_PAUSE = 'pause';\n\n// Regular expression used to split event strings\nvar eventSplitter = /\\s+/;\n\nexport var defaultOptions = {\n\tbeforeDelay: 1000,\n\tafterDelay: 1000\n};\n\n/**\n * @param {Object} actions Actions scenario\n * @param {Object} data Initial content (<code>String</code>) or editor\n * instance (<code>CodeMirror</code>)\n */\nexport default class Scenario {\n\tconstructor(actions, data) {\n\t\tthis._actions = actions;\n\t\tthis._actionIx = 0;\n\t\tthis._editor = null;\n\t\tthis._state = STATE_IDLE;\n\t\tthis._timerQueue = [];\n\t\t\n\t\tif (data && 'getValue' in data) {\n\t\t\tthis._editor = data;\n\t\t}\n\t\t\n\t\tvar ed = this._editor;\n\t\tif (ed && !ed.__initial) {\n\t\t\ted.__initial = {\n\t\t\t\tcontent: ed.getValue(),\n\t\t\t\tpos: ed.getCursor(true)\n\t\t\t};\n\t\t}\n\t}\n\n\t_setup(editor) {\n\t\tif (!editor && this._editor) {\n\t\t\teditor = this._editor;\n\t\t}\n\t\t\n\t\teditor.execCommand('revert');\n\t\treturn editor;\n\t}\n\t\n\t/**\n\t * Play current scenario\n\t * @param {CodeMirror} editor Editor instance where on which scenario \n\t * should be played\n\t * @memberOf Scenario\n\t */\n\tplay(editor) {\n\t\tif (this._state === STATE_PLAY) {\n\t\t\t// already playing\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (this._state === STATE_PAUSE) {\n\t\t\t// revert from paused state\n\t\t\teditor = editor || this._editor;\n\t\t\teditor.focus();\n\t\t\tvar timerObj = null;\n\t\t\twhile (timerObj = this._timerQueue.shift()) {\n\t\t\t\trequestTimer(timerObj.fn, timerObj.delay);\n\t\t\t}\n\t\t\t\n\t\t\tthis._state = STATE_PLAY;\n\t\t\tthis.trigger('resume');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis._editor = editor = this._setup(editor);\n\t\teditor.focus();\n\t\t\n\t\tvar timer = this.requestTimer.bind(this);\n\t\tvar that = this;\n\t\tthis._actionIx = 0;\n\t\tvar next = function() {\n\t\t\tif (that._actionIx >= that._actions.length) {\n\t\t\t\treturn timer(function() {\n\t\t\t\t\tthat.stop();\n\t\t\t\t}, defaultOptions.afterDelay);\n\t\t\t}\n\t\t\t\n\t\t\tthat.trigger('action', that._actionIx);\n\t\t\tvar action = parseActionCall(that._actions[that._actionIx++]);\n\t\t\t\n\t\t\tif (action.name in actionsDefinition) {\n\t\t\t\tactionsDefinition[action.name].call(that, action.options, editor, next, timer);\n\t\t\t} else {\n\t\t\t\tthrow new Error('No such action: ' + action.name);\n\t\t\t}\n\t\t};\n\t\t\n\t\tthis._state = STATE_PLAY;\n\t\tthis._editor.setOption('readOnly', true);\n\t\tthis.trigger('play');\n\t\ttimer(next, defaultOptions.beforeDelay);\n\t}\n\t\n\t/**\n\t * Pause current scenario playback. It can be restored with \n\t * <code>play()</code> method call \n\t */\n\tpause() {\n\t\tthis._state = STATE_PAUSE;\n\t\tthis.trigger('pause');\n\t}\n\t\n\t/**\n\t * Stops playback of current scenario\n\t */\n\tstop() {\n\t\tif (this._state !== STATE_IDLE) {\n\t\t\tthis._state = STATE_IDLE;\n\t\t\tthis._timerQueue.length = 0;\n\t\t\tthis._editor.setOption('readOnly', false);\n\t\t\tthis.trigger('stop');\n\t\t}\n\t}\n\t\n\t/**\n\t * Returns current playback state\n\t * @return {String}\n\t */\n\tget state() {\n\t\treturn this._state;\n\t}\n\t\n\t/**\n\t * Toggle playback of movie scenario\n\t */\n\ttoggle() {\n\t\tif (this._state === STATE_PLAY) {\n\t\t\tthis.pause();\n\t\t} else {\n\t\t\tthis.play();\n\t\t}\n\t}\n\t\n\trequestTimer(fn, delay) {\n\t\tif (this._state !== STATE_PLAY) {\n\t\t\t// save function call into a queue till next 'play()' call\n\t\t\tthis._timerQueue.push({\n\t\t\t\tfn: fn,\n\t\t\t\tdelay: delay\n\t\t\t});\n\t\t} else {\n\t\t\treturn requestTimer(fn, delay);\n\t\t}\n\t}\n\t\n\t// borrowed from Backbone\n\t/**\n\t * Bind one or more space separated events, `events`, to a `callback`\n\t * function. Passing `\"all\"` will bind the callback to all events fired.\n\t * @param {String} events\n\t * @param {Function} callback\n\t * @param {Object} context\n\t * @memberOf eventDispatcher\n\t */\n\ton(events, callback, context) {\n\t\tvar calls, event, node, tail, list;\n\t\tif (!callback) {\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tevents = events.split(eventSplitter);\n\t\tcalls = this._callbacks || (this._callbacks = {});\n\n\t\t// Create an immutable callback list, allowing traversal during\n\t\t// modification.  The tail is an empty object that will always be used\n\t\t// as the next node.\n\t\twhile (event = events.shift()) {\n\t\t\tlist = calls[event];\n\t\t\tnode = list ? list.tail : {};\n\t\t\tnode.next = tail = {};\n\t\t\tnode.context = context;\n\t\t\tnode.callback = callback;\n\t\t\tcalls[event] = {\n\t\t\t\ttail : tail,\n\t\t\t\tnext : list ? list.next : node\n\t\t\t};\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Remove one or many callbacks. If `context` is null, removes all\n\t * callbacks with that function. If `callback` is null, removes all\n\t * callbacks for the event. If `events` is null, removes all bound\n\t * callbacks for all events.\n\t * @param {String} events\n\t * @param {Function} callback\n\t * @param {Object} context\n\t */\n\toff(events, callback, context) {\n\t\tvar event, calls, node, tail, cb, ctx;\n\n\t\t// No events, or removing *all* events.\n\t\tif (!(calls = this._callbacks)) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif (!(events || callback || context)) {\n\t\t\tdelete this._callbacks;\n\t\t\treturn this;\n\t\t}\n\n\t\t// Loop through the listed events and contexts, splicing them out of the\n\t\t// linked list of callbacks if appropriate.\n\t\tevents = events ? events.split(eventSplitter) : Object.keys(calls);\n\t\twhile (event = events.shift()) {\n\t\t\tnode = calls[event];\n\t\t\tdelete calls[event];\n\t\t\tif (!node || !(callback || context)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t\n\t\t\t// Create a new list, omitting the indicated callbacks.\n\t\t\ttail = node.tail;\n\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\tcb = node.callback;\n\t\t\t\tctx = node.context;\n\t\t\t\tif ((callback && cb !== callback) || (context && ctx !== context)) {\n\t\t\t\t\tthis.on(event, cb, ctx);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Trigger one or many events, firing all bound callbacks. Callbacks are\n\t * passed the same arguments as `trigger` is, apart from the event name\n\t * (unless you're listening on `\"all\"`, which will cause your callback\n\t * to receive the true name of the event as the first argument).\n\t * @param {String} events\n\t */\n\ttrigger(events, ...rest) {\n\t\tvar event, node, calls, tail, args, all;\n\t\tif (!(calls = this._callbacks)) {\n\t\t\treturn this;\n\t\t}\n\t\t\n\t\tall = calls.all;\n\t\tevents = events.split(eventSplitter);\n\n\t\t// For each event, walk through the linked list of callbacks twice,\n\t\t// first to trigger the event, then to trigger any `\"all\"` callbacks.\n\t\twhile (event = events.shift()) {\n\t\t\tif (node = calls[event]) {\n\t\t\t\ttail = node.tail;\n\t\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\t\tnode.callback.apply(node.context || this, rest);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (node = all) {\n\t\t\t\ttail = node.tail;\n\t\t\t\targs = [ event ].concat(rest);\n\t\t\t\twhile ((node = node.next) !== tail) {\n\t\t\t\t\tnode.callback.apply(node.context || this, args);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n};\n\n/**\n * Parses action call from string\n * @param {String} data\n * @returns {Object}\n */\nfunction parseActionCall(data) {\n\tif (typeof data === 'string') {\n\t\tvar parts = data.split(':');\n\t\treturn {\n\t\t\tname: parts.shift(),\n\t\t\toptions: parts.join(':')\n\t\t};\n\t} else {\n\t\tvar name = Object.keys(data)[0];\n\t\treturn {\n\t\t\tname: name,\n\t\t\toptions: data[name]\n\t\t};\n\t}\n}\n\nfunction requestTimer(fn, delay) {\n\tif (!delay) {\n\t\tfn();\n\t} else {\n\t\treturn setTimeout(fn, delay);\n\t}\n}","var propCache = {};\n\n// detect CSS 3D Transforms for smoother animations \nexport var has3d = (function() {\n\tvar el = document.createElement('div');\n\tvar cssTransform = prefixed('transform');\n\tif (cssTransform) {\n\t\tel.style[cssTransform] = 'translateZ(0)';\n\t\treturn (/translatez/i).test(el.style[cssTransform]); \n\t}\n\t\n\treturn false;\n})();\n\nexport function extend(obj, ...args) {\n\targs.forEach(a => {\n\t\tif (typeof a === 'object') {\n\t\t\tObject.keys(a).forEach(key => obj[key] = a[key]);\n\t\t}\n\t});\n\treturn obj;\n}\n\nexport function toArray(obj, ix=0) {\n\treturn Array.prototype.slice.call(obj, ix);\n}\n\n/**\n * Returns prefixed (if required) CSS property name\n * @param  {String} prop\n * @return {String}\n */\nexport function prefixed(prop) {\n\tif (prop in propCache) {\n\t\treturn propCache[prop];\n\t}\n\n\tvar el = document.createElement('div');\n\tvar style = el.style;\n\n\tvar prefixes = ['o', 'ms', 'moz', 'webkit'];\n\tvar props = [prop];\n\tvar capitalize = function(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.substr(1);\n\t};\n\n\tprop = prop.replace(/\\-([a-z])/g, function(str, ch) {\n\t\treturn ch.toUpperCase();\n\t});\n\n\tvar capProp = capitalize(prop);\n\tprefixes.forEach(function(prefix) {\n\t\tprops.push(prefix + capProp, capitalize(prefix) + capProp);\n\t});\n\n\tfor (var i = 0, il = props.length; i < il; i++) {\n\t\tif (props[i] in style) {\n\t\t\treturn propCache[prop] = props[i];\n\t\t}\n\t}\n\n\treturn propCache[prop] = null;\n}\n\nexport function posObj(obj) {\n\treturn {\n\t\tline: obj.line,\n\t\tch: obj.ch\n\t};\n}\n\nexport function getCursor(editor, start='from') {\n\treturn posObj(editor.getCursor(start));\n}\n\n/**\n * Helper function that produces <code>{line, ch}</code> object from\n * passed argument\n * @param {Object} pos\n * @param {CodeMirror} editor\n * @returns {Object}\n */\nexport function makePos(pos, editor) {\n\tif (pos === 'caret') {\n\t\treturn getCursor(editor);\n\t}\n\n\tif (typeof pos === 'string') {\n\t\tif (~pos.indexOf(':')) {\n\t\t\tlet parts = pos.split(':');\n\t\t\treturn {\n\t\t\t\tline: +parts[0],\n\t\t\t\tch: +parts[1]\n\t\t\t};\n\t\t}\n\t\t\n\t\tpos = +pos;\n\t}\n\t\n\tif (typeof pos === 'number') {\n\t\treturn posObj(editor.posFromIndex(pos));\n\t}\n\t\n\treturn posObj(pos);\n}\n\nexport function template(tmpl, data) {\n\tvar fn = data => tmpl.replace(/<%([-=])?\\s*([\\w\\-]+)\\s*%>/g, (str, op, key) => data[key.trim()]);\n\treturn data ? fn(data) : fn;\n}\n\nexport function find(arr, iter) {\n\tvar found;\n\tarr.some((item, i, arr) => {\n\t\tif (iter(item, i, arr)) {\n\t\t\treturn found = item;\n\t\t}\n\t});\n\treturn found;\n}\n\n/**\n * Relaxed JSON parser.\n * @param {String} text\n * @returns {Object} \n */\nexport function parseJSON(text) {\n\ttry {\n\t\treturn (new Function('return ' + text))();\n\t} catch(e) {\n\t\treturn {};\n\t}\n}","var global = window;\nvar time = Date.now \n\t? function() {return Date.now();}\n\t: function() {return +new Date;};\n\nvar indexOf = 'indexOf' in Array.prototype\n\t? function(array, value) {return array.indexOf(value);}\n\t: function(array, value) {\n\t\tfor (var i = 0, il = array.length; i < il; i++) {\n\t\t\tif (array[i] === value) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n\nfunction extend(obj) {\n\tfor (var i = 1, il = arguments.length, source; i < il; i++) {\n\t\tsource = arguments[i];\n\t\tif (source) {\n\t\t\tfor (var prop in source) {\n\t\t\t\tobj[prop] = source[prop];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn obj;\n}\n\n/**\n * requestAnimationFrame polyfill by Erik Möller\n * fixes from Paul Irish and Tino Zijdel\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n */\n(function() {\n\tvar lastTime = 0;\n\tvar vendors = [ 'ms', 'moz', 'webkit', 'o' ];\n\tfor (var x = 0; x < vendors.length && !global.requestAnimationFrame; ++x) {\n\t\tglobal.requestAnimationFrame = global[vendors[x] + 'RequestAnimationFrame'];\n\t\tglobal.cancelAnimationFrame = global[vendors[x] + 'CancelAnimationFrame']\n\t\t\t\t|| global[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n\t\n\tif (!global.requestAnimationFrame)\n\t\tglobal.requestAnimationFrame = function(callback, element) {\n\t\t\tvar currTime = time();\n\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\tvar id = global.setTimeout(function() {\n\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t}, timeToCall);\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\n\tif (!global.cancelAnimationFrame)\n\t\tglobal.cancelAnimationFrame = function(id) {\n\t\t\tclearTimeout(id);\n\t\t};\n}());\n\n\nvar dummyFn = function() {};\nvar anims = [];\nvar idCounter = 0;\n\nvar defaults = {\n\tduration: 500, // ms\n\tdelay: 0,\n\teasing: 'linear',\n\tstart: dummyFn,\n\tstep: dummyFn,\n\tcomplete: dummyFn,\n\tautostart: true,\n\treverse: false\n};\n\nexport var easings = {\n\tlinear: function(t, b, c, d) {\n\t\treturn c * t / d + b;\n\t},\n\tinQuad: function(t, b, c, d) {\n\t\treturn c*(t/=d)*t + b;\n\t},\n\toutQuad: function(t, b, c, d) {\n\t\treturn -c *(t/=d)*(t-2) + b;\n\t},\n\tinOutQuad: function(t, b, c, d) {\n\t\tif((t/=d/2) < 1) return c/2*t*t + b;\n\t\treturn -c/2 *((--t)*(t-2) - 1) + b;\n\t},\n\tinCubic: function(t, b, c, d) {\n\t\treturn c*(t/=d)*t*t + b;\n\t},\n\toutCubic: function(t, b, c, d) {\n\t\treturn c*((t=t/d-1)*t*t + 1) + b;\n\t},\n\tinOutCubic: function(t, b, c, d) {\n\t\tif((t/=d/2) < 1) return c/2*t*t*t + b;\n\t\treturn c/2*((t-=2)*t*t + 2) + b;\n\t},\n\tinExpo: function(t, b, c, d) {\n\t\treturn(t==0) ? b : c * Math.pow(2, 10 *(t/d - 1)) + b - c * 0.001;\n\t},\n\toutExpo: function(t, b, c, d) {\n\t\treturn(t==d) ? b+c : c * 1.001 *(-Math.pow(2, -10 * t/d) + 1) + b;\n\t},\n\tinOutExpo: function(t, b, c, d) {\n\t\tif(t==0) return b;\n\t\tif(t==d) return b+c;\n\t\tif((t/=d/2) < 1) return c/2 * Math.pow(2, 10 *(t - 1)) + b - c * 0.0005;\n\t\treturn c/2 * 1.0005 *(-Math.pow(2, -10 * --t) + 2) + b;\n\t},\n\tinElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\treturn -(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n\t},\n\toutElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b;  if((t/=d)==1) return b+c;  if(!p) p=d*.3;\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; } else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\treturn(a*Math.pow(2,-10*t) * Math.sin((t*d-s)*(2*Math.PI)/p ) + c + b);\n\t},\n\tinOutElastic: function(t, b, c, d, a, p) {\n\t\tvar s;\n\t\tif(t==0) return b; \n\t\tif((t/=d/2)==2) return b+c;\n\t\tif(!p) p=d*(.3*1.5);\n\t\tif(!a || a < Math.abs(c)) { a=c; s=p/4; }       else s = p/(2*Math.PI) * Math.asin(c/a);\n\t\tif(t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )) + b;\n\t\treturn a*Math.pow(2,-10*(t-=1)) * Math.sin((t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n\t},\n\tinBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\treturn c*(t/=d)*t*((s+1)*t - s) + b;\n\t},\n\toutBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\treturn c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n\t},\n\tinOutBack: function(t, b, c, d, s) {\n\t\tif(s == undefined) s = 1.70158;\n\t\tif((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n\t\treturn c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n\t},\n\tinBounce: function(t, b, c, d) {\n\t\treturn c - this.outBounce(t, d-t, 0, c, d) + b;\n\t},\n\toutBounce: function(t, b, c, d) {\n\t\tif((t/=d) <(1/2.75)) {\n\t\t\treturn c*(7.5625*t*t) + b;\n\t\t} else if(t <(2/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n\t\t} else if(t <(2.5/2.75)) {\n\t\t\treturn c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n\t\t} else {\n\t\t\treturn c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n\t\t}\n\t},\n\tinOutBounce: function(t, b, c, d) {\n\t\tif(t < d/2) return this.inBounce(t*2, 0, c, d) * .5 + b;\n\t\treturn this.outBounce(t*2-d, 0, c, d) * .5 + c*.5 + b;\n\t},\n\toutHard: function(t, b, c, d) {\n\t\tvar ts = (t/=d)*t;\n\t\tvar tc = ts*t;\n\t\treturn b + c*(1.75*tc*ts + -7.4475*ts*ts + 12.995*tc + -11.595*ts + 5.2975*t);\n\t}\n};\n\nfunction mainLoop() {\n\tif (!anims.length) {\n\t\t// no animations left, stop polling\n\t\treturn;\n\t}\n\t\n\tvar now = time();\n\tvar filtered = [], tween, opt;\n\n\t// do not use Array.filter() of _.filter() function\n\t// since tween’s callbacks can add new animations\n\t// in runtime. In this case, filter function will loose\n\t// newly created animation\n\tfor (var i = 0; i < anims.length; i++) {\n\t\ttween = anims[i];\n\n\t\tif (!tween.animating) {\n\t\t\tcontinue;\n\t\t}\n\n\t\topt = tween.options;\n\n\t\tif (tween.startTime > now) {\n\t\t\tfiltered.push(tween);\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (tween.infinite) {\n\t\t\t// opt.step.call(tween, 0);\n\t\t\topt.step(0, tween);\n\t\t\tfiltered.push(tween);\n\t\t} else if (tween.pos === 1 || tween.endTime <= now) {\n\t\t\ttween.pos = 1;\n\t\t\t// opt.step.call(tween, opt.reverse ? 0 : 1);\n\t\t\topt.step(opt.reverse ? 0 : 1, tween);\n\t\t\ttween.stop();\n\t\t} else {\n\t\t\ttween.pos = opt.easing(now - tween.startTime, 0, 1, opt.duration);\n\t\t\t// opt.step.call(tween, opt.reverse ? 1 - tween.pos : tween.pos);\n\t\t\topt.step(opt.reverse ? 1 - tween.pos : tween.pos, tween);\n\t\t\tfiltered.push(tween);\n\t\t}\t\t\t\n\t}\n\n\tanims = filtered;\n\n\tif (anims.length) {\n\t\trequestAnimationFrame(mainLoop);\n\t}\n}\n\nfunction addToQueue(tween) {\n\tif (indexOf(anims, tween) == -1) {\n\t\tanims.push(tween);\n\t\tif (anims.length == 1) {\n\t\t\tmainLoop();\n\t\t}\n\t}\n}\n\nexport class Tween {\n\tconstructor(options) {\n\t\tthis.options = extend({}, defaults, options);\n\t\n\t\tvar e = this.options.easing;\n\t\tif (typeof e == 'string') {\n\t\t\tif (!easings[e])\n\t\t\t\tthrow 'Unknown \"' + e + '\" easing function';\n\t\t\tthis.options.easing = easings[e];\n\t\t}\n\t\t\n\t\tif (typeof this.options.easing != 'function')\n\t\t\tthrow 'Easing should be a function';\n\n\t\tthis._id = 'tw' + (idCounter++);\n\t\t\n\t\tif (this.options.autostart) {\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\t/**\n\t * Start animation from the beginning\n\t */\n\tstart() {\n\t\tif (!this.animating) {\n\t\t\tthis.pos = 0;\n\t\t\tthis.startTime = time() + (this.options.delay || 0);\n\t\t\tthis.infinite = this.options.duration === 'infinite';\n\t\t\tthis.endTime = this.infinite ? 0 : this.startTime + this.options.duration;\n\t\t\tthis.animating = true;\n\t\t\tthis.options.start(this);\n\t\t\taddToQueue(this);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Stop animation\n\t */\n\tstop() {\n\t\tif (this.animating) {\n\t\t\tthis.animating = false;\n\t\t\tif (this.options.complete) {\n\t\t\t\tthis.options.complete(this);\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\ttoggle() {\n\t\tif (this.animating) {\n\t\t\tthis.stop();\n\t\t} else {\n\t\t\tthis.start();\n\t\t}\n\t}\n}\n\nexport default function tween(options) {\n\treturn new Tween(options);\n}\n\n/**\n * Get or set default value\n * @param  {String} name\n * @param  {Object} value\n * @return {Object}\n */\nexport function defaults(name, value) {\n\tif (typeof value != 'undefined') {\n\t\tdefaults[name] = value;\n\t}\n\n\treturn defaults[name];\n}\n\n/**\n * Returns all active animation objects.\n * For debugging mostly\n * @return {Array}\n */\nexport function _all() {\n\treturn anims;\n}\n\nexport function stop() {\n\tfor (var i = 0; i < anims.length; i++) {\n\t\tanims[i].stop();\n\t}\n\n\tanims.length = 0;\n};","/**\n * Module that creates list of action hints and highlights items when specified\n * action is performed\n */\n\"use strict\";\n\nimport * as dom from '../dom';\nimport {template, find, toArray, extend} from '../utils';\n\nexport var defaultOptions = {\n\twrapperTemplate: '<ul class=\"CodeMirror-outline\"><%= content %></ul>',\n\titemTemplate: '<li data-action-id=\"<%= id %>\" class=\"CodeMirror-outline__item\"><%= title %></li>',\n\titemClass: 'CodeMirror-outline__item',\n\tselectedClass: 'CodeMirror-outline__item_selected'\n};\n\t\n/**\n * @param {Object} hints\n * @param {Scenario} scenario\n * @param {Object} options\n */\nexport default function(hints, scenario, options={}) {\n\toptions = extend({}, defaultOptions, options);\n\t\n\tvar hintKeys = Object.keys(hints).sort(function(a, b) {\n\t\treturn a - b;\n\t});\n\t\n\tvar itemTemplate = template(options.itemTemplate);\n\tvar items = hintKeys.map(key => itemTemplate({title: hints[key], id: key}));\n\t\n\tvar el = dom.toDOM(template(options.wrapperTemplate, {\n\t\tcontent: items.join('')\n\t}));\n\t\n\tif (options.target) {\n\t\toptions.target.appendChild(el);\n\t}\n\t\n\tscenario\n\t\t.on('action', function(id) {\n\t\t\tvar items = toArray(el.querySelectorAll('.' + options.itemClass));\n\t\t\tvar matchedItem = find(items, elem => elem.getAttribute('data-action-id') == id);\n\t\t\t\n\t\t\tif (matchedItem) {\n\t\t\t\titems.forEach(item => item.classList.remove(options.selectedClass));\n\t\t\t\tmatchedItem.classList.add(options.selectedClass);\n\t\t\t}\n\t\t})\n\t\t.on('stop', function() {\n\t\t\ttoArray(el.querySelectorAll('.' + options.itemClass))\n\t\t\t.forEach(item => item.classList.remove(options.selectedClass));\n\t\t});\n\t\n\treturn el;\n};","/**\n * Shows fake prompt dialog with interactive value typing\n */\n\"use strict\";\n\nimport tween from '../vendor/tween';\nimport {extend, template, has3d, prefixed} from '../utils';\nimport * as dom from '../dom';\n\nvar dialogInstance = null;\nvar bgInstance = null;\nvar lastTween = null;\n\nexport var actions = {\n\tprompt(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\ttitle: 'Enter something',\n\t\t\tdelay: 80,        // delay between character typing\n\t\t\ttypeDelay: 1000,  // time to wait before typing text\n\t\t\thideDelay: 2000   // time to wait before hiding prompt dialog\n\t\t}, wrap('text', options));\n\t\t\n\t\tshow(options.title, editor.getWrapperElement(), function(dialog) {\n\t\t\ttimer(function() {\n\t\t\t\ttypeText(dialog.querySelector('.CodeMirror-prompt__input'), options, timer, function() {\n\t\t\t\t\ttimer(function() {\n\t\t\t\t\t\thide(next);\n\t\t\t\t\t}, options.hideDelay);\n\t\t\t\t});\n\t\t\t}, options.typeDelay);\n\t\t});\n\t}\n};\n\nexport function show(text, target, callback) {\n\thide();\n\tdialogInstance = dom.toDOM(`<div class=\"CodeMirror-prompt\">\n\t\t<div class=\"CodeMirror-prompt__title\">${text}</div>\n\t\t<input type=\"text\" name=\"prompt\" class=\"CodeMirror-prompt__input\" readonly=\"readonly\" />\n\t\t</div>`);\n\tbgInstance = dom.toDOM('<div class=\"CodeMirror-prompt__shade\"></div>');\n\t\n\ttarget.appendChild(dialogInstance);\n\ttarget.appendChild(bgInstance);\n\t\n\tanimateShow(dialogInstance, bgInstance, {complete: callback});\n}\n\nexport function hide(callback) {\n\tif (dialogInstance) {\n\t\tif (lastTween) {\n\t\t\tlastTween.stop();\n\t\t\tlastTween = null;\n\t\t}\n\t\tanimateHide(dialogInstance, bgInstance, {complete: callback});\n\t\tdialogInstance = bgInstance = null;\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @param {Element} dialog\n * @param {Element} bg\n * @param {Object} options \n */\nfunction animateShow(dialog, bg, options={}) {\n\tvar cssTransform = prefixed('transform');\n\tvar dialogStyle = dialog.style;\n\tvar bgStyle = bg.style;\n\tvar height = dialog.offsetHeight;\n\tvar tmpl = template(has3d ? 'translate3d(0, <%= pos %>, 0)' : 'translate(0, <%= pos %>)');\n\n\tbgStyle.opacity = 0;\n\ttween({\n\t\tduration: 200,\n\t\tstep(pos) {\n\t\t\tbgStyle.opacity = pos;\n\t\t}\n\t});\n\t\n\tdialogStyle[cssTransform] = tmpl({pos: -height});\n\t\n\treturn lastTween = tween({\n\t\tduration: 400,\n\t\teasing: 'outCubic',\n\t\tstep(pos) {\n\t\t\tdialogStyle[cssTransform] = tmpl({pos: (-height * (1 - pos)) + 'px'});\n\t\t},\n\t\tcomplete: function() {\n\t\t\tlastTween = null;\n\t\t\toptions.complete && options.complete(dialog, bg);\n\t\t}\n\t});\n}\n\n/**\n * @param {Element} dialog\n * @param {Element} bg\n * @param {Object} options\n */\nfunction animateHide(dialog, bg, options) {\n\tvar dialogStyle = dialog.style;\n\tvar bgStyle = bg.style;\n\tvar height = dialog.offsetHeight;\n\tvar cssTransform = prefixed('transform');\n\tvar tmpl = template(has3d ? 'translate3d(0, <%= pos %>, 0)' : 'translate(0, <%= pos %>)');\n\n\treturn tween({\n\t\tduration: 200,\n\t\tstep(pos) {\n\t\t\tdialogStyle[cssTransform] = tmpl({pos: (-height * pos) + 'px'});\n\t\t\tbgStyle.opacity = 1 - pos;\n\t\t},\n\t\tcomplete() {\n\t\t\tdom.remove([dialog, bg]);\n\t\t\toptions.complete && options.complete(dialog, bg);\n\t\t}\n\t});\n}\n\nfunction typeText(target, options, timer, next) {\n\tvar chars = options.text.split('');\n\ttimer(function perform() {\n\t\ttarget.value += chars.shift();\n\t\tif (chars.length) {\n\t\t\ttimer(perform, options.delay);\n\t\t} else {\n\t\t\tnext();\n\t\t}\n\t}, options.delay);\n}\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}","/**\n * Extension that allows authors to display context tooltips bound to specific\n * positions\n */\n\"use strict\";\n\nimport tween from '../vendor/tween';\nimport {extend, prefixed, makePos, has3d} from '../utils';\nimport * as dom from '../dom';\n\nvar instance = null;\nvar lastTween = null;\n\nexport var alignDefaults = {\n\t/** CSS selector for getting popup tail */\n\ttailClass: 'CodeMirror-tooltip__tail',\n\t\n\t/** Class name for switching tail/popup position relative to target point */\n\tbelowClass: 'CodeMirror-tooltip_below',\n\t\n\t/** Min distance between popup and viewport */\n\tpopupMargin: 5,\n\t\n\t/** Min distance between popup left/right edge and its tail */\n\ttailMargin: 11\n};\n\nexport var actions = {\n\t/**\n\t * Shows tooltip with given text, wait for `options.wait`\n\t * milliseconds then hides tooltip\n\t */\n\ttooltip(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\twait: 4000,   // time to wait before hiding tooltip\n\t\t\tpos: 'caret'  // position where tooltip should point to\n\t\t}, wrap('text', options));\n\t\t\n\t\tvar pos = resolvePosition(options.pos, editor);\n\t\tshow(options.text, pos, function() {\n\t\t\ttimer(function() {\n\t\t\t\thide(() => timer(next));\n\t\t\t}, options.wait);\n\t\t});\n\t},\n\n\t/**\n\t * Shows tooltip with specified text. This tooltip should be explicitly \n\t * hidden with `hideTooltip` action\n\t */\n\tshowTooltip(options, editor, next, timer) {\n\t\toptions = extend({\n\t\t\tpos: 'caret'  // position where tooltip should point to\n\t\t}, wrap('text', options));\n\t\t\n\t\tshow(options.text, resolvePosition(options.pos, editor));\n\t\tnext();\n\t},\n\n\t/**\n\t * Hides tooltip, previously shown by 'showTooltip' action\n\t */\n\thideTooltip(options, editor, next, timer) {\n\t\thide(next);\n\t}\n};\n\nexport function show(text, pos, callback) {\n\thide();\n\t\n\tinstance = dom.toDOM(`<div class=\"CodeMirror-tooltip\">\n\t\t<div class=\"CodeMirror-tooltip__content\">${text}</div>\n\t\t<div class=\"CodeMirror-tooltip__tail\"></div>\n\t\t</div>`);\n\t\n\tdom.css(instance, prefixed('transform'), 'scale(0)');\n\tdocument.body.appendChild(instance);\n\t\n\talignPopupWithTail(instance, {position: pos});\n\tanimateShow(instance, {complete: callback});\n}\n\nexport function hide(callback) {\n\tif (instance) {\n\t\tif (lastTween) {\n\t\t\tlastTween.stop();\n\t\t\tlastTween = null;\n\t\t}\n\t\tanimateHide(instance, {complete: callback});\n\t\tinstance = null;\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * Helper function that finds optimal position of tooltip popup on page\n * and aligns popup tail with this position\n * @param {Element} popup\n * @param {Object} options\n */\nfunction alignPopupWithTail(popup, options={}) {\n\toptions = extend({}, alignDefaults, options);\n\t\n\tdom.css(popup, {\n\t\tleft: 0,\n\t\ttop: 0\n\t});\n\t\n\tvar tail = popup.querySelector('.' + options.tailClass);\n\t\n\tvar resultX = 0, resultY = 0;\n\tvar pos = options.position;\n\tvar vp = dom.viewportRect();\n\t\n\tvar width = popup.offsetWidth;\n\tvar height = popup.offsetHeight;\n\t\n\tvar isTop;\n\t\t\n\t// calculate horizontal position\n\tresultX = Math.min(vp.width - width - options.popupMargin, Math.max(options.popupMargin, pos.x - vp.left - width / 2));\n\t\n\t// calculate vertical position\n\tif (height + tail.offsetHeight + options.popupMargin + vp.top < pos.y) {\n\t\t// place above target position\n\t\tresultY = Math.max(0, pos.y - height - tail.offsetHeight);\n\t\tisTop = true;\n\t} else {\n\t\t// place below target position \n\t\tresultY = pos.y + tail.offsetHeight;\n\t\tisTop = false;\n\t}\n\t\n\t// calculate tail position\n\tvar tailMinLeft = options.tailMargin;\n\tvar tailMaxLeft = width - options.tailMargin;\n\ttail.style.left = Math.min(tailMaxLeft, Math.max(tailMinLeft, pos.x - resultX - vp.left)) + 'px';\n\t\n\tdom.css(popup, {\n\t\tleft: resultX,\n\t\ttop: resultY\n\t});\n\t\n\tpopup.classList.toggle(options.belowClass, !isTop);\n}\n\n/**\n * @param {jQuery} elem\n * @param {Object} options \n */\nfunction animateShow(elem, options={}) {\n\toptions = extend({}, alignDefaults, options);\n\tvar cssOrigin = prefixed('transform-origin');\n\tvar cssTransform = prefixed('transform');\n\tvar style = elem.style;\n\n\tvar tail = elem.querySelector('.' + options.tailClass);\n\tvar xOrigin = dom.css(tail, 'left');\n\tvar yOrigin = tail.offsetTop;\n\tif (elem.classList.contains(options.belowClass)) {\n\t\tyOrigin -= tail.offsetHeight;\n\t}\n\t\n\tyOrigin += 'px';\n\n\tstyle[cssOrigin] = xOrigin + ' ' + yOrigin;\n\tvar prefix = has3d ? 'translateZ(0) ' : '';\n\t\n\treturn lastTween = tween({\n\t\tduration: 800,\n\t\teasing: 'outElastic',\n\t\tstep(pos) {\n\t\t\tstyle[cssTransform] = prefix + 'scale(' + pos + ')';\n\t\t},\n\t\tcomplete() {\n\t\t\tstyle[cssTransform] = 'none';\n\t\t\tlastTween = null;\n\t\t\toptions.complete && options.complete(elem);\n\t\t}\n\t});\n}\n\n/**\n * @param {jQuery} elem\n * @param {Object} options\n */\nfunction animateHide(elem, options) {\n\tvar style = elem.style;\n\n\treturn tween({\n\t\tduration: 200,\n\t\teasing: 'linear',\n\t\tstep: function(pos) {\n\t\t\tstyle.opacity = (1 - pos);\n\t\t},\n\t\tcomplete: function() {\n\t\t\tdom.remove(elem);\n\t\t\toptions.complete && options.complete(elem);\n\t\t}\n\t});\n}\n\n/**\n * Resolves position where tooltip should point to\n * @param {Object} pos\n * @param {CodeMirror} editor\n * @returns {Object} Object with <code>x</code> and <code>y</code> \n * properties\n */\nfunction resolvePosition(pos, editor) {\n\tif (pos === 'caret') {\n\t\t// get absolute position of current caret position\n\t\treturn sanitizeCaretPos(editor.cursorCoords(true));\n\t}\n\n\tif (typeof pos === 'object') {\n\t\tif ('x' in pos && 'y' in pos) {\n\t\t\t// passed absolute coordinates\n\t\t\treturn pos;\n\t\t}\n\n\t\tif ('left' in pos && 'top' in pos) {\n\t\t\t// passed absolute coordinates\n\t\t\treturn sanitizeCaretPos(pos);\n\t\t}\n\t}\n\t\n\tpos = makePos(pos, editor);\n\treturn sanitizeCaretPos(editor.charCoords(pos));\n}\n\nfunction sanitizeCaretPos(pos) {\n\tif ('left' in pos) {\n\t\tpos.x = pos.left;\n\t}\n\n\tif ('top' in pos) {\n\t\tpos.y = pos.top;\n\t}\n\n\treturn pos;\n}\n\nfunction wrap(key, value) {\n\treturn typeof value === 'object' ? value : {[key]: value};\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvYWN0aW9ucy5qcyIsImxpYi9kb20uanMiLCJsaWIvbW92aWUuanMiLCJsaWIvc2NlbmFyaW8uanMiLCJsaWIvdXRpbHMuanMiLCJsaWIvdmVuZG9yL3R3ZWVuLmpzIiwibGliL3dpZGdldHMvb3V0bGluZS5qcyIsImxpYi93aWRnZXRzL3Byb21wdC5qcyIsImxpYi93aWRnZXRzL3Rvb2x0aXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztBQ0FBOzs7O0FBRUEsSUFBSSxVQUFVO0FBQ2I7Ozs7Ozs7Ozs7O0FBV0EsT0FBTSxjQUFTLE9BQVQsRUFBa0IsTUFBbEIsRUFBMEIsSUFBMUIsRUFBZ0MsS0FBaEMsRUFBdUM7QUFDNUMsWUFBVSxtQkFBTztBQUNoQixTQUFNLEVBRFUsRUFDTDtBQUNYLFVBQU8sRUFGUyxFQUVMO0FBQ1gsUUFBSyxJQUhXLENBR0w7QUFISyxHQUFQLEVBSVAsS0FBSyxNQUFMLEVBQWEsT0FBYixDQUpPLENBQVY7O0FBTUEsTUFBSSxDQUFDLFFBQVEsSUFBYixFQUFtQjtBQUNsQixTQUFNLElBQUksS0FBSixDQUFVLG9DQUFWLENBQU47QUFDQTs7QUFFRCxNQUFJLFFBQVEsR0FBUixLQUFnQixJQUFwQixFQUEwQjtBQUN6QixVQUFPLFNBQVAsQ0FBaUIsb0JBQVEsUUFBUSxHQUFoQixFQUFxQixNQUFyQixDQUFqQjtBQUNBOztBQUVELE1BQUksUUFBUSxRQUFRLElBQVIsQ0FBYSxLQUFiLENBQW1CLEVBQW5CLENBQVo7O0FBRUEsUUFBTSxTQUFTLE9BQVQsR0FBbUI7QUFDeEIsT0FBSSxLQUFLLE1BQU0sS0FBTixFQUFUO0FBQ0EsVUFBTyxnQkFBUCxDQUF3QixFQUF4QixFQUE0QixLQUE1QjtBQUNBLE9BQUksTUFBTSxNQUFWLEVBQWtCO0FBQ2pCLFVBQU0sT0FBTixFQUFlLFFBQVEsS0FBdkI7QUFDQSxJQUZELE1BRU87QUFD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QUFNLG9CQUFRLEdBQVIsRUFBYSxNQUFiLENBQU47QUFDQSxRQUFPLGlCQUFpQixPQUFPLFVBQVAsQ0FBa0IsR0FBbEIsQ0FBakIsQ0FBUDtBQUNBOztBQUVELFNBQVMsZ0JBQVQsQ0FBMEIsR0FBMUIsRUFBK0I7QUFDOUIsS0FBSSxVQUFVLEdBQWQsRUFBbUI7QUFDbEIsTUFBSSxDQUFKLEdBQVEsSUFBSSxJQUFaO0FBQ0E7O0FBRUQsS0FBSSxTQUFTLEdBQWIsRUFBa0I7QUFDakIsTUFBSSxDQUFKLEdBQVEsSUFBSSxHQUFaO0FBQ0E7O0FBRUQsUUFBTyxHQUFQO0FBQ0E7O0FBRUQsU0FBUyxJQUFULENBQWMsR0FBZCxFQUFtQixLQUFuQixFQUEwQjtBQUN6QixRQUFPLFFBQU8sS0FBUCx5Q0FBTyxLQUFQLE9BQWlCLFFBQWpCLEdBQTRCLEtBQTVCLHVCQUFzQyxHQUF0QyxFQUE0QyxLQUE1QyxDQUFQO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfXJldHVybiBlfSkoKSIsImltcG9ydCB7ZXh0ZW5kLCBtYWtlUG9zLCBnZXRDdXJzb3J9IGZyb20gJy4vdXRpbHMnO1xuXG52YXIgYWN0aW9ucyA9IHtcblx0LyoqXG5cdCAqIFR5cGUtaW4gcGFzc2VkIHRleHQgaW50byBjdXJyZW50IGVkaXRvciBjaGFyLWJ5LWNoYXJcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ3VycmVudCBvcHRpb25zXG5cdCAqIEBwYXJhbSB7Q29kZU1pcnJvcn0gZWRpdG9yIEVkaXRvciBpbnN0YW5jZSB3aGVyZSBhY3Rpb24gc2hvdWxkIGJlIFxuXHQgKiBwZXJmb3JtZWRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dCBGdW5jdGlvbiB0byBjYWxsIHdoZW4gYWN0aW9uIHBlcmZvcm1hbmNlXG5cdCAqIGlzIGNvbXBsZXRlZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lciBGdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGltZXIgZm9yIGRlbGF5ZWQgXG5cdCAqIGV4ZWN1dGlvbi4gVGhpcyB0aW1lciB3aWxsIGF1dG9tYXRpY2FsbHkgZGVsYXkgZXhlY3V0aW9uIHdoZW5cblx0ICogc2NlbmFyaW8gaXMgcGF1c2VkIGFuZCByZXZlcnQgd2hlbiBwbGF5ZWQgYWdhaW4gXG5cdCAqL1xuXHR0eXBlOiBmdW5jdGlvbihvcHRpb25zLCBlZGl0b3IsIG5leHQsIHRpbWVyKSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHR0ZXh0OiAnJywgIC8vIHRleHQgdG8gdHlwZVxuXHRcdFx0ZGVsYXk6IDYwLCAvLyBkZWxheSBiZXR3ZWVuIGNoYXJhY3RlciB0eXBpbmdcblx0XHRcdHBvczogbnVsbCAgLy8gaW5pdGlhbCBwb3NpdGlvbiB3aGVyZSB0byBzdGFydCB0eXBpbmdcblx0XHR9LCB3cmFwKCd0ZXh0Jywgb3B0aW9ucykpO1xuXHRcdFxuXHRcdGlmICghb3B0aW9ucy50ZXh0KSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIHRleHQgcHJvdmlkZWQgZm9yIFwidHlwZVwiIGFjdGlvbicpO1xuXHRcdH1cblx0XHRcblx0XHRpZiAob3B0aW9ucy5wb3MgIT09IG51bGwpIHtcblx0XHRcdGVkaXRvci5zZXRDdXJzb3IobWFrZVBvcyhvcHRpb25zLnBvcywgZWRpdG9yKSk7XG5cdFx0fVxuXHRcdFxuXHRcdHZhciBjaGFycyA9IG9wdGlvbnMudGV4dC5zcGxpdCgnJyk7XG5cdFx0XG5cdFx0dGltZXIoZnVuY3Rpb24gcGVyZm9ybSgpIHtcblx0XHRcdHZhciBjaCA9IGNoYXJzLnNoaWZ0KCk7XG5cdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihjaCwgJ2VuZCcpO1xuXHRcdFx0aWYgKGNoYXJzLmxlbmd0aCkge1xuXHRcdFx0XHR0aW1lcihwZXJmb3JtLCBvcHRpb25zLmRlbGF5KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5leHQoKTtcblx0XHRcdH1cblx0XHR9LCBvcHRpb25zLmRlbGF5KTtcblx0fSxcblx0XG5cdC8qKlxuXHQgKiBXYWl0IGZvciBhIHNwZWNpZmllZCB0aW1lb3V0XG5cdCAqIEBwYXJhbSBvcHRpb25zXG5cdCAqIEBwYXJhbSBlZGl0b3Jcblx0ICogQHBhcmFtIG5leHRcblx0ICogQHBhcmFtIHRpbWVyXG5cdCAqL1xuXHR3YWl0OiBmdW5jdGlvbihvcHRpb25zLCBlZGl0b3IsIG5leHQsIHRpbWVyKSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHR0aW1lb3V0OiAxMDBcblx0XHR9LCB3cmFwKCd0aW1lb3V0Jywgb3B0aW9ucykpO1xuXHRcdFxuXHRcdHRpbWVyKG5leHQsIHBhcnNlSW50KG9wdGlvbnMudGltZW91dCwgMTApKTtcblx0fSxcblx0XG5cdC8qKlxuXHQgKiBNb3ZlIGNhcmV0IHRvIGEgc3BlY2lmaWVkIHBvc2l0aW9uXG5cdCAqL1xuXHRtb3ZlVG86IGZ1bmN0aW9uKG9wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXIpIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdGRlbGF5OiA4MCxcblx0XHRcdGltbWVkaWF0ZTogZmFsc2UgLy8gVE9ETzogcmVtb3ZlLCB1c2UgZGVsYXk6IDAgaW5zdGVhZFxuXHRcdH0sIHdyYXAoJ3BvcycsIG9wdGlvbnMpKTtcblx0XHRcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMucG9zID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdObyBwb3NpdGlvbiBzcGVjaWZpZWQgZm9yIFwibW92ZVRvXCIgYWN0aW9uJyk7XG5cdFx0fVxuXHRcdFxuXHRcdHZhciBjdXJQb3MgPSBnZXRDdXJzb3IoZWRpdG9yKTtcblx0XHQvLyByZXNldCBzZWxlY3Rpb24sIGlmIGV4aXN0c1xuXHRcdGVkaXRvci5zZXRTZWxlY3Rpb24oY3VyUG9zLCBjdXJQb3MpO1xuXHRcdHZhciB0YXJnZXRQb3MgPSBtYWtlUG9zKG9wdGlvbnMucG9zLCBlZGl0b3IpO1xuXHRcdFxuXHRcdGlmIChvcHRpb25zLmltbWVkaWF0ZSB8fCAhb3B0aW9ucy5kZWxheSkge1xuXHRcdFx0ZWRpdG9yLnNldEN1cnNvcih0YXJnZXRQb3MpO1xuXHRcdFx0bmV4dCgpO1xuXHRcdH1cblxuXHRcdHZhciBkZWx0YUxpbmUgPSB0YXJnZXRQb3MubGluZSAtIGN1clBvcy5saW5lO1xuXHRcdHZhciBkZWx0YUNoYXIgPSB0YXJnZXRQb3MuY2ggLSBjdXJQb3MuY2g7XG5cdFx0dmFyIHN0ZXBzID0gTWF0aC5tYXgoZGVsdGFDaGFyLCBkZWx0YUxpbmUpO1xuXHRcdC8vIHZhciBzdGVwTGluZSA9IGRlbHRhTGluZSAvIHN0ZXBzO1xuXHRcdC8vIHZhciBzdGVwQ2hhciA9IGRlbHRhQ2hhciAvIHN0ZXBzO1xuXHRcdHZhciBzdGVwTGluZSA9IGRlbHRhTGluZSA8IDAgPyAtMSA6IDE7XG5cdFx0dmFyIHN0ZXBDaGFyID0gZGVsdGFDaGFyIDwgMCA/IC0xIDogMTtcblxuXHRcdHRpbWVyKGZ1bmN0aW9uIHBlcmZvcm0oKSB7XG5cdFx0XHRjdXJQb3MgPSBnZXRDdXJzb3IoZWRpdG9yKTtcblx0XHRcdGlmIChzdGVwcyA+IDAgJiYgIShjdXJQb3MubGluZSA9PSB0YXJnZXRQb3MubGluZSAmJiBjdXJQb3MuY2ggPT0gdGFyZ2V0UG9zLmNoKSkge1xuXG5cdFx0XHRcdGlmIChjdXJQb3MubGluZSAhPSB0YXJnZXRQb3MubGluZSkge1xuXHRcdFx0XHRcdGN1clBvcy5saW5lICs9IHN0ZXBMaW5lO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGN1clBvcy5jaCAhPSB0YXJnZXRQb3MuY2gpIHtcblx0XHRcdFx0XHRjdXJQb3MuY2ggKz0gc3RlcENoYXI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGN1clBvcyk7XG5cdFx0XHRcdHN0ZXBzLS07XG5cdFx0XHRcdHRpbWVyKHBlcmZvcm0sIG9wdGlvbnMuZGVsYXkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih0YXJnZXRQb3MpO1xuXHRcdFx0XHRuZXh0KCk7XG5cdFx0XHR9XG5cdFx0fSwgb3B0aW9ucy5kZWxheSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFNpbWlsYXIgdG8gXCJtb3ZlVG9cIiBmdW5jdGlvbiBidXQgd2l0aCBpbW1lZGlhdGUgY3Vyc29yIHBvc2l0aW9uIHVwZGF0ZVxuXHQgKi9cblx0anVtcFRvOiBmdW5jdGlvbihvcHRpb25zLCBlZGl0b3IsIG5leHQsIHRpbWVyKSB7XG5cdFx0b3B0aW9ucyA9IGV4dGVuZCh7XG5cdFx0XHRhZnRlckRlbGF5OiAyMDBcblx0XHR9LCB3cmFwKCdwb3MnLCBvcHRpb25zKSk7XG5cblx0XHRpZiAodHlwZW9mIG9wdGlvbnMucG9zID09PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdObyBwb3NpdGlvbiBzcGVjaWZpZWQgZm9yIFwianVtcFRvXCIgYWN0aW9uJyk7XG5cdFx0fVxuXHRcdFxuXHRcdGVkaXRvci5zZXRDdXJzb3IobWFrZVBvcyhvcHRpb25zLnBvcywgZWRpdG9yKSk7XG5cdFx0dGltZXIobmV4dCwgb3B0aW9ucy5hZnRlckRlbGF5KTtcblx0fSxcblx0XG5cdC8qKlxuXHQgKiBFeGVjdXRlcyBwcmVkZWZpbmVkIENvZGVNaXJyb3IgY29tbWFuZFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvclxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHRpbWVyXG5cdCAqL1xuXHRydW46IGZ1bmN0aW9uKG9wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXIpIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdGJlZm9yZURlbGF5OiA1MDAsXG5cdFx0XHR0aW1lczogMVxuXHRcdH0sIHdyYXAoJ2NvbW1hbmQnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0dmFyIHRpbWVzID0gb3B0aW9ucy50aW1lcztcblx0XHR0aW1lcihmdW5jdGlvbiBwZXJmb3JtKCkge1xuXHRcdFx0aWYgKHR5cGVvZiBvcHRpb25zLmNvbW1hbmQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0b3B0aW9ucy5jb21tYW5kKGVkaXRvciwgb3B0aW9ucyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlZGl0b3IuZXhlY0NvbW1hbmQob3B0aW9ucy5jb21tYW5kKTtcdFxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoLS10aW1lcyA+IDApIHtcblx0XHRcdFx0dGltZXIocGVyZm9ybSwgb3B0aW9ucy5iZWZvcmVEZWxheSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXh0KCk7XG5cdFx0XHR9XG5cdFx0fSwgb3B0aW9ucy5iZWZvcmVEZWxheSk7XG5cdH0sXG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBzZWxlY3Rpb24gZm9yIHNwZWNpZmllZCBwb3NpdGlvblxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge0NvZGVNaXJyb3J9IGVkaXRvclxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHRpbWVyXG5cdCAqL1xuXHRzZWxlY3Q6IGZ1bmN0aW9uKG9wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXIpIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdGZyb206ICdjYXJldCdcblx0XHR9LCB3cmFwKCd0bycsIG9wdGlvbnMpKTtcblx0XHRcblx0XHR2YXIgZnJvbSA9IG1ha2VQb3Mob3B0aW9ucy5mcm9tLCBlZGl0b3IpO1xuXHRcdHZhciB0byA9IG1ha2VQb3Mob3B0aW9ucy50bywgZWRpdG9yKTtcblx0XHRlZGl0b3Iuc2V0U2VsZWN0aW9uKGZyb20sIHRvKTtcblx0XHRuZXh0KCk7XG5cdH1cbn07XG5cbmZ1bmN0aW9uIHdyYXAoa2V5LCB2YWx1ZSkge1xuXHRyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyA/IHZhbHVlIDoge1trZXldOiB2YWx1ZX07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFjdGlvbnM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7dG9BcnJheX0gZnJvbSAnLi91dGlscyc7XG5cbnZhciB3M2NDU1MgPSBkb2N1bWVudC5kZWZhdWx0VmlldyAmJiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlO1xuXG5leHBvcnQgZnVuY3Rpb24gdmlld3BvcnRSZWN0KCkge1xuXHR2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdHZhciBkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHR2YXIgY2xpZW50VG9wID0gZG9jRWxlbS5jbGllbnRUb3AgIHx8IGJvZHkuY2xpZW50VG9wICB8fCAwO1xuXHR2YXIgY2xpZW50TGVmdCA9IGRvY0VsZW0uY2xpZW50TGVmdCB8fCBib2R5LmNsaWVudExlZnQgfHwgMDtcblx0dmFyIHNjcm9sbFRvcCAgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxUb3AgIHx8IGJvZHkuc2Nyb2xsVG9wO1xuXHR2YXIgc2Nyb2xsTGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbExlZnQgfHwgYm9keS5zY3JvbGxMZWZ0O1xuXHRcblx0cmV0dXJuIHtcblx0XHR0b3A6IHNjcm9sbFRvcCAgLSBjbGllbnRUb3AsXG5cdFx0bGVmdDogc2Nyb2xsTGVmdCAtIGNsaWVudExlZnQsXG5cdFx0d2lkdGg6IGJvZHkuY2xpZW50V2lkdGggfHwgZG9jRWxlbS5jbGllbnRXaWR0aCxcblx0XHRoZWlnaHQ6IGJvZHkuY2xpZW50SGVpZ2h0IHx8IGRvY0VsZW0uY2xpZW50SGVpZ2h0XG5cdH07XG59XG5cbi8qKlxuICogUmVtb3ZlcyBlbGVtZW50IGZyb20gcGFyZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1cbiAqIEByZXR1cm5zIHtFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGVsZW0pIHtcblx0YXIoZWxlbSkuZm9yRWFjaChlbCA9PiBlbC5wYXJlbnROb2RlICYmIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpKTtcblx0cmV0dXJuIGVsZW07XG59XG5cbi8qKlxuICogUmVuZGVycyBzdHJpbmcgaW50byBET00gZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybnMge0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RPTShzdHIpIHtcblx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRkaXYuaW5uZXJIVE1MID0gc3RyO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQ7XG59XG5cbi8qKlxuICogU2V0cyBvciByZXRyaWV2ZXMgQ1NTIHByb3BlcnR5IHZhbHVlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1cbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjc3MoZWxlbSwgcHJvcCwgdmFsKSB7XG5cdGlmICh0eXBlb2YgcHJvcCA9PT0gJ3N0cmluZycgJiYgdmFsID09IG51bGwpIHtcblx0XHRyZXR1cm4gZ2V0Q1NTKGVsZW0sIHByb3ApO1xuXHR9XG5cdFxuXHRpZiAodHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSB7XG5cdFx0dmFyIG9iaiA9IHt9O1xuXHRcdG9ialtwcm9wXSA9IHZhbDtcblx0XHRwcm9wID0gb2JqO1xuXHR9XG5cdFxuXHRzZXRDU1MoZWxlbSwgcHJvcCk7XG59XG5cbmZ1bmN0aW9uIGFyKG9iaikge1xuXHRpZiAob2JqLmxlbmd0aCA9PT0gK29iai5sZW5ndGgpIHtcblx0XHRyZXR1cm4gdG9BcnJheShvYmopO1xuXHR9XG5cdFxuXHRyZXR1cm4gQXJyYXkuaXNBcnJheShvYmopID8gb2JqIDogW29ial07XG59XG5cbmZ1bmN0aW9uIHRvQ2FtZWxDYXNlKG5hbWUpIHtcblx0cmV0dXJuIG5hbWUucmVwbGFjZSgvXFwtKFxcdykvZywgZnVuY3Rpb24oc3RyLCBwMSkge1xuXHRcdHJldHVybiBwMS50b1VwcGVyQ2FzZSgpO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIENTUyBwcm9wZXJ0eSB2YWx1ZSBvZiBnaXZlbiBlbGVtZW50LlxuICogQGF1dGhvciBqUXVlcnkgVGVhbVxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBDU1MgcHJvcGVydHkgdmFsdWVcbiAqL1xuZnVuY3Rpb24gZ2V0Q1NTKGVsZW0sIG5hbWUpIHtcblx0dmFyIHJudW1weCA9IC9eLT9cXGQrKD86cHgpPyQvaSxcblx0XHRybnVtID0gL14tP1xcZCg/OlxcLlxcZCspPy8sXG5cdFx0cnN1ZiA9IC9cXGQkLztcblx0XG5cdHZhciBuYW1lQ2FtZWwgPSB0b0NhbWVsQ2FzZShuYW1lKTtcblx0Ly8gSWYgdGhlIHByb3BlcnR5IGV4aXN0cyBpbiBzdHlsZVtdLCB0aGVuIGl0J3MgYmVlbiBzZXRcblx0Ly8gcmVjZW50bHkgKGFuZCBpcyBjdXJyZW50KVxuXHRpZiAoZWxlbS5zdHlsZVtuYW1lQ2FtZWxdKSB7XG5cdFx0cmV0dXJuIGVsZW0uc3R5bGVbbmFtZUNhbWVsXTtcblx0fSBcblx0XHRcblx0aWYgKHczY0NTUykge1xuXHRcdHZhciBjcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW0sICcnKTtcblx0XHRyZXR1cm4gY3MuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcblx0fVxuXHRcblx0aWYgKGVsZW0uY3VycmVudFN0eWxlKSB7XG5cdFx0dmFyIHJldCA9IGVsZW0uY3VycmVudFN0eWxlW25hbWVdIHx8IGVsZW0uY3VycmVudFN0eWxlW25hbWVDYW1lbF07XG5cdFx0dmFyIHN0eWxlID0gZWxlbS5zdHlsZSB8fCBlbGVtO1xuXHRcdFxuXHRcdC8vIEZyb20gdGhlIGF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcblx0XHQvLyBodHRwOi8vZXJpay5lYWUubmV0L2FyY2hpdmVzLzIwMDcvMDcvMjcvMTguNTQuMTUvI2NvbW1lbnQtMTAyMjkxXG5cdFx0XG5cdFx0Ly8gSWYgd2UncmUgbm90IGRlYWxpbmcgd2l0aCBhIHJlZ3VsYXIgcGl4ZWwgbnVtYmVyXG5cdFx0Ly8gYnV0IGEgbnVtYmVyIHRoYXQgaGFzIGEgd2VpcmQgZW5kaW5nLCB3ZSBuZWVkIHRvIGNvbnZlcnQgaXQgdG8gcGl4ZWxzXG5cdFx0aWYgKCFybnVtcHgudGVzdChyZXQpICYmIHJudW0udGVzdChyZXQpKSB7XG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHR2YXIgbGVmdCA9IHN0eWxlLmxlZnQsIHJzTGVmdCA9IGVsZW0ucnVudGltZVN0eWxlLmxlZnQ7XG5cdFx0XHRcblx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdGVsZW0ucnVudGltZVN0eWxlLmxlZnQgPSBlbGVtLmN1cnJlbnRTdHlsZS5sZWZ0O1xuXHRcdFx0dmFyIHN1ZmZpeCA9IHJzdWYudGVzdChyZXQpID8gJ2VtJyA6ICcnO1xuXHRcdFx0c3R5bGUubGVmdCA9IG5hbWVDYW1lbCA9PT0gJ2ZvbnRTaXplJyA/ICcxZW0nIDogKHJldCArIHN1ZmZpeCB8fCAwKTtcblx0XHRcdHJldCA9IHN0eWxlLnBpeGVsTGVmdCArICdweCc7XG5cdFx0XHRcblx0XHRcdC8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXNcblx0XHRcdHN0eWxlLmxlZnQgPSBsZWZ0O1xuXHRcdFx0ZWxlbS5ydW50aW1lU3R5bGUubGVmdCA9IHJzTGVmdDtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIHJldDtcblx0fVxufVxuXG4vKipcbiAqIFNldHMgQ1NTIHByb3BlcnRpZXMgdG8gZ2l2ZW4gZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIENTUyBwcm9wZXJ0aWVzIHRvIHNldFxuICovXG5mdW5jdGlvbiBzZXRDU1MoZWxlbSwgcGFyYW1zKSB7XG5cdGlmICghZWxlbSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHZhciBudW1Qcm9wcyA9IHsnbGluZS1oZWlnaHQnOiAxLCAnei1pbmRleCc6IDEsIG9wYWNpdHk6IDF9O1xuXHR2YXIgcHJvcHMgPSBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChrID0+IHtcblx0XHR2YXIgdiA9IHBhcmFtc1trXTtcblx0XHR2YXIgbmFtZSA9IGsucmVwbGFjZSgvKFtBLVpdKS9nLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSArICc6JyArICgodHlwZW9mIHYgPT09ICdudW1iZXInICYmICEobmFtZSBpbiBudW1Qcm9wcykpID8gdiArICdweCcgOiB2KTtcblx0fSk7XG5cblx0ZWxlbS5zdHlsZS5jc3NUZXh0ICs9ICc7JyArIHByb3BzLmpvaW4oJzsnKTtcbn0iLCIvKipcbiAqIEEgaGlnaC1sZXZlbCBsaWJyYXJ5IGludGVyZmFjZSBmb3IgY3JlYXRpbmcgc2NlbmFyaW9zIG92ZXIgdGV4dGFyZWFcbiAqIGVsZW1lbnQuIFRoZSA8Y29kZT5Db2RlTWlycm9yLm1vdmllPC9jb2RlPiB0YWtlcyByZWZlcmVuY2UgdG8gdGV4dGFyZWFcbiAqIGVsZW1lbnQgKG9yIGl0cyBJRCkgYW5kIHBhcnNlcyBpdHMgY29udGVudCBmb3IgaW5pdGlhbCBjb250ZW50IHZhbHVlLFxuICogc2NlbmFyaW8gYW5kIG91dGxpbmUuXG4gKi9cblwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQge3BhcnNlSlNPTiwgZXh0ZW5kLCB0b0FycmF5fSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBTY2VuYXJpbyBmcm9tICcuL3NjZW5hcmlvJztcbmltcG9ydCBvdXRsaW5lIGZyb20gJy4vd2lkZ2V0cy9vdXRsaW5lJztcblxudmFyIGlvcyA9IC9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAvTW9iaWxlXFwvXFx3Ky8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbnZhciBtYWMgPSBpb3MgfHwgL01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO1xuXG52YXIgbWFjQ2hhck1hcCA9IHtcblx0J2N0cmwnOiAn4oyDJyxcblx0J2NvbnRyb2wnOiAn4oyDJyxcblx0J2NtZCc6ICfijJgnLFxuXHQnc2hpZnQnOiAn4oenJyxcblx0J2FsdCc6ICfijKUnLFxuXHQnZW50ZXInOiAn4o+OJyxcblx0J3RhYic6ICfih6UnLFxuXHQnbGVmdCc6ICfihpAnLFxuXHQncmlnaHQnOiAn4oaSJyxcblx0J3VwJzogJ+KGkScsXG5cdCdkb3duJzogJ+KGkydcbn07XG5cdFxudmFyIHBjQ2hhck1hcCA9IHtcblx0J2NtZCc6ICdDdHJsJyxcblx0J2NvbnRyb2wnOiAnQ3RybCcsXG5cdCdjdHJsJzogJ0N0cmwnLFxuXHQnYWx0JzogJ0FsdCcsXG5cdCdzaGlmdCc6ICdTaGlmdCcsXG5cdCdsZWZ0JzogJ+KGkCcsXG5cdCdyaWdodCc6ICfihpInLFxuXHQndXAnOiAn4oaRJyxcblx0J2Rvd24nOiAn4oaTJ1xufTtcblxuZXhwb3J0IHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcblx0LyoqXG5cdCAqIEF1dG9tYXRpY2FsbHkgcGFyc2UgbW92aWUgZGVmaW5pdGlvbiBmcm9tIHRleHRhcmVhIGNvbnRlbnQuIFNldHRpbmdcblx0ICogdGhpcyBwcm9wZXJ0eSB0byA8Y29kZT5mYWxzZTwvY29kZT4gYXNzdW1lcyB0aGF0IHVzZXIgd2FudHMgdG9cblx0ICogZXhwbGljaXRseSBwcm92aWRlIG1vdmllIGRhdGE6IGluaXRpYWwgdmFsdWUsIHNjZW5hcmlvIGV0Yy5cblx0ICovXG5cdHBhcnNlOiB0cnVlLFxuXHRcblx0LyoqXG5cdCAqIFN0cmluZyBvciByZWdleHAgdXNlZCB0byBzZXBhcmF0ZSBzZWN0aW9ucyBvZiBtb3ZpZSBkZWZpbml0aW9uLCBlLmcuXG5cdCAqIGRlZmF1bHQgdmFsdWUsIHNjZW5hcmlvIGFuZCBlZGl0b3Igb3B0aW9uc1xuXHQgKi9cblx0c2VjdGlvblNlcGFyYXRvcjogJ0BAQCcsXG5cdFxuXHQvKiogUmVndWxhciBleHByZXNzaW9uIHRvIGV4dHJhY3Qgb3V0bGluZSBmcm9tIHNjZW5hcmlvIGxpbmUgKi9cblx0b3V0bGluZVNlcGFyYXRvcjogL1xccys6OjpcXHMrKC4rKSQvLFxuXHRcblx0LyoqIEF1dG9tYXRpY2FsbHkgcHJldHRpZnkga2V5Ym9hcmQgc2hvcnRjdXRzIGluIG91dGxpbmUgKi9cblx0cHJldHRpZnlLZXlzOiB0cnVlLFxuXHRcblx0LyoqIFN0cmlwIHBhcmVudGhlc2VzIGZyb20gcHJldHR5ZmllZCBrZXlib2FyZCBzaG9ydGN1dCBkZWZpbml0aW9uICovXG5cdHN0cmlwUGFyZW50aGVzZXM6IGZhbHNlXG59O1xuXG4vKipcbiAqIEhpZ2gtbGV2ZWwgZnVuY3Rpb24gdG8gY3JlYXRlIG1vdmllIGluc3RhbmNlIG9uIHRleHRhcmVhLlxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXQgUmVmZXJlbmNlIHRvIHRleHRhcmVhLCBlaXRoZXIgPGNvZGU+RWxlbWVudDwvY29kZT5cbiAqIG9yIHN0cmluZyBJRC4gSXQgY2FuIGFsc28gYWNjZXB0IGV4aXN0aW5nIENvZGVNaXJyb3Igb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IG1vdmllT3B0aW9ucyBNb3ZpZSBvcHRpb25zLiBTZWUgPGNvZGU+ZGVmYXVsdE9wdGlvbnM8L2NvZGU+XG4gKiBmb3IgdmFsdWUgcmVmZXJlbmNlXG4gKiBAcGFyYW0ge09iamVjdH0gZWRpdG9yT3B0aW9ucyBBZGRpdGlvbmFsIG9wdGlvbnMgcGFzc2VkIHRvIENvZGVNaXJyb3JcbiAqIGVkaXRvciBpbml0aWFsaXplci5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbW92aWUodGFyZ2V0LCBtb3ZpZU9wdGlvbnM9e30sIGVkaXRvck9wdGlvbnM9e30pIHtcblx0c2V0dXBDb2RlTWlycm9yKCk7XG5cblx0aWYgKHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7XG5cdFx0dGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KTtcblx0fVxuXG5cdHZhciB0YXJnZXRJc1RleHRhcmVhID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0YXJlYSc7XG5cdFxuXHRtb3ZpZU9wdGlvbnMgPSBleHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBtb3ZpZU9wdGlvbnMpO1xuXHRlZGl0b3JPcHRpb25zID0gZXh0ZW5kKHtcblx0XHR0aGVtZTogJ2VzcHJlc3NvJyxcblx0XHRtb2RlIDogJ3RleHQvaHRtbCcsXG5cdFx0aW5kZW50V2l0aFRhYnM6IHRydWUsXG5cdFx0dGFiU2l6ZTogNCxcblx0XHRsaW5lTnVtYmVycyA6IHRydWUsXG5cdFx0cHJldmVudEN1cnNvck1vdmVtZW50OiB0cnVlXG5cdH0sIGVkaXRvck9wdGlvbnMpO1xuXHRcblx0dmFyIGluaXRpYWxWYWx1ZSA9IGVkaXRvck9wdGlvbnMudmFsdWUgfHwgKHRhcmdldElzVGV4dGFyZWEgPyB0YXJnZXQudmFsdWUgOiB0YXJnZXQuZ2V0VmFsdWUoKSkgfHwgJyc7XG5cdFxuXHRpZiAodGFyZ2V0SXNUZXh0YXJlYSAmJiBtb3ZpZU9wdGlvbnMucGFyc2UpIHtcblx0XHRleHRlbmQobW92aWVPcHRpb25zLCBwYXJzZU1vdmllRGVmaW5pdGlvbihpbml0aWFsVmFsdWUsIG1vdmllT3B0aW9ucykpO1xuXHRcdGluaXRpYWxWYWx1ZSA9IG1vdmllT3B0aW9ucy52YWx1ZTtcblx0XHRpZiAobW92aWVPcHRpb25zLmVkaXRvck9wdGlvbnMpIHtcblx0XHRcdGV4dGVuZChlZGl0b3JPcHRpb25zLCBtb3ZpZU9wdGlvbnMuZWRpdG9yT3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Ly8gcmVhZCBDTSBvcHRpb25zIGZyb20gZ2l2ZW4gdGV4dGFyZWFcblx0XHR2YXIgY21BdHRyID0gL15kYXRhXFwtY21cXC0oLispJC9pO1xuXHRcdHRvQXJyYXkodGFyZ2V0LmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24oYXR0cikge1xuXHRcdFx0dmFyIG0gPSBhdHRyLm5hbWUubWF0Y2goY21BdHRyKTtcblx0XHRcdGlmIChtKSB7XG5cdFx0XHRcdGVkaXRvck9wdGlvbnNbbVsxXV0gPSBhdHRyLnZhbHVlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHQvLyBub3JtYWxpemUgbGluZSBlbmRpbmdzXG5cdGluaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZS5yZXBsYWNlKC9cXHI/XFxuL2csICdcXG4nKTtcblx0XG5cdC8vIGxvY2F0ZSBpbml0aWFsIGNhcmV0IHBvc2l0aW9uIGZyb20gfCBzeW1ib2xcblx0dmFyIGluaXRpYWxQb3MgPSBpbml0aWFsVmFsdWUuaW5kZXhPZignfCcpO1xuXHRcblx0aWYgKHRhcmdldElzVGV4dGFyZWEpIHtcblx0XHR0YXJnZXQudmFsdWUgPSBlZGl0b3JPcHRpb25zLnZhbHVlID0gaW5pdGlhbFZhbHVlID0gaW5pdGlhbFZhbHVlLnJlcGxhY2UoL1xcfC9nLCAnJyk7XG5cdH1cblxuXHQvLyBjcmVhdGUgZWRpdG9yIGluc3RhbmNlIGlmIG5lZWRlZFxuXHR2YXIgZWRpdG9yID0gdGFyZ2V0SXNUZXh0YXJlYSA/IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKHRhcmdldCwgZWRpdG9yT3B0aW9ucykgOiB0YXJnZXQ7XG5cblx0aWYgKGluaXRpYWxQb3MgIT0gLTEpIHtcblx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGVkaXRvci5wb3NGcm9tSW5kZXgoaW5pdGlhbFBvcykpO1xuXHR9XG5cdFxuXHQvLyBzYXZlIGluaXRpYWwgZGF0YSBzbyB3ZSBjYW4gcmV2ZXJ0IHRvIGl0IGxhdGVyXG5cdGVkaXRvci5fX2luaXRpYWwgPSB7XG5cdFx0Y29udGVudDogaW5pdGlhbFZhbHVlLFxuXHRcdHBvczogZWRpdG9yLmdldEN1cnNvcih0cnVlKVxuXHR9O1xuXHRcblx0dmFyIHdyYXBwZXIgPSBlZGl0b3IuZ2V0V3JhcHBlckVsZW1lbnQoKTtcblx0XG5cdC8vIGFkanVzdCBoZWlnaHQsIGlmIHJlcXVpcmVkXG5cdGlmIChlZGl0b3JPcHRpb25zLmhlaWdodCkge1xuXHRcdHdyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gZWRpdG9yT3B0aW9ucy5oZWlnaHQgKyAncHgnO1xuXHR9XG5cdFxuXHR3cmFwcGVyLmNsYXNzTmFtZSArPSAnIENvZGVNaXJyb3ItbW92aWUnICsgKG1vdmllT3B0aW9ucy5vdXRsaW5lID8gJyBDb2RlTWlycm9yLW1vdmllX3dpdGgtb3V0bGluZScgOiAnJyk7XG5cdFxuXHR2YXIgc2MgPSBuZXcgU2NlbmFyaW8obW92aWVPcHRpb25zLnNjZW5hcmlvLCBlZGl0b3IpO1xuXHRpZiAobW92aWVPcHRpb25zLm91dGxpbmUpIHtcblx0XHR3cmFwcGVyLmNsYXNzTmFtZSArPSAnIENvZGVNaXJyb3ItbW92aWVfd2l0aC1vdXRsaW5lJztcblx0XHR3cmFwcGVyLmFwcGVuZENoaWxkKG91dGxpbmUobW92aWVPcHRpb25zLm91dGxpbmUsIHNjKSk7XG5cdH1cblx0cmV0dXJuIHNjO1xufTtcblxuLyoqXG4gKiBQcmV0dHlmaWVzIGtleSBiaW5kaW5ncyByZWZlcmVuY2VzIGluIGdpdmVuIHN0cmluZzogZm9ybWF0cyBpdCBhY2NvcmRpbmdcbiAqIHRvIGN1cnJlbnQgdXNlcuKAmXMgcGxhdGZvcm0uIFRoZSBrZXkgYmluZGluZyBzaG91bGQgYmUgZGVmaW5lZCBpbnNpZGUgXG4gKiBwYXJlbnRoZXNlcywgZS5nLiA8Y29kZT4oY3RybC1hbHQtdXApPC9jb2RlPlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVHJhbnNmb3JtIG9wdGlvbnNcbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHByZXR0aWZ5S2V5QmluZGluZ3Moc3RyLCBvcHRpb25zKSB7XG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHR2YXIgcmVLZXkgPSAvY3RybHxhbHR8c2hpZnR8Y21kL2k7XG5cdHZhciBtYXAgPSBtYWMgPyBtYWNDaGFyTWFwIDogcGNDaGFyTWFwO1xuXHRyZXR1cm4gc3RyLnJlcGxhY2UoL1xcKCguKz8pXFwpL2csIGZ1bmN0aW9uKG0sIGtiKSB7XG5cdFx0aWYgKHJlS2V5LnRlc3Qoa2IpKSB7XG5cdFx0XHR2YXIgcGFydHMgPSBrYi50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdC5zcGxpdCgvW1xcLVxcK10vKVxuXHRcdFx0XHQubWFwKGtleSA9PiBtYXBba2V5LnRvTG93ZXJDYXNlKCldIHx8IGtleS50b1VwcGVyQ2FzZSgpKTtcblx0XHRcdFxuXHRcdFx0bSA9IHBhcnRzLmpvaW4obWFjID8gJycgOiAnKycpO1xuXHRcdFx0aWYgKCFvcHRpb25zLnN0cmlwUGFyZW50aGVzZXMpIHtcblx0XHRcdFx0bSA9ICcoJyArIG0gKyAnKSc7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiBtO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gcmVhZExpbmVzKHRleHQpIHtcblx0Ly8gSUUgZmFpbHMgdG8gc3BsaXQgc3RyaW5nIGJ5IHJlZ2V4cCwgXG5cdC8vIG5lZWQgdG8gbm9ybWFsaXplIG5ld2xpbmVzIGZpcnN0XG5cdHZhciBubCA9ICdcXG4nO1xuXHR2YXIgbGluZXMgPSAodGV4dCB8fCAnJylcblx0XHQucmVwbGFjZSgvXFxyXFxuL2csIG5sKVxuXHRcdC5yZXBsYWNlKC9cXG5cXHIvZywgbmwpXG5cdFx0LnJlcGxhY2UoL1xcci9nLCBubClcblx0XHQuc3BsaXQobmwpO1xuXG5cdHJldHVybiBsaW5lcy5maWx0ZXIoQm9vbGVhbik7XG59XG5cbmZ1bmN0aW9uIHVuZXNjYXBlKHRleHQpIHtcblx0dmFyIHJlcGxhY2VtZW50cyA9IHtcblx0XHQnJmx0Oyc6ICAnPCcsXG5cdFx0JyZndDsnOiAgJz4nLFxuXHRcdCcmYW1wOyc6ICcmJ1xuXHR9O1xuXG5cdHJldHVybiB0ZXh0LnJlcGxhY2UoLyYobHR8Z3R8YW1wKTsvZywgZnVuY3Rpb24oc3RyLCBwMSkge1xuXHRcdHJldHVybiByZXBsYWNlbWVudHNbc3RyXSB8fCBzdHI7XG5cdH0pO1xufVxuXG4vKipcbiAqIEV4dHJhY3RzIGluaXRpYWwgY29udGVudCwgc2NlbmFyaW8gYW5kIG91dGxpbmUgZnJvbSBnaXZlbiBzdHJpbmdcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5mdW5jdGlvbiBwYXJzZU1vdmllRGVmaW5pdGlvbih0ZXh0LCBvcHRpb25zPXt9KSB7XG5cdG9wdGlvbnMgPSBleHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zIHx8IHt9KTtcblx0dmFyIHBhcnRzID0gdGV4dC5zcGxpdChvcHRpb25zLnNlY3Rpb25TZXBhcmF0b3IpO1xuXG5cdC8vIHBhcnNlIHNjZW5hcmlvXG5cdHZhciByZURlZiA9IC9eKFxcdyspXFxzKjpcXHMqKC4rKSQvO1xuXHR2YXIgc2NlbmFyaW8gPSBbXTtcblx0dmFyIG91dGxpbmUgPSB7fTtcblx0dmFyIGVkaXRvck9wdGlvbnMgPSB7fTtcblxuXHR2YXIgc2tpcENvbW1lbnQgPSBsaW5lID0+IGxpbmUuY2hhckF0KDApICE9PSAnIyc7XG5cblx0Ly8gcmVhZCBtb3ZpZSBkZWZpbml0aW9uXG5cdHJlYWRMaW5lcyhwYXJ0c1sxXSkuZmlsdGVyKHNraXBDb21tZW50KS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHtcblx0XHQvLyBkbyB3ZSBoYXZlIG91dGxpbmUgZGVmaW5pdGlvbiBoZXJlP1xuXHRcdGxpbmUgPSBsaW5lLnJlcGxhY2Uob3B0aW9ucy5vdXRsaW5lU2VwYXJhdG9yLCAnJyk7XG5cblx0XHR2YXIgc2QgPSBsaW5lLm1hdGNoKHJlRGVmKTtcblx0XHRpZiAoIXNkKSB7XG5cdFx0XHRyZXR1cm4gc2NlbmFyaW8ucHVzaChsaW5lLnRyaW0oKSk7XG5cdFx0fVxuXHRcdFx0XG5cblx0XHRpZiAoc2RbMl0uY2hhckF0KDApID09PSAneycpIHtcblx0XHRcdHZhciBvYmogPSB7fTtcblx0XHRcdG9ialtzZFsxXV0gPSBwYXJzZUpTT04odW5lc2NhcGUoc2RbMl0pKTtcblx0XHRcdHJldHVybiBzY2VuYXJpby5wdXNoKG9iaik7XG5cdFx0fVxuXG5cdFx0c2NlbmFyaW8ucHVzaChzZFsxXSArICc6JyArIHVuZXNjYXBlKHNkWzJdKSk7XG5cdH0pO1xuXG5cdC8vIHJlYWQgZWRpdG9yIG9wdGlvbnNcblx0aWYgKHBhcnRzWzJdKSB7XG5cdFx0cmVhZExpbmVzKHBhcnRzWzJdKS5maWx0ZXIoc2tpcENvbW1lbnQpLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuXHRcdFx0dmFyIHNkID0gbGluZS5tYXRjaChyZURlZik7XG5cdFx0XHRpZiAoc2QpIHtcblx0XHRcdFx0ZWRpdG9yT3B0aW9uc1tzZFsxXV0gPSBzZFsyXTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dmFsdWU6IHVuZXNjYXBlKHBhcnRzWzBdLnRyaW0oKSksXG5cdFx0c2NlbmFyaW86IHNjZW5hcmlvLFxuXHRcdG91dGxpbmU6IE9iamVjdC5rZXlzKG91dGxpbmUpLmxlbmd0aCA/IG91dGxpbmUgOiBudWxsLFxuXHRcdGVkaXRvck9wdGlvbnM6IGVkaXRvck9wdGlvbnNcblx0fTtcbn1cblxuZnVuY3Rpb24gc2V0dXBDb2RlTWlycm9yKCkge1xuXHRpZiAodHlwZW9mIENvZGVNaXJyb3IgPT09ICd1bmRlZmluZWQnIHx8ICdwcmV2ZW50Q3Vyc29yTW92ZW1lbnQnIGluIENvZGVNaXJyb3IuZGVmYXVsdHMpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRDb2RlTWlycm9yLmRlZmluZU9wdGlvbigncHJldmVudEN1cnNvck1vdmVtZW50JywgZmFsc2UsIGNtID0+IHtcblx0XHR2YXIgaGFuZGxlciA9IChjbSwgZXZlbnQpID0+IGNtLmdldE9wdGlvbigncmVhZE9ubHknKSAmJiBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGNtLm9uKCdrZXlkb3duJywgaGFuZGxlcik7XG5cdFx0Y20ub24oJ21vdXNlZG93bicsIGhhbmRsZXIpO1xuXHR9KTtcbn1cblxuaWYgKHR5cGVvZiBDb2RlTWlycm9yICE9PSAndW5kZWZpbmVkJykge1xuXHRDb2RlTWlycm9yLm1vdmllID0gbW92aWU7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBjb21tb25BY3Rpb25zIGZyb20gJy4vYWN0aW9ucyc7XG5pbXBvcnQge2FjdGlvbnMgYXMgcHJvbXB0fSBmcm9tICcuL3dpZGdldHMvcHJvbXB0JztcbmltcG9ydCB7YWN0aW9ucyBhcyB0b29sdGlwfSBmcm9tICcuL3dpZGdldHMvdG9vbHRpcCc7XG5pbXBvcnQge2V4dGVuZH0gZnJvbSAnLi91dGlscyc7XG5cbnZhciBhY3Rpb25zRGVmaW5pdGlvbiA9IGV4dGVuZCh7fSwgY29tbW9uQWN0aW9ucywgcHJvbXB0LCB0b29sdGlwKTtcblxudmFyIFNUQVRFX0lETEUgID0gJ2lkbGUnO1xudmFyIFNUQVRFX1BMQVkgID0gJ3BsYXknO1xudmFyIFNUQVRFX1BBVVNFID0gJ3BhdXNlJztcblxuLy8gUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gc3BsaXQgZXZlbnQgc3RyaW5nc1xudmFyIGV2ZW50U3BsaXR0ZXIgPSAvXFxzKy87XG5cbmV4cG9ydCB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XG5cdGJlZm9yZURlbGF5OiAxMDAwLFxuXHRhZnRlckRlbGF5OiAxMDAwXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb25zIEFjdGlvbnMgc2NlbmFyaW9cbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIEluaXRpYWwgY29udGVudCAoPGNvZGU+U3RyaW5nPC9jb2RlPikgb3IgZWRpdG9yXG4gKiBpbnN0YW5jZSAoPGNvZGU+Q29kZU1pcnJvcjwvY29kZT4pXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjZW5hcmlvIHtcblx0Y29uc3RydWN0b3IoYWN0aW9ucywgZGF0YSkge1xuXHRcdHRoaXMuX2FjdGlvbnMgPSBhY3Rpb25zO1xuXHRcdHRoaXMuX2FjdGlvbkl4ID0gMDtcblx0XHR0aGlzLl9lZGl0b3IgPSBudWxsO1xuXHRcdHRoaXMuX3N0YXRlID0gU1RBVEVfSURMRTtcblx0XHR0aGlzLl90aW1lclF1ZXVlID0gW107XG5cdFx0XG5cdFx0aWYgKGRhdGEgJiYgJ2dldFZhbHVlJyBpbiBkYXRhKSB7XG5cdFx0XHR0aGlzLl9lZGl0b3IgPSBkYXRhO1xuXHRcdH1cblx0XHRcblx0XHR2YXIgZWQgPSB0aGlzLl9lZGl0b3I7XG5cdFx0aWYgKGVkICYmICFlZC5fX2luaXRpYWwpIHtcblx0XHRcdGVkLl9faW5pdGlhbCA9IHtcblx0XHRcdFx0Y29udGVudDogZWQuZ2V0VmFsdWUoKSxcblx0XHRcdFx0cG9zOiBlZC5nZXRDdXJzb3IodHJ1ZSlcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cblx0X3NldHVwKGVkaXRvcikge1xuXHRcdGlmICghZWRpdG9yICYmIHRoaXMuX2VkaXRvcikge1xuXHRcdFx0ZWRpdG9yID0gdGhpcy5fZWRpdG9yO1xuXHRcdH1cblx0XHRcblx0XHRlZGl0b3IuZXhlY0NvbW1hbmQoJ3JldmVydCcpO1xuXHRcdHJldHVybiBlZGl0b3I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQbGF5IGN1cnJlbnQgc2NlbmFyaW9cblx0ICogQHBhcmFtIHtDb2RlTWlycm9yfSBlZGl0b3IgRWRpdG9yIGluc3RhbmNlIHdoZXJlIG9uIHdoaWNoIHNjZW5hcmlvIFxuXHQgKiBzaG91bGQgYmUgcGxheWVkXG5cdCAqIEBtZW1iZXJPZiBTY2VuYXJpb1xuXHQgKi9cblx0cGxheShlZGl0b3IpIHtcblx0XHRpZiAodGhpcy5fc3RhdGUgPT09IFNUQVRFX1BMQVkpIHtcblx0XHRcdC8vIGFscmVhZHkgcGxheWluZ1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHRpZiAodGhpcy5fc3RhdGUgPT09IFNUQVRFX1BBVVNFKSB7XG5cdFx0XHQvLyByZXZlcnQgZnJvbSBwYXVzZWQgc3RhdGVcblx0XHRcdGVkaXRvciA9IGVkaXRvciB8fCB0aGlzLl9lZGl0b3I7XG5cdFx0XHRlZGl0b3IuZm9jdXMoKTtcblx0XHRcdHZhciB0aW1lck9iaiA9IG51bGw7XG5cdFx0XHR3aGlsZSAodGltZXJPYmogPSB0aGlzLl90aW1lclF1ZXVlLnNoaWZ0KCkpIHtcblx0XHRcdFx0cmVxdWVzdFRpbWVyKHRpbWVyT2JqLmZuLCB0aW1lck9iai5kZWxheSk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdHRoaXMuX3N0YXRlID0gU1RBVEVfUExBWTtcblx0XHRcdHRoaXMudHJpZ2dlcigncmVzdW1lJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdHRoaXMuX2VkaXRvciA9IGVkaXRvciA9IHRoaXMuX3NldHVwKGVkaXRvcik7XG5cdFx0ZWRpdG9yLmZvY3VzKCk7XG5cdFx0XG5cdFx0dmFyIHRpbWVyID0gdGhpcy5yZXF1ZXN0VGltZXIuYmluZCh0aGlzKTtcblx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cdFx0dGhpcy5fYWN0aW9uSXggPSAwO1xuXHRcdHZhciBuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAodGhhdC5fYWN0aW9uSXggPj0gdGhhdC5fYWN0aW9ucy5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuIHRpbWVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHRoYXQuc3RvcCgpO1xuXHRcdFx0XHR9LCBkZWZhdWx0T3B0aW9ucy5hZnRlckRlbGF5KTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0dGhhdC50cmlnZ2VyKCdhY3Rpb24nLCB0aGF0Ll9hY3Rpb25JeCk7XG5cdFx0XHR2YXIgYWN0aW9uID0gcGFyc2VBY3Rpb25DYWxsKHRoYXQuX2FjdGlvbnNbdGhhdC5fYWN0aW9uSXgrK10pO1xuXHRcdFx0XG5cdFx0XHRpZiAoYWN0aW9uLm5hbWUgaW4gYWN0aW9uc0RlZmluaXRpb24pIHtcblx0XHRcdFx0YWN0aW9uc0RlZmluaXRpb25bYWN0aW9uLm5hbWVdLmNhbGwodGhhdCwgYWN0aW9uLm9wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdObyBzdWNoIGFjdGlvbjogJyArIGFjdGlvbi5uYW1lKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHRcdHRoaXMuX3N0YXRlID0gU1RBVEVfUExBWTtcblx0XHR0aGlzLl9lZGl0b3Iuc2V0T3B0aW9uKCdyZWFkT25seScsIHRydWUpO1xuXHRcdHRoaXMudHJpZ2dlcigncGxheScpO1xuXHRcdHRpbWVyKG5leHQsIGRlZmF1bHRPcHRpb25zLmJlZm9yZURlbGF5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhdXNlIGN1cnJlbnQgc2NlbmFyaW8gcGxheWJhY2suIEl0IGNhbiBiZSByZXN0b3JlZCB3aXRoIFxuXHQgKiA8Y29kZT5wbGF5KCk8L2NvZGU+IG1ldGhvZCBjYWxsIFxuXHQgKi9cblx0cGF1c2UoKSB7XG5cdFx0dGhpcy5fc3RhdGUgPSBTVEFURV9QQVVTRTtcblx0XHR0aGlzLnRyaWdnZXIoJ3BhdXNlJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdG9wcyBwbGF5YmFjayBvZiBjdXJyZW50IHNjZW5hcmlvXG5cdCAqL1xuXHRzdG9wKCkge1xuXHRcdGlmICh0aGlzLl9zdGF0ZSAhPT0gU1RBVEVfSURMRSkge1xuXHRcdFx0dGhpcy5fc3RhdGUgPSBTVEFURV9JRExFO1xuXHRcdFx0dGhpcy5fdGltZXJRdWV1ZS5sZW5ndGggPSAwO1xuXHRcdFx0dGhpcy5fZWRpdG9yLnNldE9wdGlvbigncmVhZE9ubHknLCBmYWxzZSk7XG5cdFx0XHR0aGlzLnRyaWdnZXIoJ3N0b3AnKTtcblx0XHR9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGN1cnJlbnQgcGxheWJhY2sgc3RhdGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0Z2V0IHN0YXRlKCkge1xuXHRcdHJldHVybiB0aGlzLl9zdGF0ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRvZ2dsZSBwbGF5YmFjayBvZiBtb3ZpZSBzY2VuYXJpb1xuXHQgKi9cblx0dG9nZ2xlKCkge1xuXHRcdGlmICh0aGlzLl9zdGF0ZSA9PT0gU1RBVEVfUExBWSkge1xuXHRcdFx0dGhpcy5wYXVzZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnBsYXkoKTtcblx0XHR9XG5cdH1cblx0XG5cdHJlcXVlc3RUaW1lcihmbiwgZGVsYXkpIHtcblx0XHRpZiAodGhpcy5fc3RhdGUgIT09IFNUQVRFX1BMQVkpIHtcblx0XHRcdC8vIHNhdmUgZnVuY3Rpb24gY2FsbCBpbnRvIGEgcXVldWUgdGlsbCBuZXh0ICdwbGF5KCknIGNhbGxcblx0XHRcdHRoaXMuX3RpbWVyUXVldWUucHVzaCh7XG5cdFx0XHRcdGZuOiBmbixcblx0XHRcdFx0ZGVsYXk6IGRlbGF5XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHJlcXVlc3RUaW1lcihmbiwgZGVsYXkpO1xuXHRcdH1cblx0fVxuXHRcblx0Ly8gYm9ycm93ZWQgZnJvbSBCYWNrYm9uZVxuXHQvKipcblx0ICogQmluZCBvbmUgb3IgbW9yZSBzcGFjZSBzZXBhcmF0ZWQgZXZlbnRzLCBgZXZlbnRzYCwgdG8gYSBgY2FsbGJhY2tgXG5cdCAqIGZ1bmN0aW9uLiBQYXNzaW5nIGBcImFsbFwiYCB3aWxsIGJpbmQgdGhlIGNhbGxiYWNrIHRvIGFsbCBldmVudHMgZmlyZWQuXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudHNcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRcblx0ICogQG1lbWJlck9mIGV2ZW50RGlzcGF0Y2hlclxuXHQgKi9cblx0b24oZXZlbnRzLCBjYWxsYmFjaywgY29udGV4dCkge1xuXHRcdHZhciBjYWxscywgZXZlbnQsIG5vZGUsIHRhaWwsIGxpc3Q7XG5cdFx0aWYgKCFjYWxsYmFjaykge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdFxuXHRcdGV2ZW50cyA9IGV2ZW50cy5zcGxpdChldmVudFNwbGl0dGVyKTtcblx0XHRjYWxscyA9IHRoaXMuX2NhbGxiYWNrcyB8fCAodGhpcy5fY2FsbGJhY2tzID0ge30pO1xuXG5cdFx0Ly8gQ3JlYXRlIGFuIGltbXV0YWJsZSBjYWxsYmFjayBsaXN0LCBhbGxvd2luZyB0cmF2ZXJzYWwgZHVyaW5nXG5cdFx0Ly8gbW9kaWZpY2F0aW9uLiAgVGhlIHRhaWwgaXMgYW4gZW1wdHkgb2JqZWN0IHRoYXQgd2lsbCBhbHdheXMgYmUgdXNlZFxuXHRcdC8vIGFzIHRoZSBuZXh0IG5vZGUuXG5cdFx0d2hpbGUgKGV2ZW50ID0gZXZlbnRzLnNoaWZ0KCkpIHtcblx0XHRcdGxpc3QgPSBjYWxsc1tldmVudF07XG5cdFx0XHRub2RlID0gbGlzdCA/IGxpc3QudGFpbCA6IHt9O1xuXHRcdFx0bm9kZS5uZXh0ID0gdGFpbCA9IHt9O1xuXHRcdFx0bm9kZS5jb250ZXh0ID0gY29udGV4dDtcblx0XHRcdG5vZGUuY2FsbGJhY2sgPSBjYWxsYmFjaztcblx0XHRcdGNhbGxzW2V2ZW50XSA9IHtcblx0XHRcdFx0dGFpbCA6IHRhaWwsXG5cdFx0XHRcdG5leHQgOiBsaXN0ID8gbGlzdC5uZXh0IDogbm9kZVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmUgb25lIG9yIG1hbnkgY2FsbGJhY2tzLiBJZiBgY29udGV4dGAgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcblx0ICogY2FsbGJhY2tzIHdpdGggdGhhdCBmdW5jdGlvbi4gSWYgYGNhbGxiYWNrYCBpcyBudWxsLCByZW1vdmVzIGFsbFxuXHQgKiBjYWxsYmFja3MgZm9yIHRoZSBldmVudC4gSWYgYGV2ZW50c2AgaXMgbnVsbCwgcmVtb3ZlcyBhbGwgYm91bmRcblx0ICogY2FsbGJhY2tzIGZvciBhbGwgZXZlbnRzLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0XG5cdCAqL1xuXHRvZmYoZXZlbnRzLCBjYWxsYmFjaywgY29udGV4dCkge1xuXHRcdHZhciBldmVudCwgY2FsbHMsIG5vZGUsIHRhaWwsIGNiLCBjdHg7XG5cblx0XHQvLyBObyBldmVudHMsIG9yIHJlbW92aW5nICphbGwqIGV2ZW50cy5cblx0XHRpZiAoIShjYWxscyA9IHRoaXMuX2NhbGxiYWNrcykpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0aWYgKCEoZXZlbnRzIHx8IGNhbGxiYWNrIHx8IGNvbnRleHQpKSB7XG5cdFx0XHRkZWxldGUgdGhpcy5fY2FsbGJhY2tzO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIHRoZSBsaXN0ZWQgZXZlbnRzIGFuZCBjb250ZXh0cywgc3BsaWNpbmcgdGhlbSBvdXQgb2YgdGhlXG5cdFx0Ly8gbGlua2VkIGxpc3Qgb2YgY2FsbGJhY2tzIGlmIGFwcHJvcHJpYXRlLlxuXHRcdGV2ZW50cyA9IGV2ZW50cyA/IGV2ZW50cy5zcGxpdChldmVudFNwbGl0dGVyKSA6IE9iamVjdC5rZXlzKGNhbGxzKTtcblx0XHR3aGlsZSAoZXZlbnQgPSBldmVudHMuc2hpZnQoKSkge1xuXHRcdFx0bm9kZSA9IGNhbGxzW2V2ZW50XTtcblx0XHRcdGRlbGV0ZSBjYWxsc1tldmVudF07XG5cdFx0XHRpZiAoIW5vZGUgfHwgIShjYWxsYmFjayB8fCBjb250ZXh0KSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IGxpc3QsIG9taXR0aW5nIHRoZSBpbmRpY2F0ZWQgY2FsbGJhY2tzLlxuXHRcdFx0dGFpbCA9IG5vZGUudGFpbDtcblx0XHRcdHdoaWxlICgobm9kZSA9IG5vZGUubmV4dCkgIT09IHRhaWwpIHtcblx0XHRcdFx0Y2IgPSBub2RlLmNhbGxiYWNrO1xuXHRcdFx0XHRjdHggPSBub2RlLmNvbnRleHQ7XG5cdFx0XHRcdGlmICgoY2FsbGJhY2sgJiYgY2IgIT09IGNhbGxiYWNrKSB8fCAoY29udGV4dCAmJiBjdHggIT09IGNvbnRleHQpKSB7XG5cdFx0XHRcdFx0dGhpcy5vbihldmVudCwgY2IsIGN0eCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyaWdnZXIgb25lIG9yIG1hbnkgZXZlbnRzLCBmaXJpbmcgYWxsIGJvdW5kIGNhbGxiYWNrcy4gQ2FsbGJhY2tzIGFyZVxuXHQgKiBwYXNzZWQgdGhlIHNhbWUgYXJndW1lbnRzIGFzIGB0cmlnZ2VyYCBpcywgYXBhcnQgZnJvbSB0aGUgZXZlbnQgbmFtZVxuXHQgKiAodW5sZXNzIHlvdSdyZSBsaXN0ZW5pbmcgb24gYFwiYWxsXCJgLCB3aGljaCB3aWxsIGNhdXNlIHlvdXIgY2FsbGJhY2tcblx0ICogdG8gcmVjZWl2ZSB0aGUgdHJ1ZSBuYW1lIG9mIHRoZSBldmVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQpLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRzXG5cdCAqL1xuXHR0cmlnZ2VyKGV2ZW50cywgLi4ucmVzdCkge1xuXHRcdHZhciBldmVudCwgbm9kZSwgY2FsbHMsIHRhaWwsIGFyZ3MsIGFsbDtcblx0XHRpZiAoIShjYWxscyA9IHRoaXMuX2NhbGxiYWNrcykpIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRcblx0XHRhbGwgPSBjYWxscy5hbGw7XG5cdFx0ZXZlbnRzID0gZXZlbnRzLnNwbGl0KGV2ZW50U3BsaXR0ZXIpO1xuXG5cdFx0Ly8gRm9yIGVhY2ggZXZlbnQsIHdhbGsgdGhyb3VnaCB0aGUgbGlua2VkIGxpc3Qgb2YgY2FsbGJhY2tzIHR3aWNlLFxuXHRcdC8vIGZpcnN0IHRvIHRyaWdnZXIgdGhlIGV2ZW50LCB0aGVuIHRvIHRyaWdnZXIgYW55IGBcImFsbFwiYCBjYWxsYmFja3MuXG5cdFx0d2hpbGUgKGV2ZW50ID0gZXZlbnRzLnNoaWZ0KCkpIHtcblx0XHRcdGlmIChub2RlID0gY2FsbHNbZXZlbnRdKSB7XG5cdFx0XHRcdHRhaWwgPSBub2RlLnRhaWw7XG5cdFx0XHRcdHdoaWxlICgobm9kZSA9IG5vZGUubmV4dCkgIT09IHRhaWwpIHtcblx0XHRcdFx0XHRub2RlLmNhbGxiYWNrLmFwcGx5KG5vZGUuY29udGV4dCB8fCB0aGlzLCByZXN0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKG5vZGUgPSBhbGwpIHtcblx0XHRcdFx0dGFpbCA9IG5vZGUudGFpbDtcblx0XHRcdFx0YXJncyA9IFsgZXZlbnQgXS5jb25jYXQocmVzdCk7XG5cdFx0XHRcdHdoaWxlICgobm9kZSA9IG5vZGUubmV4dCkgIT09IHRhaWwpIHtcblx0XHRcdFx0XHRub2RlLmNhbGxiYWNrLmFwcGx5KG5vZGUuY29udGV4dCB8fCB0aGlzLCBhcmdzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59O1xuXG4vKipcbiAqIFBhcnNlcyBhY3Rpb24gY2FsbCBmcm9tIHN0cmluZ1xuICogQHBhcmFtIHtTdHJpbmd9IGRhdGFcbiAqIEByZXR1cm5zIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHBhcnNlQWN0aW9uQ2FsbChkYXRhKSB7XG5cdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcblx0XHR2YXIgcGFydHMgPSBkYXRhLnNwbGl0KCc6Jyk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IHBhcnRzLnNoaWZ0KCksXG5cdFx0XHRvcHRpb25zOiBwYXJ0cy5qb2luKCc6Jylcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHZhciBuYW1lID0gT2JqZWN0LmtleXMoZGF0YSlbMF07XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IG5hbWUsXG5cdFx0XHRvcHRpb25zOiBkYXRhW25hbWVdXG5cdFx0fTtcblx0fVxufVxuXG5mdW5jdGlvbiByZXF1ZXN0VGltZXIoZm4sIGRlbGF5KSB7XG5cdGlmICghZGVsYXkpIHtcblx0XHRmbigpO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBzZXRUaW1lb3V0KGZuLCBkZWxheSk7XG5cdH1cbn0iLCJ2YXIgcHJvcENhY2hlID0ge307XG5cbi8vIGRldGVjdCBDU1MgM0QgVHJhbnNmb3JtcyBmb3Igc21vb3RoZXIgYW5pbWF0aW9ucyBcbmV4cG9ydCB2YXIgaGFzM2QgPSAoZnVuY3Rpb24oKSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHR2YXIgY3NzVHJhbnNmb3JtID0gcHJlZml4ZWQoJ3RyYW5zZm9ybScpO1xuXHRpZiAoY3NzVHJhbnNmb3JtKSB7XG5cdFx0ZWwuc3R5bGVbY3NzVHJhbnNmb3JtXSA9ICd0cmFuc2xhdGVaKDApJztcblx0XHRyZXR1cm4gKC90cmFuc2xhdGV6L2kpLnRlc3QoZWwuc3R5bGVbY3NzVHJhbnNmb3JtXSk7IFxuXHR9XG5cdFxuXHRyZXR1cm4gZmFsc2U7XG59KSgpO1xuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgLi4uYXJncykge1xuXHRhcmdzLmZvckVhY2goYSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBhID09PSAnb2JqZWN0Jykge1xuXHRcdFx0T2JqZWN0LmtleXMoYSkuZm9yRWFjaChrZXkgPT4gb2JqW2tleV0gPSBhW2tleV0pO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBvYmo7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b0FycmF5KG9iaiwgaXg9MCkge1xuXHRyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwob2JqLCBpeCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBwcmVmaXhlZCAoaWYgcmVxdWlyZWQpIENTUyBwcm9wZXJ0eSBuYW1lXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHByb3BcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZWZpeGVkKHByb3ApIHtcblx0aWYgKHByb3AgaW4gcHJvcENhY2hlKSB7XG5cdFx0cmV0dXJuIHByb3BDYWNoZVtwcm9wXTtcblx0fVxuXG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHR2YXIgc3R5bGUgPSBlbC5zdHlsZTtcblxuXHR2YXIgcHJlZml4ZXMgPSBbJ28nLCAnbXMnLCAnbW96JywgJ3dlYmtpdCddO1xuXHR2YXIgcHJvcHMgPSBbcHJvcF07XG5cdHZhciBjYXBpdGFsaXplID0gZnVuY3Rpb24oc3RyKSB7XG5cdFx0cmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zdWJzdHIoMSk7XG5cdH07XG5cblx0cHJvcCA9IHByb3AucmVwbGFjZSgvXFwtKFthLXpdKS9nLCBmdW5jdGlvbihzdHIsIGNoKSB7XG5cdFx0cmV0dXJuIGNoLnRvVXBwZXJDYXNlKCk7XG5cdH0pO1xuXG5cdHZhciBjYXBQcm9wID0gY2FwaXRhbGl6ZShwcm9wKTtcblx0cHJlZml4ZXMuZm9yRWFjaChmdW5jdGlvbihwcmVmaXgpIHtcblx0XHRwcm9wcy5wdXNoKHByZWZpeCArIGNhcFByb3AsIGNhcGl0YWxpemUocHJlZml4KSArIGNhcFByb3ApO1xuXHR9KTtcblxuXHRmb3IgKHZhciBpID0gMCwgaWwgPSBwcm9wcy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7XG5cdFx0aWYgKHByb3BzW2ldIGluIHN0eWxlKSB7XG5cdFx0XHRyZXR1cm4gcHJvcENhY2hlW3Byb3BdID0gcHJvcHNbaV07XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHByb3BDYWNoZVtwcm9wXSA9IG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3NPYmoob2JqKSB7XG5cdHJldHVybiB7XG5cdFx0bGluZTogb2JqLmxpbmUsXG5cdFx0Y2g6IG9iai5jaFxuXHR9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3Vyc29yKGVkaXRvciwgc3RhcnQ9J2Zyb20nKSB7XG5cdHJldHVybiBwb3NPYmooZWRpdG9yLmdldEN1cnNvcihzdGFydCkpO1xufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHByb2R1Y2VzIDxjb2RlPntsaW5lLCBjaH08L2NvZGU+IG9iamVjdCBmcm9tXG4gKiBwYXNzZWQgYXJndW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwb3NcbiAqIEBwYXJhbSB7Q29kZU1pcnJvcn0gZWRpdG9yXG4gKiBAcmV0dXJucyB7T2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZVBvcyhwb3MsIGVkaXRvcikge1xuXHRpZiAocG9zID09PSAnY2FyZXQnKSB7XG5cdFx0cmV0dXJuIGdldEN1cnNvcihlZGl0b3IpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBwb3MgPT09ICdzdHJpbmcnKSB7XG5cdFx0aWYgKH5wb3MuaW5kZXhPZignOicpKSB7XG5cdFx0XHRsZXQgcGFydHMgPSBwb3Muc3BsaXQoJzonKTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGxpbmU6ICtwYXJ0c1swXSxcblx0XHRcdFx0Y2g6ICtwYXJ0c1sxXVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0XG5cdFx0cG9zID0gK3Bvcztcblx0fVxuXHRcblx0aWYgKHR5cGVvZiBwb3MgPT09ICdudW1iZXInKSB7XG5cdFx0cmV0dXJuIHBvc09iaihlZGl0b3IucG9zRnJvbUluZGV4KHBvcykpO1xuXHR9XG5cdFxuXHRyZXR1cm4gcG9zT2JqKHBvcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZSh0bXBsLCBkYXRhKSB7XG5cdHZhciBmbiA9IGRhdGEgPT4gdG1wbC5yZXBsYWNlKC88JShbLT1dKT9cXHMqKFtcXHdcXC1dKylcXHMqJT4vZywgKHN0ciwgb3AsIGtleSkgPT4gZGF0YVtrZXkudHJpbSgpXSk7XG5cdHJldHVybiBkYXRhID8gZm4oZGF0YSkgOiBmbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmQoYXJyLCBpdGVyKSB7XG5cdHZhciBmb3VuZDtcblx0YXJyLnNvbWUoKGl0ZW0sIGksIGFycikgPT4ge1xuXHRcdGlmIChpdGVyKGl0ZW0sIGksIGFycikpIHtcblx0XHRcdHJldHVybiBmb3VuZCA9IGl0ZW07XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIGZvdW5kO1xufVxuXG4vKipcbiAqIFJlbGF4ZWQgSlNPTiBwYXJzZXIuXG4gKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICogQHJldHVybnMge09iamVjdH0gXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUpTT04odGV4dCkge1xuXHR0cnkge1xuXHRcdHJldHVybiAobmV3IEZ1bmN0aW9uKCdyZXR1cm4gJyArIHRleHQpKSgpO1xuXHR9IGNhdGNoKGUpIHtcblx0XHRyZXR1cm4ge307XG5cdH1cbn0iLCJ2YXIgZ2xvYmFsID0gd2luZG93O1xudmFyIHRpbWUgPSBEYXRlLm5vdyBcblx0PyBmdW5jdGlvbigpIHtyZXR1cm4gRGF0ZS5ub3coKTt9XG5cdDogZnVuY3Rpb24oKSB7cmV0dXJuICtuZXcgRGF0ZTt9O1xuXG52YXIgaW5kZXhPZiA9ICdpbmRleE9mJyBpbiBBcnJheS5wcm90b3R5cGVcblx0PyBmdW5jdGlvbihhcnJheSwgdmFsdWUpIHtyZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSk7fVxuXHQ6IGZ1bmN0aW9uKGFycmF5LCB2YWx1ZSkge1xuXHRcdGZvciAodmFyIGkgPSAwLCBpbCA9IGFycmF5Lmxlbmd0aDsgaSA8IGlsOyBpKyspIHtcblx0XHRcdGlmIChhcnJheVtpXSA9PT0gdmFsdWUpIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIC0xO1xuXHR9O1xuXG5mdW5jdGlvbiBleHRlbmQob2JqKSB7XG5cdGZvciAodmFyIGkgPSAxLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGgsIHNvdXJjZTsgaSA8IGlsOyBpKyspIHtcblx0XHRzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cdFx0aWYgKHNvdXJjZSkge1xuXHRcdFx0Zm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcblx0XHRcdFx0b2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlclxuICogZml4ZXMgZnJvbSBQYXVsIElyaXNoIGFuZCBUaW5vIFppamRlbFxuICogaHR0cDovL3BhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy9cbiAqIGh0dHA6Ly9teS5vcGVyYS5jb20vZW1vbGxlci9ibG9nLzIwMTEvMTIvMjAvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1lci1hbmltYXRpbmdcbiAqL1xuKGZ1bmN0aW9uKCkge1xuXHR2YXIgbGFzdFRpbWUgPSAwO1xuXHR2YXIgdmVuZG9ycyA9IFsgJ21zJywgJ21veicsICd3ZWJraXQnLCAnbycgXTtcblx0Zm9yICh2YXIgeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhZ2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KSB7XG5cdFx0Z2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGdsb2JhbFt2ZW5kb3JzW3hdICsgJ1JlcXVlc3RBbmltYXRpb25GcmFtZSddO1xuXHRcdGdsb2JhbC5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGdsb2JhbFt2ZW5kb3JzW3hdICsgJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ11cblx0XHRcdFx0fHwgZ2xvYmFsW3ZlbmRvcnNbeF0gKyAnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG5cdH1cblx0XG5cdGlmICghZ2xvYmFsLnJlcXVlc3RBbmltYXRpb25GcmFtZSlcblx0XHRnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpIHtcblx0XHRcdHZhciBjdXJyVGltZSA9IHRpbWUoKTtcblx0XHRcdHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xuXHRcdFx0dmFyIGlkID0gZ2xvYmFsLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGNhbGxiYWNrKGN1cnJUaW1lICsgdGltZVRvQ2FsbCk7XG5cdFx0XHR9LCB0aW1lVG9DYWxsKTtcblx0XHRcdGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsO1xuXHRcdFx0cmV0dXJuIGlkO1xuXHRcdH07XG5cblx0aWYgKCFnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXG5cdFx0Z2xvYmFsLmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oaWQpIHtcblx0XHRcdGNsZWFyVGltZW91dChpZCk7XG5cdFx0fTtcbn0oKSk7XG5cblxudmFyIGR1bW15Rm4gPSBmdW5jdGlvbigpIHt9O1xudmFyIGFuaW1zID0gW107XG52YXIgaWRDb3VudGVyID0gMDtcblxudmFyIGRlZmF1bHRzID0ge1xuXHRkdXJhdGlvbjogNTAwLCAvLyBtc1xuXHRkZWxheTogMCxcblx0ZWFzaW5nOiAnbGluZWFyJyxcblx0c3RhcnQ6IGR1bW15Rm4sXG5cdHN0ZXA6IGR1bW15Rm4sXG5cdGNvbXBsZXRlOiBkdW1teUZuLFxuXHRhdXRvc3RhcnQ6IHRydWUsXG5cdHJldmVyc2U6IGZhbHNlXG59O1xuXG5leHBvcnQgdmFyIGVhc2luZ3MgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHJldHVybiBjICogdCAvIGQgKyBiO1xuXHR9LFxuXHRpblF1YWQ6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gYyoodC89ZCkqdCArIGI7XG5cdH0sXG5cdG91dFF1YWQ6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gLWMgKih0Lz1kKSoodC0yKSArIGI7XG5cdH0sXG5cdGluT3V0UXVhZDogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdGlmKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIGMvMip0KnQgKyBiO1xuXHRcdHJldHVybiAtYy8yICooKC0tdCkqKHQtMikgLSAxKSArIGI7XG5cdH0sXG5cdGluQ3ViaWM6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gYyoodC89ZCkqdCp0ICsgYjtcblx0fSxcblx0b3V0Q3ViaWM6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gYyooKHQ9dC9kLTEpKnQqdCArIDEpICsgYjtcblx0fSxcblx0aW5PdXRDdWJpYzogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdGlmKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIGMvMip0KnQqdCArIGI7XG5cdFx0cmV0dXJuIGMvMiooKHQtPTIpKnQqdCArIDIpICsgYjtcblx0fSxcblx0aW5FeHBvOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuKHQ9PTApID8gYiA6IGMgKiBNYXRoLnBvdygyLCAxMCAqKHQvZCAtIDEpKSArIGIgLSBjICogMC4wMDE7XG5cdH0sXG5cdG91dEV4cG86IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4odD09ZCkgPyBiK2MgOiBjICogMS4wMDEgKigtTWF0aC5wb3coMiwgLTEwICogdC9kKSArIDEpICsgYjtcblx0fSxcblx0aW5PdXRFeHBvOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0aWYodD09MCkgcmV0dXJuIGI7XG5cdFx0aWYodD09ZCkgcmV0dXJuIGIrYztcblx0XHRpZigodC89ZC8yKSA8IDEpIHJldHVybiBjLzIgKiBNYXRoLnBvdygyLCAxMCAqKHQgLSAxKSkgKyBiIC0gYyAqIDAuMDAwNTtcblx0XHRyZXR1cm4gYy8yICogMS4wMDA1ICooLU1hdGgucG93KDIsIC0xMCAqIC0tdCkgKyAyKSArIGI7XG5cdH0sXG5cdGluRWxhc3RpYzogZnVuY3Rpb24odCwgYiwgYywgZCwgYSwgcCkge1xuXHRcdHZhciBzO1xuXHRcdGlmKHQ9PTApIHJldHVybiBiOyAgaWYoKHQvPWQpPT0xKSByZXR1cm4gYitjOyAgaWYoIXApIHA9ZCouMztcblx0XHRpZighYSB8fCBhIDwgTWF0aC5hYnMoYykpIHsgYT1jOyBzPXAvNDsgfSBlbHNlIHMgPSBwLygyKk1hdGguUEkpICogTWF0aC5hc2luKGMvYSk7XG5cdFx0cmV0dXJuIC0oYSpNYXRoLnBvdygyLDEwKih0LT0xKSkgKiBNYXRoLnNpbigodCpkLXMpKigyKk1hdGguUEkpL3AgKSkgKyBiO1xuXHR9LFxuXHRvdXRFbGFzdGljOiBmdW5jdGlvbih0LCBiLCBjLCBkLCBhLCBwKSB7XG5cdFx0dmFyIHM7XG5cdFx0aWYodD09MCkgcmV0dXJuIGI7ICBpZigodC89ZCk9PTEpIHJldHVybiBiK2M7ICBpZighcCkgcD1kKi4zO1xuXHRcdGlmKCFhIHx8IGEgPCBNYXRoLmFicyhjKSkgeyBhPWM7IHM9cC80OyB9IGVsc2UgcyA9IHAvKDIqTWF0aC5QSSkgKiBNYXRoLmFzaW4oYy9hKTtcblx0XHRyZXR1cm4oYSpNYXRoLnBvdygyLC0xMCp0KSAqIE1hdGguc2luKCh0KmQtcykqKDIqTWF0aC5QSSkvcCApICsgYyArIGIpO1xuXHR9LFxuXHRpbk91dEVsYXN0aWM6IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIGEsIHApIHtcblx0XHR2YXIgcztcblx0XHRpZih0PT0wKSByZXR1cm4gYjsgXG5cdFx0aWYoKHQvPWQvMik9PTIpIHJldHVybiBiK2M7XG5cdFx0aWYoIXApIHA9ZCooLjMqMS41KTtcblx0XHRpZighYSB8fCBhIDwgTWF0aC5hYnMoYykpIHsgYT1jOyBzPXAvNDsgfSAgICAgICBlbHNlIHMgPSBwLygyKk1hdGguUEkpICogTWF0aC5hc2luKGMvYSk7XG5cdFx0aWYodCA8IDEpIHJldHVybiAtLjUqKGEqTWF0aC5wb3coMiwxMCoodC09MSkpICogTWF0aC5zaW4oKHQqZC1zKSooMipNYXRoLlBJKS9wICkpICsgYjtcblx0XHRyZXR1cm4gYSpNYXRoLnBvdygyLC0xMCoodC09MSkpICogTWF0aC5zaW4oKHQqZC1zKSooMipNYXRoLlBJKS9wICkqLjUgKyBjICsgYjtcblx0fSxcblx0aW5CYWNrOiBmdW5jdGlvbih0LCBiLCBjLCBkLCBzKSB7XG5cdFx0aWYocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4O1xuXHRcdHJldHVybiBjKih0Lz1kKSp0KigocysxKSp0IC0gcykgKyBiO1xuXHR9LFxuXHRvdXRCYWNrOiBmdW5jdGlvbih0LCBiLCBjLCBkLCBzKSB7XG5cdFx0aWYocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4O1xuXHRcdHJldHVybiBjKigodD10L2QtMSkqdCooKHMrMSkqdCArIHMpICsgMSkgKyBiO1xuXHR9LFxuXHRpbk91dEJhY2s6IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIHMpIHtcblx0XHRpZihzID09IHVuZGVmaW5lZCkgcyA9IDEuNzAxNTg7XG5cdFx0aWYoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKih0KnQqKCgocyo9KDEuNTI1KSkrMSkqdCAtIHMpKSArIGI7XG5cdFx0cmV0dXJuIGMvMiooKHQtPTIpKnQqKCgocyo9KDEuNTI1KSkrMSkqdCArIHMpICsgMikgKyBiO1xuXHR9LFxuXHRpbkJvdW5jZTogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdHJldHVybiBjIC0gdGhpcy5vdXRCb3VuY2UodCwgZC10LCAwLCBjLCBkKSArIGI7XG5cdH0sXG5cdG91dEJvdW5jZTogZnVuY3Rpb24odCwgYiwgYywgZCkge1xuXHRcdGlmKCh0Lz1kKSA8KDEvMi43NSkpIHtcblx0XHRcdHJldHVybiBjKig3LjU2MjUqdCp0KSArIGI7XG5cdFx0fSBlbHNlIGlmKHQgPCgyLzIuNzUpKSB7XG5cdFx0XHRyZXR1cm4gYyooNy41NjI1Kih0LT0oMS41LzIuNzUpKSp0ICsgLjc1KSArIGI7XG5cdFx0fSBlbHNlIGlmKHQgPCgyLjUvMi43NSkpIHtcblx0XHRcdHJldHVybiBjKig3LjU2MjUqKHQtPSgyLjI1LzIuNzUpKSp0ICsgLjkzNzUpICsgYjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGMqKDcuNTYyNSoodC09KDIuNjI1LzIuNzUpKSp0ICsgLjk4NDM3NSkgKyBiO1xuXHRcdH1cblx0fSxcblx0aW5PdXRCb3VuY2U6IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcblx0XHRpZih0IDwgZC8yKSByZXR1cm4gdGhpcy5pbkJvdW5jZSh0KjIsIDAsIGMsIGQpICogLjUgKyBiO1xuXHRcdHJldHVybiB0aGlzLm91dEJvdW5jZSh0KjItZCwgMCwgYywgZCkgKiAuNSArIGMqLjUgKyBiO1xuXHR9LFxuXHRvdXRIYXJkOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG5cdFx0dmFyIHRzID0gKHQvPWQpKnQ7XG5cdFx0dmFyIHRjID0gdHMqdDtcblx0XHRyZXR1cm4gYiArIGMqKDEuNzUqdGMqdHMgKyAtNy40NDc1KnRzKnRzICsgMTIuOTk1KnRjICsgLTExLjU5NSp0cyArIDUuMjk3NSp0KTtcblx0fVxufTtcblxuZnVuY3Rpb24gbWFpbkxvb3AoKSB7XG5cdGlmICghYW5pbXMubGVuZ3RoKSB7XG5cdFx0Ly8gbm8gYW5pbWF0aW9ucyBsZWZ0LCBzdG9wIHBvbGxpbmdcblx0XHRyZXR1cm47XG5cdH1cblx0XG5cdHZhciBub3cgPSB0aW1lKCk7XG5cdHZhciBmaWx0ZXJlZCA9IFtdLCB0d2Vlbiwgb3B0O1xuXG5cdC8vIGRvIG5vdCB1c2UgQXJyYXkuZmlsdGVyKCkgb2YgXy5maWx0ZXIoKSBmdW5jdGlvblxuXHQvLyBzaW5jZSB0d2VlbuKAmXMgY2FsbGJhY2tzIGNhbiBhZGQgbmV3IGFuaW1hdGlvbnNcblx0Ly8gaW4gcnVudGltZS4gSW4gdGhpcyBjYXNlLCBmaWx0ZXIgZnVuY3Rpb24gd2lsbCBsb29zZVxuXHQvLyBuZXdseSBjcmVhdGVkIGFuaW1hdGlvblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0dHdlZW4gPSBhbmltc1tpXTtcblxuXHRcdGlmICghdHdlZW4uYW5pbWF0aW5nKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRvcHQgPSB0d2Vlbi5vcHRpb25zO1xuXG5cdFx0aWYgKHR3ZWVuLnN0YXJ0VGltZSA+IG5vdykge1xuXHRcdFx0ZmlsdGVyZWQucHVzaCh0d2Vlbik7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRpZiAodHdlZW4uaW5maW5pdGUpIHtcblx0XHRcdC8vIG9wdC5zdGVwLmNhbGwodHdlZW4sIDApO1xuXHRcdFx0b3B0LnN0ZXAoMCwgdHdlZW4pO1xuXHRcdFx0ZmlsdGVyZWQucHVzaCh0d2Vlbik7XG5cdFx0fSBlbHNlIGlmICh0d2Vlbi5wb3MgPT09IDEgfHwgdHdlZW4uZW5kVGltZSA8PSBub3cpIHtcblx0XHRcdHR3ZWVuLnBvcyA9IDE7XG5cdFx0XHQvLyBvcHQuc3RlcC5jYWxsKHR3ZWVuLCBvcHQucmV2ZXJzZSA/IDAgOiAxKTtcblx0XHRcdG9wdC5zdGVwKG9wdC5yZXZlcnNlID8gMCA6IDEsIHR3ZWVuKTtcblx0XHRcdHR3ZWVuLnN0b3AoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dHdlZW4ucG9zID0gb3B0LmVhc2luZyhub3cgLSB0d2Vlbi5zdGFydFRpbWUsIDAsIDEsIG9wdC5kdXJhdGlvbik7XG5cdFx0XHQvLyBvcHQuc3RlcC5jYWxsKHR3ZWVuLCBvcHQucmV2ZXJzZSA/IDEgLSB0d2Vlbi5wb3MgOiB0d2Vlbi5wb3MpO1xuXHRcdFx0b3B0LnN0ZXAob3B0LnJldmVyc2UgPyAxIC0gdHdlZW4ucG9zIDogdHdlZW4ucG9zLCB0d2Vlbik7XG5cdFx0XHRmaWx0ZXJlZC5wdXNoKHR3ZWVuKTtcblx0XHR9XHRcdFx0XG5cdH1cblxuXHRhbmltcyA9IGZpbHRlcmVkO1xuXG5cdGlmIChhbmltcy5sZW5ndGgpIHtcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUobWFpbkxvb3ApO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGFkZFRvUXVldWUodHdlZW4pIHtcblx0aWYgKGluZGV4T2YoYW5pbXMsIHR3ZWVuKSA9PSAtMSkge1xuXHRcdGFuaW1zLnB1c2godHdlZW4pO1xuXHRcdGlmIChhbmltcy5sZW5ndGggPT0gMSkge1xuXHRcdFx0bWFpbkxvb3AoKTtcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFR3ZWVuIHtcblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdHRoaXMub3B0aW9ucyA9IGV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXHRcblx0XHR2YXIgZSA9IHRoaXMub3B0aW9ucy5lYXNpbmc7XG5cdFx0aWYgKHR5cGVvZiBlID09ICdzdHJpbmcnKSB7XG5cdFx0XHRpZiAoIWVhc2luZ3NbZV0pXG5cdFx0XHRcdHRocm93ICdVbmtub3duIFwiJyArIGUgKyAnXCIgZWFzaW5nIGZ1bmN0aW9uJztcblx0XHRcdHRoaXMub3B0aW9ucy5lYXNpbmcgPSBlYXNpbmdzW2VdO1xuXHRcdH1cblx0XHRcblx0XHRpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5lYXNpbmcgIT0gJ2Z1bmN0aW9uJylcblx0XHRcdHRocm93ICdFYXNpbmcgc2hvdWxkIGJlIGEgZnVuY3Rpb24nO1xuXG5cdFx0dGhpcy5faWQgPSAndHcnICsgKGlkQ291bnRlcisrKTtcblx0XHRcblx0XHRpZiAodGhpcy5vcHRpb25zLmF1dG9zdGFydCkge1xuXHRcdFx0dGhpcy5zdGFydCgpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTdGFydCBhbmltYXRpb24gZnJvbSB0aGUgYmVnaW5uaW5nXG5cdCAqL1xuXHRzdGFydCgpIHtcblx0XHRpZiAoIXRoaXMuYW5pbWF0aW5nKSB7XG5cdFx0XHR0aGlzLnBvcyA9IDA7XG5cdFx0XHR0aGlzLnN0YXJ0VGltZSA9IHRpbWUoKSArICh0aGlzLm9wdGlvbnMuZGVsYXkgfHwgMCk7XG5cdFx0XHR0aGlzLmluZmluaXRlID0gdGhpcy5vcHRpb25zLmR1cmF0aW9uID09PSAnaW5maW5pdGUnO1xuXHRcdFx0dGhpcy5lbmRUaW1lID0gdGhpcy5pbmZpbml0ZSA/IDAgOiB0aGlzLnN0YXJ0VGltZSArIHRoaXMub3B0aW9ucy5kdXJhdGlvbjtcblx0XHRcdHRoaXMuYW5pbWF0aW5nID0gdHJ1ZTtcblx0XHRcdHRoaXMub3B0aW9ucy5zdGFydCh0aGlzKTtcblx0XHRcdGFkZFRvUXVldWUodGhpcyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogU3RvcCBhbmltYXRpb25cblx0ICovXG5cdHN0b3AoKSB7XG5cdFx0aWYgKHRoaXMuYW5pbWF0aW5nKSB7XG5cdFx0XHR0aGlzLmFuaW1hdGluZyA9IGZhbHNlO1xuXHRcdFx0aWYgKHRoaXMub3B0aW9ucy5jb21wbGV0ZSkge1xuXHRcdFx0XHR0aGlzLm9wdGlvbnMuY29tcGxldGUodGhpcyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0dG9nZ2xlKCkge1xuXHRcdGlmICh0aGlzLmFuaW1hdGluZykge1xuXHRcdFx0dGhpcy5zdG9wKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuc3RhcnQoKTtcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdHdlZW4ob3B0aW9ucykge1xuXHRyZXR1cm4gbmV3IFR3ZWVuKG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEdldCBvciBzZXQgZGVmYXVsdCB2YWx1ZVxuICogQHBhcmFtICB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0gIHtPYmplY3R9IHZhbHVlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhuYW1lLCB2YWx1ZSkge1xuXHRpZiAodHlwZW9mIHZhbHVlICE9ICd1bmRlZmluZWQnKSB7XG5cdFx0ZGVmYXVsdHNbbmFtZV0gPSB2YWx1ZTtcblx0fVxuXG5cdHJldHVybiBkZWZhdWx0c1tuYW1lXTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFsbCBhY3RpdmUgYW5pbWF0aW9uIG9iamVjdHMuXG4gKiBGb3IgZGVidWdnaW5nIG1vc3RseVxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfYWxsKCkge1xuXHRyZXR1cm4gYW5pbXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9wKCkge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGFuaW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0YW5pbXNbaV0uc3RvcCgpO1xuXHR9XG5cblx0YW5pbXMubGVuZ3RoID0gMDtcbn07IiwiLyoqXG4gKiBNb2R1bGUgdGhhdCBjcmVhdGVzIGxpc3Qgb2YgYWN0aW9uIGhpbnRzIGFuZCBoaWdobGlnaHRzIGl0ZW1zIHdoZW4gc3BlY2lmaWVkXG4gKiBhY3Rpb24gaXMgcGVyZm9ybWVkXG4gKi9cblwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgKiBhcyBkb20gZnJvbSAnLi4vZG9tJztcbmltcG9ydCB7dGVtcGxhdGUsIGZpbmQsIHRvQXJyYXksIGV4dGVuZH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuXHR3cmFwcGVyVGVtcGxhdGU6ICc8dWwgY2xhc3M9XCJDb2RlTWlycm9yLW91dGxpbmVcIj48JT0gY29udGVudCAlPjwvdWw+Jyxcblx0aXRlbVRlbXBsYXRlOiAnPGxpIGRhdGEtYWN0aW9uLWlkPVwiPCU9IGlkICU+XCIgY2xhc3M9XCJDb2RlTWlycm9yLW91dGxpbmVfX2l0ZW1cIj48JT0gdGl0bGUgJT48L2xpPicsXG5cdGl0ZW1DbGFzczogJ0NvZGVNaXJyb3Itb3V0bGluZV9faXRlbScsXG5cdHNlbGVjdGVkQ2xhc3M6ICdDb2RlTWlycm9yLW91dGxpbmVfX2l0ZW1fc2VsZWN0ZWQnXG59O1xuXHRcbi8qKlxuICogQHBhcmFtIHtPYmplY3R9IGhpbnRzXG4gKiBAcGFyYW0ge1NjZW5hcmlvfSBzY2VuYXJpb1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaGludHMsIHNjZW5hcmlvLCBvcHRpb25zPXt9KSB7XG5cdG9wdGlvbnMgPSBleHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblx0XG5cdHZhciBoaW50S2V5cyA9IE9iamVjdC5rZXlzKGhpbnRzKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRyZXR1cm4gYSAtIGI7XG5cdH0pO1xuXHRcblx0dmFyIGl0ZW1UZW1wbGF0ZSA9IHRlbXBsYXRlKG9wdGlvbnMuaXRlbVRlbXBsYXRlKTtcblx0dmFyIGl0ZW1zID0gaGludEtleXMubWFwKGtleSA9PiBpdGVtVGVtcGxhdGUoe3RpdGxlOiBoaW50c1trZXldLCBpZDoga2V5fSkpO1xuXHRcblx0dmFyIGVsID0gZG9tLnRvRE9NKHRlbXBsYXRlKG9wdGlvbnMud3JhcHBlclRlbXBsYXRlLCB7XG5cdFx0Y29udGVudDogaXRlbXMuam9pbignJylcblx0fSkpO1xuXHRcblx0aWYgKG9wdGlvbnMudGFyZ2V0KSB7XG5cdFx0b3B0aW9ucy50YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHR9XG5cdFxuXHRzY2VuYXJpb1xuXHRcdC5vbignYWN0aW9uJywgZnVuY3Rpb24oaWQpIHtcblx0XHRcdHZhciBpdGVtcyA9IHRvQXJyYXkoZWwucXVlcnlTZWxlY3RvckFsbCgnLicgKyBvcHRpb25zLml0ZW1DbGFzcykpO1xuXHRcdFx0dmFyIG1hdGNoZWRJdGVtID0gZmluZChpdGVtcywgZWxlbSA9PiBlbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1hY3Rpb24taWQnKSA9PSBpZCk7XG5cdFx0XHRcblx0XHRcdGlmIChtYXRjaGVkSXRlbSkge1xuXHRcdFx0XHRpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKG9wdGlvbnMuc2VsZWN0ZWRDbGFzcykpO1xuXHRcdFx0XHRtYXRjaGVkSXRlbS5jbGFzc0xpc3QuYWRkKG9wdGlvbnMuc2VsZWN0ZWRDbGFzcyk7XG5cdFx0XHR9XG5cdFx0fSlcblx0XHQub24oJ3N0b3AnLCBmdW5jdGlvbigpIHtcblx0XHRcdHRvQXJyYXkoZWwucXVlcnlTZWxlY3RvckFsbCgnLicgKyBvcHRpb25zLml0ZW1DbGFzcykpXG5cdFx0XHQuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShvcHRpb25zLnNlbGVjdGVkQ2xhc3MpKTtcblx0XHR9KTtcblx0XG5cdHJldHVybiBlbDtcbn07IiwiLyoqXG4gKiBTaG93cyBmYWtlIHByb21wdCBkaWFsb2cgd2l0aCBpbnRlcmFjdGl2ZSB2YWx1ZSB0eXBpbmdcbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB0d2VlbiBmcm9tICcuLi92ZW5kb3IvdHdlZW4nO1xuaW1wb3J0IHtleHRlbmQsIHRlbXBsYXRlLCBoYXMzZCwgcHJlZml4ZWR9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCAqIGFzIGRvbSBmcm9tICcuLi9kb20nO1xuXG52YXIgZGlhbG9nSW5zdGFuY2UgPSBudWxsO1xudmFyIGJnSW5zdGFuY2UgPSBudWxsO1xudmFyIGxhc3RUd2VlbiA9IG51bGw7XG5cbmV4cG9ydCB2YXIgYWN0aW9ucyA9IHtcblx0cHJvbXB0KG9wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXIpIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdHRpdGxlOiAnRW50ZXIgc29tZXRoaW5nJyxcblx0XHRcdGRlbGF5OiA4MCwgICAgICAgIC8vIGRlbGF5IGJldHdlZW4gY2hhcmFjdGVyIHR5cGluZ1xuXHRcdFx0dHlwZURlbGF5OiAxMDAwLCAgLy8gdGltZSB0byB3YWl0IGJlZm9yZSB0eXBpbmcgdGV4dFxuXHRcdFx0aGlkZURlbGF5OiAyMDAwICAgLy8gdGltZSB0byB3YWl0IGJlZm9yZSBoaWRpbmcgcHJvbXB0IGRpYWxvZ1xuXHRcdH0sIHdyYXAoJ3RleHQnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0c2hvdyhvcHRpb25zLnRpdGxlLCBlZGl0b3IuZ2V0V3JhcHBlckVsZW1lbnQoKSwgZnVuY3Rpb24oZGlhbG9nKSB7XG5cdFx0XHR0aW1lcihmdW5jdGlvbigpIHtcblx0XHRcdFx0dHlwZVRleHQoZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoJy5Db2RlTWlycm9yLXByb21wdF9faW5wdXQnKSwgb3B0aW9ucywgdGltZXIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHRpbWVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aGlkZShuZXh0KTtcblx0XHRcdFx0XHR9LCBvcHRpb25zLmhpZGVEZWxheSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSwgb3B0aW9ucy50eXBlRGVsYXkpO1xuXHRcdH0pO1xuXHR9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2hvdyh0ZXh0LCB0YXJnZXQsIGNhbGxiYWNrKSB7XG5cdGhpZGUoKTtcblx0ZGlhbG9nSW5zdGFuY2UgPSBkb20udG9ET00oYDxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXByb21wdFwiPlxuXHRcdDxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXByb21wdF9fdGl0bGVcIj4ke3RleHR9PC9kaXY+XG5cdFx0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInByb21wdFwiIGNsYXNzPVwiQ29kZU1pcnJvci1wcm9tcHRfX2lucHV0XCIgcmVhZG9ubHk9XCJyZWFkb25seVwiIC8+XG5cdFx0PC9kaXY+YCk7XG5cdGJnSW5zdGFuY2UgPSBkb20udG9ET00oJzxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXByb21wdF9fc2hhZGVcIj48L2Rpdj4nKTtcblx0XG5cdHRhcmdldC5hcHBlbmRDaGlsZChkaWFsb2dJbnN0YW5jZSk7XG5cdHRhcmdldC5hcHBlbmRDaGlsZChiZ0luc3RhbmNlKTtcblx0XG5cdGFuaW1hdGVTaG93KGRpYWxvZ0luc3RhbmNlLCBiZ0luc3RhbmNlLCB7Y29tcGxldGU6IGNhbGxiYWNrfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaWRlKGNhbGxiYWNrKSB7XG5cdGlmIChkaWFsb2dJbnN0YW5jZSkge1xuXHRcdGlmIChsYXN0VHdlZW4pIHtcblx0XHRcdGxhc3RUd2Vlbi5zdG9wKCk7XG5cdFx0XHRsYXN0VHdlZW4gPSBudWxsO1xuXHRcdH1cblx0XHRhbmltYXRlSGlkZShkaWFsb2dJbnN0YW5jZSwgYmdJbnN0YW5jZSwge2NvbXBsZXRlOiBjYWxsYmFja30pO1xuXHRcdGRpYWxvZ0luc3RhbmNlID0gYmdJbnN0YW5jZSA9IG51bGw7XG5cdH0gZWxzZSBpZiAoY2FsbGJhY2spIHtcblx0XHRjYWxsYmFjaygpO1xuXHR9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBkaWFsb2dcbiAqIEBwYXJhbSB7RWxlbWVudH0gYmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFxuICovXG5mdW5jdGlvbiBhbmltYXRlU2hvdyhkaWFsb2csIGJnLCBvcHRpb25zPXt9KSB7XG5cdHZhciBjc3NUcmFuc2Zvcm0gPSBwcmVmaXhlZCgndHJhbnNmb3JtJyk7XG5cdHZhciBkaWFsb2dTdHlsZSA9IGRpYWxvZy5zdHlsZTtcblx0dmFyIGJnU3R5bGUgPSBiZy5zdHlsZTtcblx0dmFyIGhlaWdodCA9IGRpYWxvZy5vZmZzZXRIZWlnaHQ7XG5cdHZhciB0bXBsID0gdGVtcGxhdGUoaGFzM2QgPyAndHJhbnNsYXRlM2QoMCwgPCU9IHBvcyAlPiwgMCknIDogJ3RyYW5zbGF0ZSgwLCA8JT0gcG9zICU+KScpO1xuXG5cdGJnU3R5bGUub3BhY2l0eSA9IDA7XG5cdHR3ZWVuKHtcblx0XHRkdXJhdGlvbjogMjAwLFxuXHRcdHN0ZXAocG9zKSB7XG5cdFx0XHRiZ1N0eWxlLm9wYWNpdHkgPSBwb3M7XG5cdFx0fVxuXHR9KTtcblx0XG5cdGRpYWxvZ1N0eWxlW2Nzc1RyYW5zZm9ybV0gPSB0bXBsKHtwb3M6IC1oZWlnaHR9KTtcblx0XG5cdHJldHVybiBsYXN0VHdlZW4gPSB0d2Vlbih7XG5cdFx0ZHVyYXRpb246IDQwMCxcblx0XHRlYXNpbmc6ICdvdXRDdWJpYycsXG5cdFx0c3RlcChwb3MpIHtcblx0XHRcdGRpYWxvZ1N0eWxlW2Nzc1RyYW5zZm9ybV0gPSB0bXBsKHtwb3M6ICgtaGVpZ2h0ICogKDEgLSBwb3MpKSArICdweCd9KTtcblx0XHR9LFxuXHRcdGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdGxhc3RUd2VlbiA9IG51bGw7XG5cdFx0XHRvcHRpb25zLmNvbXBsZXRlICYmIG9wdGlvbnMuY29tcGxldGUoZGlhbG9nLCBiZyk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGRpYWxvZ1xuICogQHBhcmFtIHtFbGVtZW50fSBiZ1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gYW5pbWF0ZUhpZGUoZGlhbG9nLCBiZywgb3B0aW9ucykge1xuXHR2YXIgZGlhbG9nU3R5bGUgPSBkaWFsb2cuc3R5bGU7XG5cdHZhciBiZ1N0eWxlID0gYmcuc3R5bGU7XG5cdHZhciBoZWlnaHQgPSBkaWFsb2cub2Zmc2V0SGVpZ2h0O1xuXHR2YXIgY3NzVHJhbnNmb3JtID0gcHJlZml4ZWQoJ3RyYW5zZm9ybScpO1xuXHR2YXIgdG1wbCA9IHRlbXBsYXRlKGhhczNkID8gJ3RyYW5zbGF0ZTNkKDAsIDwlPSBwb3MgJT4sIDApJyA6ICd0cmFuc2xhdGUoMCwgPCU9IHBvcyAlPiknKTtcblxuXHRyZXR1cm4gdHdlZW4oe1xuXHRcdGR1cmF0aW9uOiAyMDAsXG5cdFx0c3RlcChwb3MpIHtcblx0XHRcdGRpYWxvZ1N0eWxlW2Nzc1RyYW5zZm9ybV0gPSB0bXBsKHtwb3M6ICgtaGVpZ2h0ICogcG9zKSArICdweCd9KTtcblx0XHRcdGJnU3R5bGUub3BhY2l0eSA9IDEgLSBwb3M7XG5cdFx0fSxcblx0XHRjb21wbGV0ZSgpIHtcblx0XHRcdGRvbS5yZW1vdmUoW2RpYWxvZywgYmddKTtcblx0XHRcdG9wdGlvbnMuY29tcGxldGUgJiYgb3B0aW9ucy5jb21wbGV0ZShkaWFsb2csIGJnKTtcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB0eXBlVGV4dCh0YXJnZXQsIG9wdGlvbnMsIHRpbWVyLCBuZXh0KSB7XG5cdHZhciBjaGFycyA9IG9wdGlvbnMudGV4dC5zcGxpdCgnJyk7XG5cdHRpbWVyKGZ1bmN0aW9uIHBlcmZvcm0oKSB7XG5cdFx0dGFyZ2V0LnZhbHVlICs9IGNoYXJzLnNoaWZ0KCk7XG5cdFx0aWYgKGNoYXJzLmxlbmd0aCkge1xuXHRcdFx0dGltZXIocGVyZm9ybSwgb3B0aW9ucy5kZWxheSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5leHQoKTtcblx0XHR9XG5cdH0sIG9wdGlvbnMuZGVsYXkpO1xufVxuXG5mdW5jdGlvbiB3cmFwKGtleSwgdmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgPyB2YWx1ZSA6IHtba2V5XTogdmFsdWV9O1xufSIsIi8qKlxuICogRXh0ZW5zaW9uIHRoYXQgYWxsb3dzIGF1dGhvcnMgdG8gZGlzcGxheSBjb250ZXh0IHRvb2x0aXBzIGJvdW5kIHRvIHNwZWNpZmljXG4gKiBwb3NpdGlvbnNcbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB0d2VlbiBmcm9tICcuLi92ZW5kb3IvdHdlZW4nO1xuaW1wb3J0IHtleHRlbmQsIHByZWZpeGVkLCBtYWtlUG9zLCBoYXMzZH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0ICogYXMgZG9tIGZyb20gJy4uL2RvbSc7XG5cbnZhciBpbnN0YW5jZSA9IG51bGw7XG52YXIgbGFzdFR3ZWVuID0gbnVsbDtcblxuZXhwb3J0IHZhciBhbGlnbkRlZmF1bHRzID0ge1xuXHQvKiogQ1NTIHNlbGVjdG9yIGZvciBnZXR0aW5nIHBvcHVwIHRhaWwgKi9cblx0dGFpbENsYXNzOiAnQ29kZU1pcnJvci10b29sdGlwX190YWlsJyxcblx0XG5cdC8qKiBDbGFzcyBuYW1lIGZvciBzd2l0Y2hpbmcgdGFpbC9wb3B1cCBwb3NpdGlvbiByZWxhdGl2ZSB0byB0YXJnZXQgcG9pbnQgKi9cblx0YmVsb3dDbGFzczogJ0NvZGVNaXJyb3ItdG9vbHRpcF9iZWxvdycsXG5cdFxuXHQvKiogTWluIGRpc3RhbmNlIGJldHdlZW4gcG9wdXAgYW5kIHZpZXdwb3J0ICovXG5cdHBvcHVwTWFyZ2luOiA1LFxuXHRcblx0LyoqIE1pbiBkaXN0YW5jZSBiZXR3ZWVuIHBvcHVwIGxlZnQvcmlnaHQgZWRnZSBhbmQgaXRzIHRhaWwgKi9cblx0dGFpbE1hcmdpbjogMTFcbn07XG5cbmV4cG9ydCB2YXIgYWN0aW9ucyA9IHtcblx0LyoqXG5cdCAqIFNob3dzIHRvb2x0aXAgd2l0aCBnaXZlbiB0ZXh0LCB3YWl0IGZvciBgb3B0aW9ucy53YWl0YFxuXHQgKiBtaWxsaXNlY29uZHMgdGhlbiBoaWRlcyB0b29sdGlwXG5cdCAqL1xuXHR0b29sdGlwKG9wdGlvbnMsIGVkaXRvciwgbmV4dCwgdGltZXIpIHtcblx0XHRvcHRpb25zID0gZXh0ZW5kKHtcblx0XHRcdHdhaXQ6IDQwMDAsICAgLy8gdGltZSB0byB3YWl0IGJlZm9yZSBoaWRpbmcgdG9vbHRpcFxuXHRcdFx0cG9zOiAnY2FyZXQnICAvLyBwb3NpdGlvbiB3aGVyZSB0b29sdGlwIHNob3VsZCBwb2ludCB0b1xuXHRcdH0sIHdyYXAoJ3RleHQnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0dmFyIHBvcyA9IHJlc29sdmVQb3NpdGlvbihvcHRpb25zLnBvcywgZWRpdG9yKTtcblx0XHRzaG93KG9wdGlvbnMudGV4dCwgcG9zLCBmdW5jdGlvbigpIHtcblx0XHRcdHRpbWVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRoaWRlKCgpID0+IHRpbWVyKG5leHQpKTtcblx0XHRcdH0sIG9wdGlvbnMud2FpdCk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyoqXG5cdCAqIFNob3dzIHRvb2x0aXAgd2l0aCBzcGVjaWZpZWQgdGV4dC4gVGhpcyB0b29sdGlwIHNob3VsZCBiZSBleHBsaWNpdGx5IFxuXHQgKiBoaWRkZW4gd2l0aCBgaGlkZVRvb2x0aXBgIGFjdGlvblxuXHQgKi9cblx0c2hvd1Rvb2x0aXAob3B0aW9ucywgZWRpdG9yLCBuZXh0LCB0aW1lcikge1xuXHRcdG9wdGlvbnMgPSBleHRlbmQoe1xuXHRcdFx0cG9zOiAnY2FyZXQnICAvLyBwb3NpdGlvbiB3aGVyZSB0b29sdGlwIHNob3VsZCBwb2ludCB0b1xuXHRcdH0sIHdyYXAoJ3RleHQnLCBvcHRpb25zKSk7XG5cdFx0XG5cdFx0c2hvdyhvcHRpb25zLnRleHQsIHJlc29sdmVQb3NpdGlvbihvcHRpb25zLnBvcywgZWRpdG9yKSk7XG5cdFx0bmV4dCgpO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBIaWRlcyB0b29sdGlwLCBwcmV2aW91c2x5IHNob3duIGJ5ICdzaG93VG9vbHRpcCcgYWN0aW9uXG5cdCAqL1xuXHRoaWRlVG9vbHRpcChvcHRpb25zLCBlZGl0b3IsIG5leHQsIHRpbWVyKSB7XG5cdFx0aGlkZShuZXh0KTtcblx0fVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3codGV4dCwgcG9zLCBjYWxsYmFjaykge1xuXHRoaWRlKCk7XG5cdFxuXHRpbnN0YW5jZSA9IGRvbS50b0RPTShgPGRpdiBjbGFzcz1cIkNvZGVNaXJyb3ItdG9vbHRpcFwiPlxuXHRcdDxkaXYgY2xhc3M9XCJDb2RlTWlycm9yLXRvb2x0aXBfX2NvbnRlbnRcIj4ke3RleHR9PC9kaXY+XG5cdFx0PGRpdiBjbGFzcz1cIkNvZGVNaXJyb3ItdG9vbHRpcF9fdGFpbFwiPjwvZGl2PlxuXHRcdDwvZGl2PmApO1xuXHRcblx0ZG9tLmNzcyhpbnN0YW5jZSwgcHJlZml4ZWQoJ3RyYW5zZm9ybScpLCAnc2NhbGUoMCknKTtcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbnN0YW5jZSk7XG5cdFxuXHRhbGlnblBvcHVwV2l0aFRhaWwoaW5zdGFuY2UsIHtwb3NpdGlvbjogcG9zfSk7XG5cdGFuaW1hdGVTaG93KGluc3RhbmNlLCB7Y29tcGxldGU6IGNhbGxiYWNrfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaWRlKGNhbGxiYWNrKSB7XG5cdGlmIChpbnN0YW5jZSkge1xuXHRcdGlmIChsYXN0VHdlZW4pIHtcblx0XHRcdGxhc3RUd2Vlbi5zdG9wKCk7XG5cdFx0XHRsYXN0VHdlZW4gPSBudWxsO1xuXHRcdH1cblx0XHRhbmltYXRlSGlkZShpbnN0YW5jZSwge2NvbXBsZXRlOiBjYWxsYmFja30pO1xuXHRcdGluc3RhbmNlID0gbnVsbDtcblx0fSBlbHNlIGlmIChjYWxsYmFjaykge1xuXHRcdGNhbGxiYWNrKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdGhhdCBmaW5kcyBvcHRpbWFsIHBvc2l0aW9uIG9mIHRvb2x0aXAgcG9wdXAgb24gcGFnZVxuICogYW5kIGFsaWducyBwb3B1cCB0YWlsIHdpdGggdGhpcyBwb3NpdGlvblxuICogQHBhcmFtIHtFbGVtZW50fSBwb3B1cFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gYWxpZ25Qb3B1cFdpdGhUYWlsKHBvcHVwLCBvcHRpb25zPXt9KSB7XG5cdG9wdGlvbnMgPSBleHRlbmQoe30sIGFsaWduRGVmYXVsdHMsIG9wdGlvbnMpO1xuXHRcblx0ZG9tLmNzcyhwb3B1cCwge1xuXHRcdGxlZnQ6IDAsXG5cdFx0dG9wOiAwXG5cdH0pO1xuXHRcblx0dmFyIHRhaWwgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcuJyArIG9wdGlvbnMudGFpbENsYXNzKTtcblx0XG5cdHZhciByZXN1bHRYID0gMCwgcmVzdWx0WSA9IDA7XG5cdHZhciBwb3MgPSBvcHRpb25zLnBvc2l0aW9uO1xuXHR2YXIgdnAgPSBkb20udmlld3BvcnRSZWN0KCk7XG5cdFxuXHR2YXIgd2lkdGggPSBwb3B1cC5vZmZzZXRXaWR0aDtcblx0dmFyIGhlaWdodCA9IHBvcHVwLm9mZnNldEhlaWdodDtcblx0XG5cdHZhciBpc1RvcDtcblx0XHRcblx0Ly8gY2FsY3VsYXRlIGhvcml6b250YWwgcG9zaXRpb25cblx0cmVzdWx0WCA9IE1hdGgubWluKHZwLndpZHRoIC0gd2lkdGggLSBvcHRpb25zLnBvcHVwTWFyZ2luLCBNYXRoLm1heChvcHRpb25zLnBvcHVwTWFyZ2luLCBwb3MueCAtIHZwLmxlZnQgLSB3aWR0aCAvIDIpKTtcblx0XG5cdC8vIGNhbGN1bGF0ZSB2ZXJ0aWNhbCBwb3NpdGlvblxuXHRpZiAoaGVpZ2h0ICsgdGFpbC5vZmZzZXRIZWlnaHQgKyBvcHRpb25zLnBvcHVwTWFyZ2luICsgdnAudG9wIDwgcG9zLnkpIHtcblx0XHQvLyBwbGFjZSBhYm92ZSB0YXJnZXQgcG9zaXRpb25cblx0XHRyZXN1bHRZID0gTWF0aC5tYXgoMCwgcG9zLnkgLSBoZWlnaHQgLSB0YWlsLm9mZnNldEhlaWdodCk7XG5cdFx0aXNUb3AgPSB0cnVlO1xuXHR9IGVsc2Uge1xuXHRcdC8vIHBsYWNlIGJlbG93IHRhcmdldCBwb3NpdGlvbiBcblx0XHRyZXN1bHRZID0gcG9zLnkgKyB0YWlsLm9mZnNldEhlaWdodDtcblx0XHRpc1RvcCA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvLyBjYWxjdWxhdGUgdGFpbCBwb3NpdGlvblxuXHR2YXIgdGFpbE1pbkxlZnQgPSBvcHRpb25zLnRhaWxNYXJnaW47XG5cdHZhciB0YWlsTWF4TGVmdCA9IHdpZHRoIC0gb3B0aW9ucy50YWlsTWFyZ2luO1xuXHR0YWlsLnN0eWxlLmxlZnQgPSBNYXRoLm1pbih0YWlsTWF4TGVmdCwgTWF0aC5tYXgodGFpbE1pbkxlZnQsIHBvcy54IC0gcmVzdWx0WCAtIHZwLmxlZnQpKSArICdweCc7XG5cdFxuXHRkb20uY3NzKHBvcHVwLCB7XG5cdFx0bGVmdDogcmVzdWx0WCxcblx0XHR0b3A6IHJlc3VsdFlcblx0fSk7XG5cdFxuXHRwb3B1cC5jbGFzc0xpc3QudG9nZ2xlKG9wdGlvbnMuYmVsb3dDbGFzcywgIWlzVG9wKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2pRdWVyeX0gZWxlbVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGVTaG93KGVsZW0sIG9wdGlvbnM9e30pIHtcblx0b3B0aW9ucyA9IGV4dGVuZCh7fSwgYWxpZ25EZWZhdWx0cywgb3B0aW9ucyk7XG5cdHZhciBjc3NPcmlnaW4gPSBwcmVmaXhlZCgndHJhbnNmb3JtLW9yaWdpbicpO1xuXHR2YXIgY3NzVHJhbnNmb3JtID0gcHJlZml4ZWQoJ3RyYW5zZm9ybScpO1xuXHR2YXIgc3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdHZhciB0YWlsID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuJyArIG9wdGlvbnMudGFpbENsYXNzKTtcblx0dmFyIHhPcmlnaW4gPSBkb20uY3NzKHRhaWwsICdsZWZ0Jyk7XG5cdHZhciB5T3JpZ2luID0gdGFpbC5vZmZzZXRUb3A7XG5cdGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25zLmJlbG93Q2xhc3MpKSB7XG5cdFx0eU9yaWdpbiAtPSB0YWlsLm9mZnNldEhlaWdodDtcblx0fVxuXHRcblx0eU9yaWdpbiArPSAncHgnO1xuXG5cdHN0eWxlW2Nzc09yaWdpbl0gPSB4T3JpZ2luICsgJyAnICsgeU9yaWdpbjtcblx0dmFyIHByZWZpeCA9IGhhczNkID8gJ3RyYW5zbGF0ZVooMCkgJyA6ICcnO1xuXHRcblx0cmV0dXJuIGxhc3RUd2VlbiA9IHR3ZWVuKHtcblx0XHRkdXJhdGlvbjogODAwLFxuXHRcdGVhc2luZzogJ291dEVsYXN0aWMnLFxuXHRcdHN0ZXAocG9zKSB7XG5cdFx0XHRzdHlsZVtjc3NUcmFuc2Zvcm1dID0gcHJlZml4ICsgJ3NjYWxlKCcgKyBwb3MgKyAnKSc7XG5cdFx0fSxcblx0XHRjb21wbGV0ZSgpIHtcblx0XHRcdHN0eWxlW2Nzc1RyYW5zZm9ybV0gPSAnbm9uZSc7XG5cdFx0XHRsYXN0VHdlZW4gPSBudWxsO1xuXHRcdFx0b3B0aW9ucy5jb21wbGV0ZSAmJiBvcHRpb25zLmNvbXBsZXRlKGVsZW0pO1xuXHRcdH1cblx0fSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtqUXVlcnl9IGVsZW1cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGVIaWRlKGVsZW0sIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRyZXR1cm4gdHdlZW4oe1xuXHRcdGR1cmF0aW9uOiAyMDAsXG5cdFx0ZWFzaW5nOiAnbGluZWFyJyxcblx0XHRzdGVwOiBmdW5jdGlvbihwb3MpIHtcblx0XHRcdHN0eWxlLm9wYWNpdHkgPSAoMSAtIHBvcyk7XG5cdFx0fSxcblx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRkb20ucmVtb3ZlKGVsZW0pO1xuXHRcdFx0b3B0aW9ucy5jb21wbGV0ZSAmJiBvcHRpb25zLmNvbXBsZXRlKGVsZW0pO1xuXHRcdH1cblx0fSk7XG59XG5cbi8qKlxuICogUmVzb2x2ZXMgcG9zaXRpb24gd2hlcmUgdG9vbHRpcCBzaG91bGQgcG9pbnQgdG9cbiAqIEBwYXJhbSB7T2JqZWN0fSBwb3NcbiAqIEBwYXJhbSB7Q29kZU1pcnJvcn0gZWRpdG9yXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBPYmplY3Qgd2l0aCA8Y29kZT54PC9jb2RlPiBhbmQgPGNvZGU+eTwvY29kZT4gXG4gKiBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVQb3NpdGlvbihwb3MsIGVkaXRvcikge1xuXHRpZiAocG9zID09PSAnY2FyZXQnKSB7XG5cdFx0Ly8gZ2V0IGFic29sdXRlIHBvc2l0aW9uIG9mIGN1cnJlbnQgY2FyZXQgcG9zaXRpb25cblx0XHRyZXR1cm4gc2FuaXRpemVDYXJldFBvcyhlZGl0b3IuY3Vyc29yQ29vcmRzKHRydWUpKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgcG9zID09PSAnb2JqZWN0Jykge1xuXHRcdGlmICgneCcgaW4gcG9zICYmICd5JyBpbiBwb3MpIHtcblx0XHRcdC8vIHBhc3NlZCBhYnNvbHV0ZSBjb29yZGluYXRlc1xuXHRcdFx0cmV0dXJuIHBvcztcblx0XHR9XG5cblx0XHRpZiAoJ2xlZnQnIGluIHBvcyAmJiAndG9wJyBpbiBwb3MpIHtcblx0XHRcdC8vIHBhc3NlZCBhYnNvbHV0ZSBjb29yZGluYXRlc1xuXHRcdFx0cmV0dXJuIHNhbml0aXplQ2FyZXRQb3MocG9zKTtcblx0XHR9XG5cdH1cblx0XG5cdHBvcyA9IG1ha2VQb3MocG9zLCBlZGl0b3IpO1xuXHRyZXR1cm4gc2FuaXRpemVDYXJldFBvcyhlZGl0b3IuY2hhckNvb3Jkcyhwb3MpKTtcbn1cblxuZnVuY3Rpb24gc2FuaXRpemVDYXJldFBvcyhwb3MpIHtcblx0aWYgKCdsZWZ0JyBpbiBwb3MpIHtcblx0XHRwb3MueCA9IHBvcy5sZWZ0O1xuXHR9XG5cblx0aWYgKCd0b3AnIGluIHBvcykge1xuXHRcdHBvcy55ID0gcG9zLnRvcDtcblx0fVxuXG5cdHJldHVybiBwb3M7XG59XG5cbmZ1bmN0aW9uIHdyYXAoa2V5LCB2YWx1ZSkge1xuXHRyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyA/IHZhbHVlIDoge1trZXldOiB2YWx1ZX07XG59Il19"}